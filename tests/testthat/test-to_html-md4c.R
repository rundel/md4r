# Generated by helper-tests.R, do not edit by hand

# coverage -------------------------------

test_that("coverage - Ex 1 (L14-16) - `md_is_unicode_whitespace__()`", {
  expect_identical_html(
    md = c(
      "*foo‚ÄÄ*bar\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>*foo‚ÄÄ*bar</p>"
    )
  )
})

test_that("coverage - Ex 2 (L25-27) - `md_is_unicode_punct__()`", {
  expect_identical_html(
    md = c(
      "*foo¬°*bar\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>*foo¬°*bar</p>"
    )
  )
})

test_that("coverage - Ex 3 (L34-38) - `md_get_unicode_fold_info()`", {
  expect_identical_html(
    md = c(
      "[P≈ô√≠li≈° ≈ælu≈•ouƒçk√Ω k≈Ø≈à √∫pƒõl ƒè√°belsk√© √≥dy.]",
      "",
      "[P≈ò√çLI≈† ≈ΩLU≈§OUƒåK√ù K≈Æ≈á √öPƒöL ƒé√ÅBELSK√â √ìDY.]: /url"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/url\">P≈ô√≠li≈° ≈ælu≈•ouƒçk√Ω k≈Ø≈à √∫pƒõl ƒè√°belsk√© √≥dy.</a></p>"
    )
  )
})

test_that("coverage - Ex 4 (L51-53) - Alphanumerical Character (i.e. not whitespace, not punctuation)", {
  expect_identical_html(
    md = c(
      "X__foo__X\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>X__foo__X</p>"
    )
  )
})

test_that("coverage - Ex 5 (L58-60) - Alphanumerical Character (i.e. not whitespace, not punctuation)", {
  expect_identical_html(
    md = c(
      "≈ò__foo__≈ò\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>≈ò__foo__≈ò</p>"
    )
  )
})

test_that("coverage - Ex 6 (L65-67) - Alphanumerical Character (i.e. not whitespace, not punctuation)", {
  expect_identical_html(
    md = c(
      "‡Æ£__foo__‡Æ£\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>‡Æ£__foo__‡Æ£</p>"
    )
  )
})

test_that("coverage - Ex 7 (L72-74) - Alphanumerical Character (i.e. not whitespace, not punctuation)", {
  expect_identical_html(
    md = c(
      "ìÖÇ__foo__ìÖÇ\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>ìÖÇ__foo__ìÖÇ</p>"
    )
  )
})

test_that("coverage - Ex 8 (L83-85) - Whitespace character", {
  testthat::skip("coverage #8 - Weird utf issue with spaces")
  expect_identical_html(
    md = c(
      "x\t__foo__\t\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>x <strong>foo</strong></p>"
    )
  )
})

test_that("coverage - Ex 9 (L91-93) - Whitespace character", {
  testthat::skip("coverage #9 - Weird utf issue with spaces")
  expect_identical_html(
    md = c(
      " __foo__\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p> <strong>foo</strong> </p>"
    )
  )
})

test_that("coverage - Ex 10 (L98-100) - Whitespace character", {
  testthat::skip("coverage #10 - Weird utf issue with spaces")
  expect_identical_html(
    md = c(
      "‚ÄÄ__foo__\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>‚ÄÄ<strong>foo</strong>‚ÄÄ</p>"
    )
  )
})

test_that("coverage - Ex 11 (L111-113) - Punctuation character", {
  expect_identical_html(
    md = c(
      ".__foo__.\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>.<strong>foo</strong>.</p>"
    )
  )
})

test_that("coverage - Ex 12 (L118-120) - Punctuation character", {
  expect_identical_html(
    md = c(
      "¬∑__foo__¬∑\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>¬∑<strong>foo</strong>¬∑</p>"
    )
  )
})

test_that("coverage - Ex 13 (L125-127) - Punctuation character", {
  expect_identical_html(
    md = c(
      "‡≤Ñ__foo__‡≤Ñ\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>‡≤Ñ<strong>foo</strong>‡≤Ñ</p>"
    )
  )
})

test_that("coverage - Ex 14 (L132-134) - Punctuation character", {
  expect_identical_html(
    md = c(
      "êéü__foo__êéü\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>êéü<strong>foo</strong>êéü</p>"
    )
  )
})

test_that("coverage - Ex 15 (L141-143) - `md_is_link_destination_A()`", {
  expect_identical_html(
    md = c(
      "[link](</url\\.with\\.escape>)\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/url.with.escape\">link</a></p>"
    )
  )
})

test_that("coverage - Ex 16 (L150-154) - `md_link_label_eq()`", {
  expect_identical_html(
    md = c(
      "[foo bar]", "",
      "[foo bar]: /url"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/url\">foo bar</a></p>"
    )
  )
})

test_that("coverage - Ex 17 (L161-167) - `md_is_inline_link_spec()`", {
  expect_identical_html(
    md = c(
      "> [link](/url 'foo",
      "> bar')"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "<p><a href=\"/url\" title=\"foo",
      "bar\">link</a></p>",
      "</blockquote>"
    )
  )
})

test_that("coverage - Ex 18 (L181-199) - `md_build_ref_def_hashtable()`", {
  expect_identical_html(
    md = c(
      "[foo]: /foo",
      "[qnptgbh]: /qnptgbh",
      "[abgbrwcv]: /abgbrwcv",
      "[abgbrwcv]: /abgbrwcv2",
      "[abgbrwcv]: /abgbrwcv3",
      "[abgbrwcv]: /abgbrwcv4",
      "[alqadfgn]: /alqadfgn", "",
      "[foo]", "[qnptgbh]",
      "[abgbrwcv]", "[alqadfgn]",
      "[axgydtdu]"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/foo\">foo</a>",
      "<a href=\"/qnptgbh\">qnptgbh</a>",
      "<a href=\"/abgbrwcv\">abgbrwcv</a>",
      "<a href=\"/alqadfgn\">alqadfgn</a>",
      "[axgydtdu]</p>"
    )
  )
})

test_that("coverage - Ex 19 (L292-296) - Flag `MD_FLAG_COLLAPSEWHITESPACE`", {
  expect_identical_html(
    md = c(
      "foo  bar \t baz\n"
    ),
    flags = c(
      "MD_FLAG_COLLAPSEWHITESPACE",
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo bar baz</p>"
    )
  )
})

# regressions -------------------------------

test_that("regressions - Ex 1 (L13-15) - [Issue 2](https://github.com/mity/md4c/issues/2)", {
  expect_identical_html(
    md = c(
      "<gi att1=tok1 att2=tok2>\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<gi att1=tok1 att2=tok2>"
    )
  )
})

test_that("regressions - Ex 2 (L21-23) - [Issue 2](https://github.com/mity/md4c/issues/2)", {
  expect_identical_html(
    md = c(
      "foo <gi att1=tok1 att2=tok2> bar\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo <gi att1=tok1 att2=tok2> bar</p>"
    )
  )
})

test_that("regressions - Ex 3 (L29-33) - [Issue 2](https://github.com/mity/md4c/issues/2)", {
  expect_identical_html(
    md = c(
      "foo <gi att1=tok1",
      "att2=tok2> bar"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo <gi att1=tok1",
      "att2=tok2> bar</p>"
    )
  )
})

test_that("regressions - Ex 4 (L40-42) - [Issue 4](https://github.com/mity/md4c/issues/4)", {
  expect_identical_html(
    md = c(
      "![alt text with *entity* &copy;](img.png 'title')\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><img src=\"img.png\" alt=\"alt text with entity ¬©\" title=\"title\"></p>"
    )
  )
})

test_that("regressions - Ex 5 (L49-57) - [Issue 9](https://github.com/mity/md4c/issues/9)", {
  testthat::skip("regressions #5 - New line vs space issue")
  expect_identical_html(
    md = c(
      "> [foo", "> bar]: /url",
      ">", "> [foo bar]"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "<p><a href=\"/url\">foo",
      "bar</a></p>",
      "</blockquote>"
    )
  )
})

test_that("regressions - Ex 6 (L64-75) - [Issue 10](https://github.com/mity/md4c/issues/10)", {
  expect_identical_html(
    md = c(
      "[x]:", "x", "- <?", "",
      "  x"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>", "<li><?",
      "", "x", "</li>", "</ul>"
    )
  )
})

test_that("regressions - Ex 7 (L82-84) - [Issue 11](https://github.com/mity/md4c/issues/11)", {
  expect_identical_html(
    md = c(
      "x [link](/url \"foo &ndash; bar\") x\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>x <a href=\"/url\" title=\"foo ‚Äì bar\">link</a> x</p>"
    )
  )
})

test_that("regressions - Ex 8 (L91-93) - [Issue 14](https://github.com/mity/md4c/issues/14)", {
  expect_identical_html(
    md = c(
      "a***b* c*\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>a*<em><em>b</em> c</em></p>"
    )
  )
})

test_that("regressions - Ex 9 (L100-102) - [Issue 15](https://github.com/mity/md4c/issues/15)", {
  expect_identical_html(
    md = c(
      "***b* c*\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>*<em><em>b</em> c</em></p>"
    )
  )
})

test_that("regressions - Ex 10 (L109-111) - [Issue 21](https://github.com/mity/md4c/issues/21)", {
  expect_identical_html(
    md = c(
      "a*b**c*\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>a<em>b**c</em></p>"
    )
  )
})

test_that("regressions - Ex 11 (L118-120) - [Issue 33](https://github.com/mity/md4c/issues/33)", {
  expect_identical_html(
    md = c(
      "```&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code class=\"language-&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;\"></code></pre>"
    )
  )
})

test_that("regressions - Ex 12 (L127-129) - [Issue 36](https://github.com/mity/md4c/issues/36)", {
  expect_identical_html(
    md = c(
      "__x_ _x___\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em><em>x</em> <em>x</em></em>_</p>"
    )
  )
})

test_that("regressions - Ex 13 (L136-137) - [Issue 39](https://github.com/mity/md4c/issues/39)", {
  expect_identical_html(
    md = c(
      "[\\\\]: x\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c()
  )
})

test_that("regressions - Ex 14 (L144-148) - [Issue 40](https://github.com/mity/md4c/issues/40)", {
  expect_identical_html(
    md = c(
      "[x](url", "'title'", ")x"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"url\" title=\"title\">x</a>x</p>"
    )
  )
})

test_that("regressions - Ex 15 (L154-162) - [Issue 41](https://github.com/mity/md4c/issues/41)", {
  expect_identical_html(
    md = c(
      "* x|x", "---|---"
    ), flags = c(
      "MD_FLAG_TABLES",
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>",
      "<li>x|x", "---|---</li>",
      "</ul>"
    )
  )
})

test_that("regressions - Ex 16 (L168-185) - [Issue 41](https://github.com/mity/md4c/issues/41)", {
  expect_identical_html(
    md = c(
      "* x|x", "  ---|---", "x|x"
    ),
    flags = c(
      "MD_FLAG_TABLES",
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>",
      "<li><table>", "<thead>",
      "<tr>", "<th>x</th>",
      "<th>x</th>", "</tr>",
      "</thead>", "</table>",
      "</li>", "</ul>",
      "<p>x|x</p>"
    )
  )
})

test_that("regressions - Ex 17 (L194-216) - [Issue 42](https://github.com/mity/md4c/issues/42)", {
  expect_identical_html(
    md = c(
      "] http://x.x *x*", "",
      "|x|x|", "|---|---|", "|x|"
    ),
    flags = c(
      "MD_FLAG_TABLES",
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>] http://x.x <em>x</em></p>",
      "<table>", "<thead>",
      "<tr>", "<th>x</th>",
      "<th>x</th>", "</tr>",
      "</thead>", "<tbody>",
      "<tr>", "<td>x</td>",
      "<td></td>", "</tr>",
      "</tbody>", "</table>"
    )
  )
})

test_that("regressions - Ex 18 (L223-227) - [Issue 53](https://github.com/mity/md4c/issues/53)", {
  expect_identical_html(
    md = c(
      "This is [link](http://github.com/).\n"
    ),
    flags = c(
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>This is <a href=\"http://github.com/\">link</a>.</p>"
    )
  )
})

test_that("regressions - Ex 19 (L231-235) - [Issue 53](https://github.com/mity/md4c/issues/53)", {
  expect_identical_html(
    md = c(
      "This is [link](http://github.com/)X\n"
    ),
    flags = c(
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>This is <a href=\"http://github.com/\">link</a>X</p>"
    )
  )
})

test_that("regressions - Ex 20 (L242-244) - [Issue 65](https://github.com/mity/md4c/issues/65)", {
  expect_identical_html(
    md = c(
      "`\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<p>`</p>")
  )
})

test_that("regressions - Ex 21 (L250-254) - [Issue 69](https://github.com/mity/md4c/issues/69)", {
  expect_identical_html(
    md = c(
      "~`foo`~\n"
    ), flags = c(
      "MD_FLAG_STRIKETHROUGH",
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><del><code>foo</code></del></p>"
    )
  )
})

test_that("regressions - Ex 22 (L258-262) - [Issue 69](https://github.com/mity/md4c/issues/69)", {
  expect_identical_html(
    md = c(
      "~*foo*~\n"
    ), flags = c(
      "MD_FLAG_STRIKETHROUGH",
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><del><em>foo</em></del></p>"
    )
  )
})

test_that("regressions - Ex 23 (L266-270) - [Issue 69](https://github.com/mity/md4c/issues/69)", {
  expect_identical_html(
    md = c(
      "*~foo~*\n"
    ), flags = c(
      "MD_FLAG_STRIKETHROUGH",
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em><del>foo</del></em></p>"
    )
  )
})

test_that("regressions - Ex 24 (L277-286) - [Issue 74](https://github.com/mity/md4c/issues/74)", {
  expect_identical_html(
    md = c(
      "[f]:", "-", "    xx", "-"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>xx",
      "</code></pre>", "<ul>",
      "<li></li>", "</ul>"
    )
  )
})

test_that("regressions - Ex 25 (L293-297) - [Issue 76](https://github.com/mity/md4c/issues/76)", {
  expect_identical_html(
    md = c(
      "*(http://example.com)*\n"
    ),
    flags = c(
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>(<a href=\"http://example.com\">http://example.com</a>)</em></p>"
    )
  )
})

test_that("regressions - Ex 26 (L304-307) - [Issue 78](https://github.com/mity/md4c/issues/78)", {
  expect_identical_html(
    md = c(
      "[SS ·∫û]: /url", "[·∫û SS]"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/url\">·∫û SS</a></p>"
    )
  )
})

test_that("regressions - Ex 27 (L314-320) - [Issue 83](https://github.com/mity/md4c/issues/83)", {
  expect_identical_html(
    md = c(
      "foo", ">"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo</p>",
      "<blockquote>",
      "</blockquote>", ""
    )
  )
})

test_that("regressions - Ex 28 (L327-329) - [Issue 95](https://github.com/mity/md4c/issues/95)", {
  expect_identical_html(
    md = c(
      ". foo\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<p>. foo</p>")
  )
})

test_that("regressions - Ex 29 (L336-339) - [Issue 96](https://github.com/mity/md4c/issues/96)", {
  expect_identical_html(
    md = c(
      "[ab]: /foo",
      "[a] [ab] [abc]"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[a] <a href=\"/foo\">ab</a> [abc]</p>"
    )
  )
})

test_that("regressions - Ex 30 (L343-346) - [Issue 96](https://github.com/mity/md4c/issues/96)", {
  expect_identical_html(
    md = c(
      "[a b]: /foo", "[a   b]"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/foo\">a   b</a></p>"
    )
  )
})

test_that("regressions - Ex 31 (L353-356) - [Issue 97](https://github.com/mity/md4c/issues/97)", {
  expect_identical_html(
    md = c(
      "*a **b c* d**\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>a <em><em>b c</em> d</em></em></p>",
      ""
    )
  )
})

test_that("regressions - Ex 32 (L363-365) - [Issue 100](https://github.com/mity/md4c/issues/100)", {
  expect_identical_html(
    md = c(
      "<foo@123456789012345678901234567890123456789012345678901234567890123.123456789012345678901234567890123456789012345678901234567890123>\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"mailto:foo@123456789012345678901234567890123456789012345678901234567890123.123456789012345678901234567890123456789012345678901234567890123\">foo@123456789012345678901234567890123456789012345678901234567890123.123456789012345678901234567890123456789012345678901234567890123</a></p>"
    )
  )
})

test_that("regressions - Ex 33 (L369-371) - [Issue 100](https://github.com/mity/md4c/issues/100)", {
  expect_identical_html(
    md = c(
      "<foo@123456789012345678901234567890123456789012345678901234567890123x.123456789012345678901234567890123456789012345678901234567890123>\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>&lt;foo@123456789012345678901234567890123456789012345678901234567890123x.123456789012345678901234567890123456789012345678901234567890123&gt;</p>"
    )
  )
})

test_that("regressions - Ex 34 (L379-398) - [Issue 104](https://github.com/mity/md4c/issues/104)", {
  expect_identical_html(
    md = c(
      "A | B", "--- | ---",
      "[x](url)"
    ), flags = c(
      "MD_FLAG_TABLES",
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<table>",
      "<thead>", "<tr>",
      "<th>A</th>", "<th>B</th>",
      "</tr>", "</thead>",
      "<tbody>", "<tr>",
      "<td><a href=\"url\">x</a></td>",
      "<td></td>", "</tr>",
      "</tbody>", "</table>"
    )
  )
})

test_that("regressions - Ex 35 (L405-408) - [Issue 107](https://github.com/mity/md4c/issues/107)", {
  expect_identical_html(
    md = c(
      "***foo *bar baz***\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>*<strong>foo <em>bar baz</em></strong></p>",
      ""
    )
  )
})

test_that("regressions - Ex 36 (L415-426) - [Issue 124](https://github.com/mity/md4c/issues/124)", {
  expect_identical_html(
    md = c(
      "~~~", "                x",
      "~~~", "", "~~~",
      "                 x", "~~~"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>                x",
      "</code></pre>",
      "<pre><code>                 x",
      "</code></pre>"
    )
  )
})

test_that("regressions - Ex 37 (L433-438) - [Issue 131](https://github.com/mity/md4c/issues/131)", {
  expect_identical_html(
    md = c(
      "[![alt][img]][link]", "",
      "[img]: img_url",
      "[link]: link_url"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"link_url\"><img src=\"img_url\" alt=\"alt\"></a></p>"
    )
  )
})

test_that("regressions - Ex 38 (L445-457) - [Issue 138](https://github.com/mity/md4c/issues/138)", {
  expect_identical_html(
    md = c(
      "| abc | def |",
      "| --- | --- |"
    ), flags = c(
      "MD_FLAG_TABLES",
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<table>",
      "<thead>", "<tr>",
      "<th>abc</th>",
      "<th>def</th>", "</tr>",
      "</thead>", "</table>"
    )
  )
})

test_that("regressions - Ex 39 (L464-467) - [Issue 142](https://github.com/mity/md4c/issues/142)", {
  expect_identical_html(
    md = c(
      "[fooÔ¨ó]: /url", "[fooÔ¨ï]"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<p>[fooÔ¨ï]</p>")
  )
})

test_that("regressions - Ex 40 (L474-485) - [Issue 149](https://github.com/mity/md4c/issues/149)", {
  expect_identical_html(
    md = c(
      "- <script>", "- foo",
      "bar", "</script>"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>",
      "<li><script>", "</li>",
      "<li>foo", "bar",
      "</script></li>", "</ul>"
    )
  )
})

test_that("regressions - Ex 41 (L492-496) - [Issue 152](https://github.com/mity/md4c/issues/152)", {
  expect_identical_html(
    md = c(
      "[http://example.com](http://example.com)\n"
    ),
    flags = c(
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"http://example.com\">http://example.com</a></p>"
    )
  )
})

test_that("regressions - Ex 42 (L503-511) - [Issue 190](https://github.com/mity/md4c/issues/190)", {
  expect_identical_html(
    md = c(
      "-", "", "    foo"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>",
      "<li></li>", "</ul>",
      "<pre><code>foo",
      "</code></pre>"
    )
  )
})

test_that("regressions - Ex 43 (L518-527) - [Issue 200](https://github.com/mity/md4c/issues/200)", {
  expect_identical_html(
    md = c(
      "<!-- foo -->", "    ```",
      "    bar", "    ```"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<!-- foo -->",
      "<pre><code>```", "bar",
      "```", "</code></pre>"
    )
  )
})

test_that("regressions - Ex 44 (L534-540) - [Issue 201](https://github.com/mity/md4c/issues/201)", {
  expect_identical_html(
    md = c(
      "foo", "    ```", "    bar",
      "    ```"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo",
      "<code>bar</code></p>"
    )
  )
})

test_that("regressions - Ex 45 (L547-564) - [Issue 207](https://github.com/mity/md4c/issues/207)", {
  expect_identical_html(
    md = c(
      "<textarea>", "", "*foo*",
      "", "_bar_", "",
      "</textarea>", "", "baz"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<textarea>", "",
      "*foo*", "", "_bar_", "",
      "</textarea>", "<p>baz</p>"
    )
  )
})

test_that("regressions - Ex 46 (L571-573) - [Issue 210](https://github.com/mity/md4c/issues/210)", {
  expect_identical_html(
    md = c(
      "![outer ![inner](img_inner \"inner title\")](img_outer \"outer title\")\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><img src=\"img_outer\" alt=\"outer inner\" title=\"outer title\"></p>"
    )
  )
})

test_that("regressions - Ex 47 (L580-597) - [Issue 212](https://github.com/mity/md4c/issues/212)", {
  expect_identical_html(
    md = c(
      "x", "|-", "|[*x*]()"
    ),
    flags = c(
      "MD_FLAG_TABLES",
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<table>",
      "<thead>", "<tr>",
      "<th>x</th>", "</tr>",
      "</thead>", "<tbody>",
      "<tr>",
      "<td><a href=\"\"><em>x</em></a></td>",
      "</tr>", "</tbody>",
      "</table>"
    )
  )
})

test_that("regressions - Ex 48 (L604-624) - [Issue 213](https://github.com/mity/md4c/issues/215)", {
  expect_identical_html(
    md = c(
      "x", "|-", "[|", "",
      "[[ ]][[![|]()]]"
    ), flags = c(
      "MD_FLAG_TABLES",
      "MD_FLAG_WIKILINKS",
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<table>",
      "<thead>", "<tr>",
      "<th>x</th>", "</tr>",
      "</thead>", "<tbody>",
      "<tr>", "<td>[</td>",
      "</tr>", "</tbody>",
      "</table>",
      "<p><x-wikilink data-target=\" \"> </x-wikilink><x-wikilink data-target=\"![|]()\"><img src=\"\" alt=\"|\"></x-wikilink></p>"
    )
  )
})

test_that("regressions - Ex 49 (L631-634) - [Issue 215](https://github.com/mity/md4c/issues/215)", {
  expect_identical_html(
    md = c(
      "title", "--\t"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<h2>title</h2>")
  )
})

test_that("regressions - Ex 50 (L641-643) - [Issue 216](https://github.com/mity/md4c/issues/216)", {
  expect_identical_html(
    md = c(
      "x <!A>\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<p>x <!A></p>")
  )
})

test_that("regressions - Ex 51 (L650-673) - [Issue 217](https://github.com/mity/md4c/issues/217)", {
  expect_identical_html(
    md = c(
      "__!_!__", "", "__!x!__",
      "", "**!*!**", "", "---",
      "", "_*__*_*", "",
      "_*xx*_*", "", "_*__-_-",
      "", "_*xx-_-"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><strong>!_!</strong></p>",
      "<p><strong>!x!</strong></p>",
      "<p><strong>!*!</strong></p>",
      "<hr />",
      "<p><em><em>__</em></em>*</p>",
      "<p><em><em>xx</em></em>*</p>",
      "<p><em>*__-</em>-</p>",
      "<p><em>*xx-</em>-</p>"
    )
  )
})

test_that("regressions - Ex 52 (L680-684) - [Issue 222](https://github.com/mity/md4c/issues/222)", {
  expect_identical_html(
    md = c(
      "~foo ~bar baz~\n"
    ), flags = c(
      "MD_FLAG_STRIKETHROUGH",
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>~foo <del>bar baz</del></p>"
    )
  )
})

test_that("regressions - Ex 53 (L694-697) - [Issue 223](https://github.com/mity/md4c/issues/223)", {
  expect_identical_html(
    md = c(
      "`", "foo`"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><code> foo</code></p>"
    )
  )
})

test_that("regressions - Ex 54 (L701-704) - [Issue 223](https://github.com/mity/md4c/issues/223)", {
  expect_identical_html(
    md = c(
      "`foo", "`"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><code>foo </code></p>"
    )
  )
})

test_that("regressions - Ex 55 (L710-714) - [Issue 223](https://github.com/mity/md4c/issues/223)", {
  expect_identical_html(
    md = c(
      "`", "foo", "`"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><code>foo</code></p>"
    )
  )
})

test_that("regressions - Ex 56 (L721-727) - [Issue 226](https://github.com/mity/md4c/issues/226)", {
  expect_identical_html(
    md = c(
      "https://example.com/",
      "https://example.com/dir/"
    ),
    flags = c(
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"https://example.com/\">https://example.com/</a>",
      "<a href=\"https://example.com/dir/\">https://example.com/dir/</a></p>"
    )
  )
})

# spec-hard-soft-breaks -------------------------------

test_that("spec-hard-soft-breaks - Ex 1 (L8-14) - Hard Soft Breaks", {
  expect_identical_html(
    md = c(
      "foo", "baz"
    ), flags = c(
      "MD_FLAG_HARD_SOFT_BREAKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_HARD_SOFT_BREAKS"
    ),
    expected = c(
      "<p>foo<br>",
      "baz</p>"
    )
  )
})

test_that("spec-hard-soft-breaks - Ex 2 (L18-27) - Hard Soft Breaks", {
  expect_identical_html(
    md = c(
      "A quote from the CommonMark Spec below:",
      "",
      "A renderer may also provide an option to ",
      "render soft line breaks as hard line breaks."
    ),
    flags = c(
      "MD_FLAG_HARD_SOFT_BREAKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_HARD_SOFT_BREAKS"
    ),
    expected = c(
      "<p>A quote from the CommonMark Spec below:</p>",
      "<p>A renderer may also provide an option to<br>",
      "render soft line breaks as hard line breaks.</p>"
    )
  )
})

# spec-latex-math -------------------------------

test_that("spec-latex-math - Ex 1 (L11-15) - LaTeX Math", {
  expect_identical_html(
    md = c(
      "$a+b=c$ Hello, world!\n"
    ),
    flags = c(
      "MD_FLAG_LATEXMATHSPANS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_LATEXMATHSPANS"
    ),
    expected = c(
      "<p><x-equation>a+b=c</x-equation> Hello, world!</p>"
    )
  )
})

test_that("spec-latex-math - Ex 2 (L21-25) - LaTeX Math", {
  expect_identical_html(
    md = c(
      "$$foo $bar$ baz$$\n"
    ),
    flags = c(
      "MD_FLAG_LATEXMATHSPANS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_LATEXMATHSPANS"
    ),
    expected = c(
      "<p>$$foo <x-equation>bar</x-equation> baz$$</p>"
    )
  )
})

test_that("spec-latex-math - Ex 3 (L31-35) - LaTeX Math", {
  expect_identical_html(
    md = c(
      "x$a+b=c$\n"
    ), flags = c(
      "MD_FLAG_LATEXMATHSPANS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_LATEXMATHSPANS"
    ),
    expected = c(
      "<p>x$a+b=c$</p>"
    )
  )
})

test_that("spec-latex-math - Ex 4 (L41-45) - LaTeX Math", {
  expect_identical_html(
    md = c(
      "$a+b=c$x\n"
    ), flags = c(
      "MD_FLAG_LATEXMATHSPANS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_LATEXMATHSPANS"
    ),
    expected = c(
      "<p>$a+b=c$x</p>"
    )
  )
})

test_that("spec-latex-math - Ex 5 (L51-55) - LaTeX Math", {
  expect_identical_html(
    md = c(
      "This is a display equation: $$\\int_a^b x dx$$.\n"
    ),
    flags = c(
      "MD_FLAG_LATEXMATHSPANS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_LATEXMATHSPANS"
    ),
    expected = c(
      "<p>This is a display equation: <x-equation type=\"display\">\\int_a^b x dx</x-equation>.</p>"
    )
  )
})

test_that("spec-latex-math - Ex 6 (L61-68) - LaTeX Math", {
  expect_identical_html(
    md = c(
      "$$", "\\int_a^b",
      "f(x) dx", "$$"
    ), flags = c(
      "MD_FLAG_LATEXMATHSPANS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_LATEXMATHSPANS"
    ),
    expected = c(
      "<p><x-equation type=\"display\"> \\int_a^b f(x) dx </x-equation></p>"
    )
  )
})

# spec-permissive-autolinks -------------------------------

test_that("spec-permissive-autolinks - Ex 1 (L8-12) - Permissive Autolinks", {
  expect_identical_html(
    md = c(
      "<mailto:john.doe@gmail.com>",
      "<https://example.com>"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_FLAG_PERMISSIVEEMAILAUTOLINKS",
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_FLAG_PERMISSIVEWWWAUTOLINKS",
      "MD_FLAG_PERMISSIVEEMAILAUTOLINKS"
    ),
    expected = c(
      "<p><a href=\"mailto:john.doe@gmail.com\">mailto:john.doe@gmail.com</a>",
      "<a href=\"https://example.com\">https://example.com</a></p>"
    )
  )
})

test_that("spec-permissive-autolinks - Ex 2 (L22-32) - Permissive Autolinks", {
  expect_identical_html(
    md = c(
      "john.doe@gmail.com",
      "https://www.example.com",
      "www.example.com"
    ), flags = c(
      "MD_FLAG_PERMISSIVEEMAILAUTOLINKS",
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_FLAG_PERMISSIVEWWWAUTOLINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_FLAG_PERMISSIVEEMAILAUTOLINKS",
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_FLAG_PERMISSIVEWWWAUTOLINKS",
      "MD_FLAG_PERMISSIVEEMAILAUTOLINKS"
    ),
    expected = c(
      "<p><a href=\"mailto:john.doe@gmail.com\">john.doe@gmail.com</a>",
      "<a href=\"https://www.example.com\">https://www.example.com</a>",
      "<a href=\"http://www.example.com\">www.example.com</a></p>"
    )
  )
})

test_that("spec-permissive-autolinks - Ex 3 (L47-57) - Permissive Autolinks", {
  expect_identical_html(
    md = c(
      ":john.doe@gmail.com",
      ":https://www.example.com",
      ":www.example.com"
    ), flags = c(
      "MD_FLAG_PERMISSIVEEMAILAUTOLINKS",
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_FLAG_PERMISSIVEWWWAUTOLINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_FLAG_PERMISSIVEEMAILAUTOLINKS",
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_FLAG_PERMISSIVEWWWAUTOLINKS",
      "MD_FLAG_PERMISSIVEEMAILAUTOLINKS"
    ),
    expected = c(
      "<p>:john.doe@gmail.com",
      ":https://www.example.com",
      ":www.example.com</p>"
    )
  )
})

test_that("spec-permissive-autolinks - Ex 4 (L64-74) - Permissive Autolinks", {
  expect_identical_html(
    md = c(
      "[john.doe@gmail.com",
      "(https://www.example.com",
      "{www.example.com"
    ), flags = c(
      "MD_FLAG_PERMISSIVEEMAILAUTOLINKS",
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_FLAG_PERMISSIVEWWWAUTOLINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_FLAG_PERMISSIVEEMAILAUTOLINKS",
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_FLAG_PERMISSIVEWWWAUTOLINKS",
      "MD_FLAG_PERMISSIVEEMAILAUTOLINKS"
    ),
    expected = c(
      "<p>[<a href=\"mailto:john.doe@gmail.com\">john.doe@gmail.com</a>",
      "(<a href=\"https://www.example.com\">https://www.example.com</a>",
      "{<a href=\"http://www.example.com\">www.example.com</a></p>"
    )
  )
})

test_that("spec-permissive-autolinks - Ex 5 (L80-90) - Permissive Autolinks", {
  expect_identical_html(
    md = c(
      "john.doe@gmail.com]",
      "https://www.example.com)",
      "www.example.com}"
    ), flags = c(
      "MD_FLAG_PERMISSIVEEMAILAUTOLINKS",
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_FLAG_PERMISSIVEWWWAUTOLINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_FLAG_PERMISSIVEEMAILAUTOLINKS",
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_FLAG_PERMISSIVEWWWAUTOLINKS",
      "MD_FLAG_PERMISSIVEEMAILAUTOLINKS"
    ),
    expected = c(
      "<p><a href=\"mailto:john.doe@gmail.com\">john.doe@gmail.com</a>]",
      "<a href=\"https://www.example.com\">https://www.example.com</a>)",
      "<a href=\"http://www.example.com\">www.example.com</a>}</p>"
    )
  )
})

test_that("spec-permissive-autolinks - Ex 6 (L98-102) - Permissive Autolinks", {
  expect_identical_html(
    md = c(
      "Have you ever visited http://zombo.com?\n"
    ),
    flags = c(
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_FLAG_PERMISSIVEEMAILAUTOLINKS",
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_FLAG_PERMISSIVEWWWAUTOLINKS",
      "MD_FLAG_PERMISSIVEEMAILAUTOLINKS"
    ),
    expected = c(
      "<p>Have you ever visited <a href=\"http://zombo.com\">http://zombo.com</a>?</p>"
    )
  )
})

test_that("spec-permissive-autolinks - Ex 7 (L109-113) - Permissive Autolinks", {
  expect_identical_html(
    md = c(
      "You may contact me at **john.doe@example.com**.\n"
    ),
    flags = c(
      "MD_FLAG_PERMISSIVEEMAILAUTOLINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_FLAG_PERMISSIVEEMAILAUTOLINKS",
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_FLAG_PERMISSIVEWWWAUTOLINKS",
      "MD_FLAG_PERMISSIVEEMAILAUTOLINKS"
    ),
    expected = c(
      "<p>You may contact me at <strong><a href=\"mailto:john.doe@example.com\">john.doe@example.com</a></strong>.</p>"
    )
  )
})

test_that("spec-permissive-autolinks - Ex 8 (L120-127) - Permissive Autolinks", {
  expect_identical_html(
    md = c(
      "*john.doe@example.com", "",
      "john.doe@example.com*"
    ),
    flags = c(
      "MD_FLAG_PERMISSIVEEMAILAUTOLINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_FLAG_PERMISSIVEEMAILAUTOLINKS",
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_FLAG_PERMISSIVEWWWAUTOLINKS",
      "MD_FLAG_PERMISSIVEEMAILAUTOLINKS"
    ),
    expected = c(
      "<p>*john.doe@example.com</p>",
      "<p>john.doe@example.com*</p>"
    )
  )
})

test_that("spec-permissive-autolinks - Ex 9 (L140-151) - Permissive URL Autolinks", {
  expect_identical_html(
    md = c(
      "https://example.com",
      "http://example.com",
      "ftp://example.com", "",
      "ssh://example.com"
    ),
    flags = c(
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_FLAG_PERMISSIVEEMAILAUTOLINKS",
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_FLAG_PERMISSIVEWWWAUTOLINKS",
      "MD_FLAG_PERMISSIVEEMAILAUTOLINKS"
    ),
    expected = c(
      "<p><a href=\"https://example.com\">https://example.com</a>",
      "<a href=\"http://example.com\">http://example.com</a>",
      "<a href=\"ftp://example.com\">ftp://example.com</a></p>",
      "<p>ssh://example.com</p>"
    )
  )
})

test_that("spec-permissive-autolinks - Ex 10 (L166-170) - Permissive URL Autolinks", {
  expect_identical_html(
    md = c(
      "https://example.com/images/branding/logo_272x92.png\n"
    ),
    flags = c(
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_FLAG_PERMISSIVEEMAILAUTOLINKS",
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_FLAG_PERMISSIVEWWWAUTOLINKS",
      "MD_FLAG_PERMISSIVEEMAILAUTOLINKS"
    ),
    expected = c(
      "<p><a href=\"https://example.com/images/branding/logo_272x92.png\">https://example.com/images/branding/logo_272x92.png</a></p>"
    )
  )
})

test_that("spec-permissive-autolinks - Ex 11 (L179-183) - Permissive URL Autolinks", {
  expect_identical_html(
    md = c(
      "https://www.google.com/search?q=md4c+markdown\n"
    ),
    flags = c(
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_FLAG_PERMISSIVEEMAILAUTOLINKS",
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_FLAG_PERMISSIVEWWWAUTOLINKS",
      "MD_FLAG_PERMISSIVEEMAILAUTOLINKS"
    ),
    expected = c(
      "<p><a href=\"https://www.google.com/search?q=md4c+markdown\">https://www.google.com/search?q=md4c+markdown</a></p>"
    )
  )
})

test_that("spec-permissive-autolinks - Ex 12 (L189-193) - Permissive URL Autolinks", {
  expect_identical_html(
    md = c(
      "https://example.com#fragment\n"
    ),
    flags = c(
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_FLAG_PERMISSIVEEMAILAUTOLINKS",
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_FLAG_PERMISSIVEWWWAUTOLINKS",
      "MD_FLAG_PERMISSIVEEMAILAUTOLINKS"
    ),
    expected = c(
      "<p><a href=\"https://example.com#fragment\">https://example.com#fragment</a></p>"
    )
  )
})

test_that("spec-permissive-autolinks - Ex 13 (L199-209) - Permissive URL Autolinks", {
  expect_identical_html(
    md = c(
      "http://commonmark.org", "",
      "(Visit https://encrypted.google.com/search?q=Markup+(business))",
      "",
      "Anonymous FTP is available at ftp://foo.bar.baz."
    ),
    flags = c(
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_FLAG_PERMISSIVEEMAILAUTOLINKS",
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_FLAG_PERMISSIVEWWWAUTOLINKS",
      "MD_FLAG_PERMISSIVEEMAILAUTOLINKS"
    ),
    expected = c(
      "<p><a href=\"http://commonmark.org\">http://commonmark.org</a></p>",
      "<p>(Visit <a href=\"https://encrypted.google.com/search?q=Markup+(business)\">https://encrypted.google.com/search?q=Markup+(business)</a>)</p>",
      "<p>Anonymous FTP is available at <a href=\"ftp://foo.bar.baz\">ftp://foo.bar.baz</a>.</p>"
    )
  )
})

test_that("spec-permissive-autolinks - Ex 14 (L220-224) - Permissive WWW Autolinks", {
  expect_identical_html(
    md = c(
      "www.google.com/search?q=Markdown\n"
    ),
    flags = c(
      "MD_FLAG_PERMISSIVEWWWAUTOLINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_FLAG_PERMISSIVEEMAILAUTOLINKS",
      "MD_FLAG_PERMISSIVEURLAUTOLINKS",
      "MD_FLAG_PERMISSIVEWWWAUTOLINKS",
      "MD_FLAG_PERMISSIVEEMAILAUTOLINKS"
    ),
    expected = c(
      "<p><a href=\"http://www.google.com/search?q=Markdown\">www.google.com/search?q=Markdown</a></p>"
    )
  )
})

# spec-strikethrough -------------------------------

test_that("spec-strikethrough - Ex 1 (L10-14) - Strike-Through", {
  expect_identical_html(
    md = c(
      "~Hi~ Hello, world!\n"
    ),
    flags = c(
      "MD_FLAG_STRIKETHROUGH",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_STRIKETHROUGH"
    ),
    expected = c(
      "<p><del>Hi</del> Hello, world!</p>"
    )
  )
})

test_that("spec-strikethrough - Ex 2 (L21-25) - Strike-Through", {
  expect_identical_html(
    md = c(
      "This ~text~~ is curious.\n"
    ),
    flags = c(
      "MD_FLAG_STRIKETHROUGH",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_STRIKETHROUGH"
    ),
    expected = c(
      "<p>This ~text~~ is curious.</p>"
    )
  )
})

test_that("spec-strikethrough - Ex 3 (L31-35) - Strike-Through", {
  expect_identical_html(
    md = c(
      "foo ~~~bar~~~\n"
    ), flags = c(
      "MD_FLAG_STRIKETHROUGH",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_STRIKETHROUGH"
    ),
    expected = c(
      "<p>foo ~~~bar~~~</p>"
    )
  )
})

test_that("spec-strikethrough - Ex 4 (L43-47) - Strike-Through", {
  expect_identical_html(
    md = c(
      "~foo ~bar\n"
    ), flags = c(
      "MD_FLAG_STRIKETHROUGH",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_STRIKETHROUGH"
    ),
    expected = c(
      "<p>~foo ~bar</p>"
    )
  )
})

test_that("spec-strikethrough - Ex 5 (L55-62) - Strike-Through", {
  expect_identical_html(
    md = c(
      "This ~~has a", "",
      "new paragraph~~."
    ), flags = c(
      "MD_FLAG_STRIKETHROUGH",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_STRIKETHROUGH"
    ),
    expected = c(
      "<p>This ~~has a</p>",
      "<p>new paragraph~~.</p>"
    )
  )
})

# spec-tables -------------------------------

test_that("spec-tables - Ex 1 (L11-28) - Tables", {
  expect_identical_html(
    md = c(
      "| Column 1 | Column 2 |",
      "|----------|----------|",
      "| foo      | bar      |",
      "| baz      | qux      |",
      "| quux     | quuz     |"
    ),
    flags = c(
      "MD_FLAG_TABLES",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_TABLES"
    ),
    expected = c(
      "<table>",
      "<thead>",
      "<tr><th>Column 1</th><th>Column 2</th></tr>",
      "</thead>", "<tbody>",
      "<tr><td>foo</td><td>bar</td></tr>",
      "<tr><td>baz</td><td>qux</td></tr>",
      "<tr><td>quux</td><td>quuz</td></tr>",
      "</tbody>", "</table>"
    )
  )
})

test_that("spec-tables - Ex 2 (L34-51) - Tables", {
  expect_identical_html(
    md = c(
      "Column 1 | Column 2 |",
      "---------|--------- |",
      "foo      | bar      |",
      "baz      | qux      |",
      "quux     | quuz     |"
    ),
    flags = c(
      "MD_FLAG_TABLES",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_TABLES"
    ),
    expected = c(
      "<table>",
      "<thead>",
      "<tr><th>Column 1</th><th>Column 2</th></tr>",
      "</thead>", "<tbody>",
      "<tr><td>foo</td><td>bar</td></tr>",
      "<tr><td>baz</td><td>qux</td></tr>",
      "<tr><td>quux</td><td>quuz</td></tr>",
      "</tbody>", "</table>"
    )
  )
})

test_that("spec-tables - Ex 3 (L55-72) - Tables", {
  expect_identical_html(
    md = c(
      "| Column 1 | Column 2",
      "|----------|---------",
      "| foo      | bar",
      "| baz      | qux",
      "| quux     | quuz"
    ),
    flags = c(
      "MD_FLAG_TABLES",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_TABLES"
    ),
    expected = c(
      "<table>",
      "<thead>",
      "<tr><th>Column 1</th><th>Column 2</th></tr>",
      "</thead>", "<tbody>",
      "<tr><td>foo</td><td>bar</td></tr>",
      "<tr><td>baz</td><td>qux</td></tr>",
      "<tr><td>quux</td><td>quuz</td></tr>",
      "</tbody>", "</table>"
    )
  )
})

test_that("spec-tables - Ex 4 (L76-93) - Tables", {
  expect_identical_html(
    md = c(
      "Column 1 | Column 2",
      "---------|---------",
      "foo      | bar",
      "baz      | qux",
      "quux     | quuz"
    ), flags = c(
      "MD_FLAG_TABLES",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_TABLES"
    ),
    expected = c(
      "<table>",
      "<thead>",
      "<tr><th>Column 1</th><th>Column 2</th></tr>",
      "</thead>", "<tbody>",
      "<tr><td>foo</td><td>bar</td></tr>",
      "<tr><td>baz</td><td>qux</td></tr>",
      "<tr><td>quux</td><td>quuz</td></tr>",
      "</tbody>", "</table>"
    )
  )
})

test_that("spec-tables - Ex 5 (L101-112) - Tables", {
  expect_identical_html(
    md = c(
      "Column 1", "--------",
      "foo", "baz", "quux"
    ),
    flags = c(
      "MD_FLAG_TABLES",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_TABLES"
    ),
    expected = c(
      "<h2>Column 1</h2>",
      "<p>foo", "baz", "quux</p>"
    )
  )
})

test_that("spec-tables - Ex 6 (L119-136) - Tables", {
  expect_identical_html(
    md = c(
      "Column 1 |Column 2",
      "---|---", "foo | bar",
      "baz| qux", "quux|quuz"
    ),
    flags = c(
      "MD_FLAG_TABLES",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_TABLES"
    ),
    expected = c(
      "<table>",
      "<thead>",
      "<tr><th>Column 1</th><th>Column 2</th></tr>",
      "</thead>", "<tbody>",
      "<tr><td>foo</td><td>bar</td></tr>",
      "<tr><td>baz</td><td>qux</td></tr>",
      "<tr><td>quux</td><td>quuz</td></tr>",
      "</tbody>", "</table>"
    )
  )
})

test_that("spec-tables - Ex 7 (L142-154) - Tables", {
  expect_identical_html(
    md = c(
      "Lorem ipsum dolor sit amet.",
      "| Column 1 | Column 2",
      "| ---------|---------",
      "| foo      | bar",
      "| baz      | qux",
      "| quux     | quuz"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_TABLES"
    ),
    expected = c(
      "<p>Lorem ipsum dolor sit amet.",
      "| Column 1 | Column 2",
      "| ---------|---------",
      "| foo      | bar",
      "| baz      | qux",
      "| quux     | quuz</p>"
    )
  )
})

test_that("spec-tables - Ex 8 (L160-179) - Tables", {
  expect_identical_html(
    md = c(
      "Column 1 | Column 2",
      "---------|---------",
      "foo      | bar",
      "baz      | qux",
      "quux     | quuz",
      "Lorem ipsum dolor sit amet."
    ),
    flags = c(
      "MD_FLAG_TABLES",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_TABLES"
    ),
    expected = c(
      "<table>",
      "<thead>",
      "<tr><th>Column 1</th><th>Column 2</th></tr>",
      "</thead>", "<tbody>",
      "<tr><td>foo</td><td>bar</td></tr>",
      "<tr><td>baz</td><td>qux</td></tr>",
      "<tr><td>quux</td><td>quuz</td></tr>",
      "<tr><td>Lorem ipsum dolor sit amet.</td><td></td></tr>",
      "</tbody>", "</table>"
    )
  )
})

test_that("spec-tables - Ex 9 (L187-200) - Tables", {
  expect_identical_html(
    md = c(
      "| Column 1 | Column 2 | Column 3 | Column 4 |",
      "|----------|:---------|:--------:|---------:|",
      "| default  | left     | center   | right    |"
    ),
    flags = c(
      "MD_FLAG_TABLES",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_TABLES"
    ),
    expected = c(
      "<table>",
      "<thead>",
      "<tr><th>Column 1</th><th align=\"left\">Column 2</th><th align=\"center\">Column 3</th><th align=\"right\">Column 4</th></tr>",
      "</thead>", "<tbody>",
      "<tr><td>default</td><td align=\"left\">left</td><td align=\"center\">center</td><td align=\"right\">right</td></tr>",
      "</tbody>", "</table>"
    )
  )
})

test_that("spec-tables - Ex 10 (L206-223) - Tables", {
  expect_identical_html(
    md = c(
      "Column 1 | Column 2",
      "---------|---------",
      "foo      | bar",
      "baz      | qux \\| xyzzy",
      "quux     | quuz"
    ), flags = c(
      "MD_FLAG_TABLES",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_TABLES"
    ),
    expected = c(
      "<table>",
      "<thead>",
      "<tr><th>Column 1</th><th>Column 2</th></tr>",
      "</thead>", "<tbody>",
      "<tr><td>foo</td><td>bar</td></tr>",
      "<tr><td>baz</td><td>qux | xyzzy</td></tr>",
      "<tr><td>quux</td><td>quuz</td></tr>",
      "</tbody>", "</table>"
    )
  )
})

test_that("spec-tables - Ex 11 (L230-249) - Tables", {
  expect_identical_html(
    md = c(
      "Column 1 | Column 2",
      "---------|---------",
      "*foo*    | bar",
      "**baz**  | [qux]",
      "quux     | [quuz](/url2)",
      "", "[qux]: /url"
    ), flags = c(
      "MD_FLAG_TABLES",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_TABLES"
    ),
    expected = c(
      "<table>",
      "<thead>",
      "<tr><th>Column 1</th><th>Column 2</th></tr>",
      "</thead>", "<tbody>",
      "<tr><td><em>foo</em></td><td>bar</td></tr>",
      "<tr><td><strong>baz</strong></td><td><a href=\"/url\">qux</a></td></tr>",
      "<tr><td>quux</td><td><a href=\"/url2\">quuz</a></td></tr>",
      "</tbody>", "</table>"
    )
  )
})

test_that("spec-tables - Ex 12 (L256-273) - Tables", {
  expect_identical_html(
    md = c(
      "Column 1 | Column 2",
      "---------|---------",
      "`foo     | bar`",
      "baz      | qux",
      "quux     | quuz"
    ), flags = c(
      "MD_FLAG_TABLES",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_TABLES"
    ),
    expected = c(
      "<table>",
      "<thead>",
      "<tr><th>Column 1</th><th>Column 2</th></tr>",
      "</thead>", "<tbody>",
      "<tr><td><code>foo     | bar</code></td><td></td></tr>",
      "<tr><td>baz</td><td>qux</td></tr>",
      "<tr><td>quux</td><td>quuz</td></tr>",
      "</tbody>", "</table>"
    )
  )
})

# spec-tasklists -------------------------------

test_that("spec-tasklists - Ex 1 (L10-20) - Tasklists", {
  expect_identical_html(
    md = c(
      " * [x] foo", " * [X] bar",
      " * [ ] baz"
    ), flags = c(
      "MD_FLAG_TASKLISTS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_TASKLISTS"
    ),
    expected = c(
      "<ul>",
      "<li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" disabled checked>foo</li>",
      "<li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" disabled checked>bar</li>",
      "<li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" disabled>baz</li>",
      "</ul>"
    )
  )
})

test_that("spec-tasklists - Ex 2 (L26-36) - Tasklists", {
  expect_identical_html(
    md = c(
      " 1. [x] foo",
      " 2. [X] bar",
      " 3. [ ] baz"
    ), flags = c(
      "MD_FLAG_TASKLISTS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_TASKLISTS"
    ),
    expected = c(
      "<ol>",
      "<li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" disabled checked>foo</li>",
      "<li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" disabled checked>bar</li>",
      "<li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" disabled>baz</li>",
      "</ol>"
    )
  )
})

test_that("spec-tasklists - Ex 3 (L42-66) - Tasklists", {
  expect_identical_html(
    md = c(
      " * xxx:", "   * [x] foo",
      "   * [x] bar",
      "   * [ ] baz", " * yyy:",
      "   * [ ] qux",
      "   * [x] quux",
      "   * [ ] quuz"
    ), flags = c(
      "MD_FLAG_TASKLISTS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_TASKLISTS"
    ),
    expected = c(
      "<ul>",
      "<li>xxx:", "<ul>",
      "<li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" disabled checked>foo</li>",
      "<li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" disabled checked>bar</li>",
      "<li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" disabled>baz</li>",
      "</ul></li>", "<li>yyy:",
      "<ul>",
      "<li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" disabled>qux</li>",
      "<li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" disabled checked>quux</li>",
      "<li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" disabled>quuz</li>",
      "</ul></li>", "</ul>"
    )
  )
})

test_that("spec-tasklists - Ex 4 (L72-96) - Tasklists", {
  expect_identical_html(
    md = c(
      " 1. [x] xxx:",
      "    * [x] foo",
      "    * [x] bar",
      "    * [ ] baz",
      " 2. [ ] yyy:",
      "    * [ ] qux",
      "    * [x] quux",
      "    * [ ] quuz"
    ), flags = c(
      "MD_FLAG_TASKLISTS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_TASKLISTS"
    ),
    expected = c(
      "<ol>",
      "<li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" disabled checked>xxx:",
      "<ul>",
      "<li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" disabled checked>foo</li>",
      "<li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" disabled checked>bar</li>",
      "<li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" disabled>baz</li>",
      "</ul></li>",
      "<li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" disabled>yyy:",
      "<ul>",
      "<li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" disabled>qux</li>",
      "<li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" disabled checked>quux</li>",
      "<li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" disabled>quuz</li>",
      "</ul></li>", "</ol>"
    )
  )
})

test_that("spec-tasklists - Ex 5 (L102-126) - Tasklists", {
  expect_identical_html(
    md = c(
      " * [x] xxx:", "   * foo",
      "   * bar", "   * baz",
      " * [ ] yyy:", "   * qux",
      "   * quux", "   * quuz"
    ),
    flags = c(
      "MD_FLAG_TASKLISTS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_TASKLISTS"
    ),
    expected = c(
      "<ul>",
      "<li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" disabled checked>xxx:",
      "<ul>", "<li>foo</li>",
      "<li>bar</li>",
      "<li>baz</li>",
      "</ul></li>",
      "<li class=\"task-list-item\"><input type=\"checkbox\" class=\"task-list-item-checkbox\" disabled>yyy:",
      "<ul>", "<li>qux</li>",
      "<li>quux</li>",
      "<li>quuz</li>",
      "</ul></li>", "</ul>"
    )
  )
})

# spec-underline -------------------------------

test_that("spec-underline - Ex 1 (L9-13) - Underline", {
  expect_identical_html(
    md = c(
      "_foo_\n"
    ), flags = c(
      "MD_FLAG_UNDERLINE",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_UNDERLINE"
    ),
    expected = c(
      "<p><u>foo</u></p>"
    )
  )
})

test_that("spec-underline - Ex 2 (L20-24) - Underline", {
  expect_identical_html(
    md = c(
      "___foo___\n"
    ), flags = c(
      "MD_FLAG_UNDERLINE",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_UNDERLINE"
    ),
    expected = c(
      "<p><u><u><u>foo</u></u></u></p>"
    )
  )
})

test_that("spec-underline - Ex 3 (L30-34) - Underline", {
  expect_identical_html(
    md = c(
      "foo_bar_baz\n"
    ), flags = c(
      "MD_FLAG_UNDERLINE",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_UNDERLINE"
    ),
    expected = c(
      "<p>foo_bar_baz</p>"
    )
  )
})

test_that("spec-underline - Ex 4 (L42-46) - Underline", {
  expect_identical_html(
    md = c(
      "_foo _bar\n"
    ), flags = c(
      "MD_FLAG_UNDERLINE",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_UNDERLINE"
    ),
    expected = c(
      "<p>_foo _bar</p>"
    )
  )
})

# spec-wiki-links -------------------------------

test_that("spec-wiki-links - Ex 1 (L10-14) - Wiki Links", {
  expect_identical_html(
    md = c(
      "[[foo]]\n"
    ), flags = c(
      "MD_FLAG_WIKILINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_WIKILINKS",
      "MD_FLAG_TABLES"
    ),
    expected = c(
      "<p><x-wikilink data-target=\"foo\">foo</x-wikilink></p>"
    )
  )
})

test_that("spec-wiki-links - Ex 2 (L21-25) - Wiki Links", {
  expect_identical_html(
    md = c(
      "[[foo|bar]]\n"
    ), flags = c(
      "MD_FLAG_WIKILINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_WIKILINKS",
      "MD_FLAG_TABLES"
    ),
    expected = c(
      "<p><x-wikilink data-target=\"foo\">bar</x-wikilink></p>"
    )
  )
})

test_that("spec-wiki-links - Ex 3 (L31-35) - Wiki Links", {
  expect_identical_html(
    md = c(
      "[[]]\n"
    ), flags = c(
      "MD_FLAG_WIKILINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_WIKILINKS",
      "MD_FLAG_TABLES"
    ),
    expected = c("<p>[[]]</p>")
  )
})

test_that("spec-wiki-links - Ex 4 (L39-43) - Wiki Links", {
  expect_identical_html(
    md = c(
      "[[|foo]]\n"
    ), flags = c(
      "MD_FLAG_WIKILINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_WIKILINKS",
      "MD_FLAG_TABLES"
    ),
    expected = c(
      "<p>[[|foo]]</p>"
    )
  )
})

test_that("spec-wiki-links - Ex 5 (L50-56) - Wiki Links", {
  expect_identical_html(
    md = c(
      "[[foo", "bar]]"
    ), flags = c(
      "MD_FLAG_WIKILINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_WIKILINKS",
      "MD_FLAG_TABLES"
    ),
    expected = c(
      "<p>[[foo",
      "bar]]</p>"
    )
  )
})

test_that("spec-wiki-links - Ex 6 (L60-66) - Wiki Links", {
  expect_identical_html(
    md = c(
      "[[foo", "bar|baz]]"
    ),
    flags = c(
      "MD_FLAG_WIKILINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_WIKILINKS",
      "MD_FLAG_TABLES"
    ),
    expected = c(
      "<p>[[foo",
      "bar|baz]]</p>"
    )
  )
})

test_that("spec-wiki-links - Ex 7 (L73-77) - Wiki Links", {
  expect_identical_html(
    md = c(
      "[[*foo*]]\n"
    ), flags = c(
      "MD_FLAG_WIKILINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_WIKILINKS",
      "MD_FLAG_TABLES"
    ),
    expected = c(
      "<p><x-wikilink data-target=\"*foo*\">*foo*</x-wikilink></p>"
    )
  )
})

test_that("spec-wiki-links - Ex 8 (L81-85) - Wiki Links", {
  expect_identical_html(
    md = c(
      "[[foo|![bar](bar.jpg)]]\n"
    ),
    flags = c(
      "MD_FLAG_WIKILINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_WIKILINKS",
      "MD_FLAG_TABLES"
    ),
    expected = c(
      "<p><x-wikilink data-target=\"foo\"><img src=\"bar.jpg\" alt=\"bar\"></x-wikilink></p>"
    )
  )
})

test_that("spec-wiki-links - Ex 9 (L92-96) - Wiki Links", {
  expect_identical_html(
    md = c(
      "[[foo|bar|baz]]\n"
    ),
    flags = c(
      "MD_FLAG_WIKILINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_WIKILINKS",
      "MD_FLAG_TABLES"
    ),
    expected = c(
      "<p><x-wikilink data-target=\"foo\">bar|baz</x-wikilink></p>"
    )
  )
})

test_that("spec-wiki-links - Ex 10 (L102-106) - Wiki Links", {
  expect_identical_html(
    md = c(
      "[[foo\\|bar|baz]]\n"
    ),
    flags = c(
      "MD_FLAG_WIKILINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_WIKILINKS",
      "MD_FLAG_TABLES"
    ),
    expected = c(
      "<p><x-wikilink data-target=\"foo|bar\">baz</x-wikilink></p>"
    )
  )
})

test_that("spec-wiki-links - Ex 11 (L112-116) - Wiki Links", {
  expect_identical_html(
    md = c(
      "[[foo|*bar*]]\n"
    ), flags = c(
      "MD_FLAG_WIKILINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_WIKILINKS",
      "MD_FLAG_TABLES"
    ),
    expected = c(
      "<p><x-wikilink data-target=\"foo\"><em>bar</em></x-wikilink></p>"
    )
  )
})

test_that("spec-wiki-links - Ex 12 (L123-127) - Wiki Links", {
  expect_identical_html(
    md = c(
      "[[foo|]]\n"
    ), flags = c(
      "MD_FLAG_WIKILINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_WIKILINKS",
      "MD_FLAG_TABLES"
    ),
    expected = c(
      "<p><x-wikilink data-target=\"foo\">foo</x-wikilink></p>"
    )
  )
})

test_that("spec-wiki-links - Ex 13 (L133-141) - Wiki Links", {
  expect_identical_html(
    md = c(
      "[[foo|foo", "bar", "baz]]"
    ),
    flags = c(
      "MD_FLAG_WIKILINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_WIKILINKS",
      "MD_FLAG_TABLES"
    ),
    expected = c(
      "<p><x-wikilink data-target=\"foo\">foo",
      "bar",
      "baz</x-wikilink></p>"
    )
  )
})

test_that("spec-wiki-links - Ex 14 (L147-151) - Wiki Links", {
  expect_identical_html(
    md = c(
      "[[foo]](foo.jpg)\n"
    ),
    flags = c(
      "MD_FLAG_WIKILINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_WIKILINKS",
      "MD_FLAG_TABLES"
    ),
    expected = c(
      "<p><x-wikilink data-target=\"foo\">foo</x-wikilink>(foo.jpg)</p>"
    )
  )
})

test_that("spec-wiki-links - Ex 15 (L155-161) - Wiki Links", {
  expect_identical_html(
    md = c(
      "[foo]: /url", "",
      "[[foo]]"
    ), flags = c(
      "MD_FLAG_WIKILINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_WIKILINKS",
      "MD_FLAG_TABLES"
    ),
    expected = c(
      "<p><x-wikilink data-target=\"foo\">foo</x-wikilink></p>"
    )
  )
})

test_that("spec-wiki-links - Ex 16 (L167-186) - Wiki Links", {
  expect_identical_html(
    md = c(
      "| A                | B   |",
      "|------------------|-----|",
      "| [[foo|*bar*]]    | baz |"
    ),
    flags = c(
      "MD_FLAG_WIKILINKS",
      "MD_FLAG_TABLES",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_WIKILINKS",
      "MD_FLAG_TABLES"
    ),
    expected = c(
      "<table>",
      "<thead>", "<tr>",
      "<th>A</th>", "<th>B</th>",
      "</tr>", "</thead>",
      "<tbody>", "<tr>",
      "<td><x-wikilink data-target=\"foo\"><em>bar</em></x-wikilink></td>",
      "<td>baz</td>", "</tr>",
      "</tbody>", "</table>"
    )
  )
})

test_that("spec-wiki-links - Ex 17 (L192-196) - Wiki Links", {
  expect_identical_html(
    md = c(
      "![[foo]](foo.jpg)\n"
    ),
    flags = c(
      "MD_FLAG_WIKILINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_WIKILINKS",
      "MD_FLAG_TABLES"
    ),
    expected = c(
      "<p><img src=\"foo.jpg\" alt=\"[foo]\"></p>"
    )
  )
})

test_that("spec-wiki-links - Ex 18 (L203-209) - Wiki Links", {
  expect_identical_html(
    md = c(
      "[[foo]", "", "[foo]: /url"
    ),
    flags = c(
      "MD_FLAG_WIKILINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_WIKILINKS",
      "MD_FLAG_TABLES"
    ),
    expected = c(
      "<p>[<a href=\"/url\">foo</a></p>"
    )
  )
})

test_that("spec-wiki-links - Ex 19 (L216-222) - Wiki Links", {
  expect_identical_html(
    md = c(
      "\\[[foo]]", "",
      "[foo]: /url"
    ), flags = c(
      "MD_FLAG_WIKILINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_WIKILINKS",
      "MD_FLAG_TABLES"
    ),
    expected = c(
      "<p>[<a href=\"/url\">foo</a>]</p>"
    )
  )
})

test_that("spec-wiki-links - Ex 20 (L228-232) - Wiki Links", {
  expect_identical_html(
    md = c(
      "[[foo[[bar]]]]\n"
    ), flags = c(
      "MD_FLAG_WIKILINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_WIKILINKS",
      "MD_FLAG_TABLES"
    ),
    expected = c(
      "<p>[[foo<x-wikilink data-target=\"bar\">bar</x-wikilink>]]</p>"
    )
  )
})

test_that("spec-wiki-links - Ex 21 (L238-244) - Wiki Links", {
  expect_identical_html(
    md = c(
      "[[12345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901]]",
      "[[12345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901|foo]]"
    ),
    flags = c(
      "MD_FLAG_WIKILINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_WIKILINKS",
      "MD_FLAG_TABLES"
    ),
    expected = c(
      "<p>[[12345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901]]",
      "[[12345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901|foo]]</p>"
    )
  )
})

test_that("spec-wiki-links - Ex 22 (L250-256) - Wiki Links", {
  expect_identical_html(
    md = c(
      "[[1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890]]",
      "[[1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890|foo]]"
    ),
    flags = c(
      "MD_FLAG_WIKILINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_WIKILINKS",
      "MD_FLAG_TABLES"
    ),
    expected = c(
      "<p><x-wikilink data-target=\"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890\">1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890</x-wikilink>",
      "<x-wikilink data-target=\"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890\">foo</x-wikilink></p>"
    )
  )
})

test_that("spec-wiki-links - Ex 23 (L263-277) - Wiki Links", {
  expect_identical_html(
    md = c(
      "> [[12345678901234567890123456789012345678901234567890|1234567890",
      "> 1234567890",
      "> 1234567890",
      "> 1234567890",
      "> 123456789]]"
    ), flags = c(
      "MD_FLAG_WIKILINKS",
      "MD_DIALECT_COMMONMARK",
      "MD_FLAG_WIKILINKS",
      "MD_FLAG_TABLES"
    ),
    expected = c(
      "<blockquote>",
      "<p><x-wikilink data-target=\"12345678901234567890123456789012345678901234567890\">1234567890",
      "1234567890", "1234567890",
      "1234567890",
      "123456789</x-wikilink></p>",
      "</blockquote>"
    )
  )
})

# spec -------------------------------

test_that("spec - Ex 1 (L356-359) - Tabs", {
  expect_identical_html(
    md = c(
      "\tfoo\tbaz\t\tbim\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>foo\tbaz\t\tbim",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 2 (L363-366) - Tabs", {
  expect_identical_html(
    md = c(
      "  \tfoo\tbaz\t\tbim\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>foo\tbaz\t\tbim",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 3 (L370-375) - Tabs", {
  expect_identical_html(
    md = c(
      "    a\ta", "    ·Ωê\ta"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>a\ta", "·Ωê\ta",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 4 (L383-392) - Tabs", {
  expect_identical_html(
    md = c(
      "  - foo", "", "\tbar"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>", "<li>",
      "<p>foo</p>", "<p>bar</p>",
      "</li>", "</ul>"
    )
  )
})

test_that("spec - Ex 5 (L396-406) - Tabs", {
  expect_identical_html(
    md = c(
      "- foo", "", "\t\tbar"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>", "<li>",
      "<p>foo</p>",
      "<pre><code>  bar",
      "</code></pre>", "</li>",
      "</ul>"
    )
  )
})

test_that("spec - Ex 6 (L419-424) - Tabs", {
  expect_identical_html(
    md = c(
      ">\t\tfoo\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "<pre><code>  foo",
      "</code></pre>",
      "</blockquote>"
    )
  )
})

test_that("spec - Ex 7 (L428-435) - Tabs", {
  expect_identical_html(
    md = c(
      "-\t\tfoo\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>", "<li>",
      "<pre><code>  foo",
      "</code></pre>", "</li>",
      "</ul>"
    )
  )
})

test_that("spec - Ex 8 (L440-445) - Tabs", {
  expect_identical_html(
    md = c(
      "    foo", "\tbar"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>foo",
      "bar", "</code></pre>"
    )
  )
})

test_that("spec - Ex 9 (L449-463) - Tabs", {
  expect_identical_html(
    md = c(
      " - foo", "   - bar",
      "\t - baz"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>",
      "<li>foo", "<ul>",
      "<li>bar", "<ul>",
      "<li>baz</li>", "</ul>",
      "</li>", "</ul>", "</li>",
      "</ul>"
    )
  )
})

test_that("spec - Ex 10 (L467-469) - Tabs", {
  expect_identical_html(
    md = c(
      "#\tFoo\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<h1>Foo</h1>")
  )
})

test_that("spec - Ex 11 (L473-475) - Tabs", {
  expect_identical_html(
    md = c(
      "*\t*\t*\t\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<hr />")
  )
})

test_that("spec - Ex 12 (L490-492) - Backslash escapes", {
  expect_identical_html(
    md = c(
      "\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\-\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\\\\\]\\^\\_\\`\\{\\|\\}\\~\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>!&quot;#$%&amp;'()*+,-./:;&lt;=&gt;?@[\\]^_`{|}~</p>"
    )
  )
})

test_that("spec - Ex 13 (L500-502) - Backslash escapes", {
  expect_identical_html(
    md = c(
      "\\\t\\A\\a\\ \\3\\œÜ\\¬´\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>\\\t\\A\\a\\ \\3\\œÜ\\¬´</p>"
    )
  )
})

test_that("spec - Ex 14 (L510-528) - Backslash escapes", {
  expect_identical_html(
    md = c(
      "\\*not emphasized*",
      "\\<br/> not a tag",
      "\\[not a link](/foo)",
      "\\`not code`",
      "1\\. not a list",
      "\\* not a list",
      "\\# not a heading",
      "\\[foo]: /url \"not a reference\"",
      "\\&ouml; not a character entity"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>*not emphasized*",
      "&lt;br/&gt; not a tag",
      "[not a link](/foo)",
      "`not code`",
      "1. not a list",
      "* not a list",
      "# not a heading",
      "[foo]: /url &quot;not a reference&quot;",
      "&amp;ouml; not a character entity</p>"
    )
  )
})

test_that("spec - Ex 15 (L535-537) - Backslash escapes", {
  expect_identical_html(
    md = c(
      "\\\\*emphasis*\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>\\<em>emphasis</em></p>"
    )
  )
})

test_that("spec - Ex 16 (L544-548) - Backslash escapes", {
  expect_identical_html(
    md = c(
      "foo\\", "bar"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo<br />",
      "bar</p>"
    )
  )
})

test_that("spec - Ex 17 (L556-558) - Backslash escapes", {
  expect_identical_html(
    md = c(
      "`` \\[\\` ``\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><code>\\[\\`</code></p>"
    )
  )
})

test_that("spec - Ex 18 (L563-566) - Backslash escapes", {
  expect_identical_html(
    md = c(
      "    \\[\\]\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>\\[\\]",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 19 (L571-576) - Backslash escapes", {
  expect_identical_html(
    md = c(
      "~~~", "\\[\\]", "~~~"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>\\[\\]",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 20 (L581-583) - Backslash escapes", {
  expect_identical_html(
    md = c(
      "<https://example.com?find=\\*>\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"https://example.com?find=%5C*\">https://example.com?find=\\*</a></p>"
    )
  )
})

test_that("spec - Ex 21 (L588-590) - Backslash escapes", {
  expect_identical_html(
    md = c(
      "<a href=\"/bar\\/)\">\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<a href=\"/bar\\/)\">"
    )
  )
})

test_that("spec - Ex 22 (L598-600) - Backslash escapes", {
  expect_identical_html(
    md = c(
      "[foo](/bar\\* \"ti\\*tle\")\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/bar*\" title=\"ti*tle\">foo</a></p>"
    )
  )
})

test_that("spec - Ex 23 (L605-609) - Backslash escapes", {
  expect_identical_html(
    md = c(
      "[foo]", "",
      "[foo]: /bar\\* \"ti\\*tle\""
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/bar*\" title=\"ti*tle\">foo</a></p>"
    )
  )
})

test_that("spec - Ex 24 (L614-619) - Backslash escapes", {
  expect_identical_html(
    md = c(
      "``` foo\\+bar", "foo",
      "```"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code class=\"language-foo+bar\">foo",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 25 (L650-656) - Entity and numeric character references", {
  expect_identical_html(
    md = c(
      "&nbsp; &amp; &copy; &AElig; &Dcaron;",
      "&frac34; &HilbertSpace; &DifferentialD;",
      "&ClockwiseContourIntegral; &ngE;"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>¬† &amp; ¬© √Ü ƒé", "¬æ ‚Ñã ‚ÖÜ",
      "‚à≤ ‚âßÃ∏</p>"
    )
  )
})

test_that("spec - Ex 26 (L669-671) - Entity and numeric character references", {
  expect_identical_html(
    md = c(
      "&#35; &#1234; &#992; &#0;\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<p># ”í œ† ÔøΩ</p>")
  )
})

test_that("spec - Ex 27 (L682-684) - Entity and numeric character references", {
  expect_identical_html(
    md = c(
      "&#X22; &#XD06; &#xcab;\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>&quot; ‡¥Ü ‡≤´</p>"
    )
  )
})

test_that("spec - Ex 28 (L691-699) - Entity and numeric character references", {
  expect_identical_html(
    md = c(
      "&nbsp &x; &#; &#x;",
      "&#87654321;", "&#abcdef0;",
      "&ThisIsNotDefined; &hi?;"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>&amp;nbsp &amp;x; &amp;#; &amp;#x;",
      "&amp;#87654321;",
      "&amp;#abcdef0;",
      "&amp;ThisIsNotDefined; &amp;hi?;</p>"
    )
  )
})

test_that("spec - Ex 29 (L708-710) - Entity and numeric character references", {
  expect_identical_html(
    md = c(
      "&copy\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>&amp;copy</p>"
    )
  )
})

test_that("spec - Ex 30 (L718-720) - Entity and numeric character references", {
  expect_identical_html(
    md = c(
      "&MadeUpEntity;\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>&amp;MadeUpEntity;</p>"
    )
  )
})

test_that("spec - Ex 31 (L729-731) - Entity and numeric character references", {
  expect_identical_html(
    md = c(
      "<a href=\"&ouml;&ouml;.html\">\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<a href=\"&ouml;&ouml;.html\">"
    )
  )
})

test_that("spec - Ex 32 (L736-738) - Entity and numeric character references", {
  expect_identical_html(
    md = c(
      "[foo](/f&ouml;&ouml; \"f&ouml;&ouml;\")\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/f%C3%B6%C3%B6\" title=\"f√∂√∂\">foo</a></p>"
    )
  )
})

test_that("spec - Ex 33 (L743-747) - Entity and numeric character references", {
  expect_identical_html(
    md = c(
      "[foo]", "",
      "[foo]: /f&ouml;&ouml; \"f&ouml;&ouml;\""
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/f%C3%B6%C3%B6\" title=\"f√∂√∂\">foo</a></p>"
    )
  )
})

test_that("spec - Ex 34 (L752-757) - Entity and numeric character references", {
  expect_identical_html(
    md = c(
      "``` f&ouml;&ouml;", "foo",
      "```"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code class=\"language-f√∂√∂\">foo",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 35 (L765-767) - Entity and numeric character references", {
  expect_identical_html(
    md = c(
      "`f&ouml;&ouml;`\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><code>f&amp;ouml;&amp;ouml;</code></p>"
    )
  )
})

test_that("spec - Ex 36 (L772-775) - Entity and numeric character references", {
  expect_identical_html(
    md = c(
      "    f&ouml;f&ouml;\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>f&amp;ouml;f&amp;ouml;",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 37 (L784-788) - Entity and numeric character references", {
  expect_identical_html(
    md = c(
      "&#42;foo&#42;", "*foo*"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>*foo*",
      "<em>foo</em></p>"
    )
  )
})

test_that("spec - Ex 38 (L792-799) - Entity and numeric character references", {
  expect_identical_html(
    md = c(
      "&#42; foo", "", "* foo"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>* foo</p>",
      "<ul>", "<li>foo</li>",
      "</ul>"
    )
  )
})

test_that("spec - Ex 39 (L803-807) - Entity and numeric character references", {
  expect_identical_html(
    md = c(
      "foo&#10;&#10;bar\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo", "",
      "bar</p>"
    )
  )
})

test_that("spec - Ex 40 (L811-813) - Entity and numeric character references", {
  expect_identical_html(
    md = c(
      "&#9;foo\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<p>\tfoo</p>")
  )
})

test_that("spec - Ex 41 (L818-820) - Entity and numeric character references", {
  expect_identical_html(
    md = c(
      "[a](url &quot;tit&quot;)\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[a](url &quot;tit&quot;)</p>"
    )
  )
})

test_that("spec - Ex 42 (L841-847) - Precedence", {
  expect_identical_html(
    md = c(
      "- `one", "- two`"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>",
      "<li>`one</li>",
      "<li>two`</li>", "</ul>"
    )
  )
})

test_that("spec - Ex 43 (L880-886) - Thematic breaks", {
  expect_identical_html(
    md = c(
      "***", "---", "___"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<hr />",
      "<hr />", "<hr />"
    )
  )
})

test_that("spec - Ex 44 (L893-895) - Thematic breaks", {
  expect_identical_html(
    md = c(
      "+++\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<p>+++</p>")
  )
})

test_that("spec - Ex 45 (L900-902) - Thematic breaks", {
  expect_identical_html(
    md = c(
      "===\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<p>===</p>")
  )
})

test_that("spec - Ex 46 (L909-915) - Thematic breaks", {
  expect_identical_html(
    md = c(
      "--", "**", "__"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>--", "**",
      "__</p>"
    )
  )
})

test_that("spec - Ex 47 (L922-928) - Thematic breaks", {
  expect_identical_html(
    md = c(
      " ***", "  ***", "   ***"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<hr />",
      "<hr />", "<hr />"
    )
  )
})

test_that("spec - Ex 48 (L935-938) - Thematic breaks", {
  expect_identical_html(
    md = c(
      "    ***\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>***",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 49 (L943-947) - Thematic breaks", {
  expect_identical_html(
    md = c(
      "Foo", "    ***"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>Foo",
      "***</p>"
    )
  )
})

test_that("spec - Ex 50 (L954-956) - Thematic breaks", {
  expect_identical_html(
    md = c(
      "_____________________________________\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<hr />")
  )
})

test_that("spec - Ex 51 (L963-965) - Thematic breaks", {
  expect_identical_html(
    md = c(
      " - - -\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<hr />")
  )
})

test_that("spec - Ex 52 (L970-972) - Thematic breaks", {
  expect_identical_html(
    md = c(
      " **  * ** * ** * **\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<hr />")
  )
})

test_that("spec - Ex 53 (L977-979) - Thematic breaks", {
  expect_identical_html(
    md = c(
      "-     -      -      -\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<hr />")
  )
})

test_that("spec - Ex 54 (L986-988) - Thematic breaks", {
  expect_identical_html(
    md = c(
      "- - - -    \n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<hr />")
  )
})

test_that("spec - Ex 55 (L995-1003) - Thematic breaks", {
  expect_identical_html(
    md = c(
      "_ _ _ _ a", "", "a------",
      "", "---a---"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>_ _ _ _ a</p>",
      "<p>a------</p>",
      "<p>---a---</p>"
    )
  )
})

test_that("spec - Ex 56 (L1011-1013) - Thematic breaks", {
  expect_identical_html(
    md = c(
      " *-*\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>-</em></p>"
    )
  )
})

test_that("spec - Ex 57 (L1020-1030) - Thematic breaks", {
  expect_identical_html(
    md = c(
      "- foo", "***", "- bar"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>",
      "<li>foo</li>", "</ul>",
      "<hr />", "<ul>",
      "<li>bar</li>", "</ul>"
    )
  )
})

test_that("spec - Ex 58 (L1037-1043) - Thematic breaks", {
  expect_identical_html(
    md = c(
      "Foo", "***", "bar"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>Foo</p>",
      "<hr />", "<p>bar</p>"
    )
  )
})

test_that("spec - Ex 59 (L1054-1059) - Thematic breaks", {
  expect_identical_html(
    md = c(
      "Foo", "---", "bar"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<h2>Foo</h2>",
      "<p>bar</p>"
    )
  )
})

test_that("spec - Ex 60 (L1067-1077) - Thematic breaks", {
  expect_identical_html(
    md = c(
      "* Foo", "* * *", "* Bar"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>",
      "<li>Foo</li>", "</ul>",
      "<hr />", "<ul>",
      "<li>Bar</li>", "</ul>"
    )
  )
})

test_that("spec - Ex 61 (L1084-1092) - Thematic breaks", {
  expect_identical_html(
    md = c(
      "- Foo", "- * * *"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>",
      "<li>Foo</li>", "<li>",
      "<hr />", "</li>", "</ul>"
    )
  )
})

test_that("spec - Ex 62 (L1113-1125) - ATX headings", {
  expect_identical_html(
    md = c(
      "# foo", "## foo",
      "### foo", "#### foo",
      "##### foo", "###### foo"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<h1>foo</h1>",
      "<h2>foo</h2>",
      "<h3>foo</h3>",
      "<h4>foo</h4>",
      "<h5>foo</h5>",
      "<h6>foo</h6>"
    )
  )
})

test_that("spec - Ex 63 (L1132-1134) - ATX headings", {
  expect_identical_html(
    md = c(
      "####### foo\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>####### foo</p>"
    )
  )
})

test_that("spec - Ex 64 (L1147-1152) - ATX headings", {
  expect_identical_html(
    md = c(
      "#5 bolt", "", "#hashtag"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>#5 bolt</p>",
      "<p>#hashtag</p>"
    )
  )
})

test_that("spec - Ex 65 (L1159-1161) - ATX headings", {
  expect_identical_html(
    md = c(
      "\\## foo\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<p>## foo</p>")
  )
})

test_that("spec - Ex 66 (L1168-1170) - ATX headings", {
  expect_identical_html(
    md = c(
      "# foo *bar* \\*baz\\*\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<h1>foo <em>bar</em> *baz*</h1>"
    )
  )
})

test_that("spec - Ex 67 (L1177-1179) - ATX headings", {
  expect_identical_html(
    md = c(
      "#                  foo                     \n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<h1>foo</h1>")
  )
})

test_that("spec - Ex 68 (L1186-1192) - ATX headings", {
  expect_identical_html(
    md = c(
      " ### foo", "  ## foo",
      "   # foo"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<h3>foo</h3>",
      "<h2>foo</h2>",
      "<h1>foo</h1>"
    )
  )
})

test_that("spec - Ex 69 (L1199-1202) - ATX headings", {
  expect_identical_html(
    md = c(
      "    # foo\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code># foo",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 70 (L1207-1211) - ATX headings", {
  expect_identical_html(
    md = c(
      "foo", "    # bar"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo",
      "# bar</p>"
    )
  )
})

test_that("spec - Ex 71 (L1218-1222) - ATX headings", {
  expect_identical_html(
    md = c(
      "## foo ##",
      "  ###   bar    ###"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<h2>foo</h2>",
      "<h3>bar</h3>"
    )
  )
})

test_that("spec - Ex 72 (L1229-1233) - ATX headings", {
  expect_identical_html(
    md = c(
      "# foo ##################################",
      "##### foo ##"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<h1>foo</h1>",
      "<h5>foo</h5>"
    )
  )
})

test_that("spec - Ex 73 (L1240-1242) - ATX headings", {
  expect_identical_html(
    md = c(
      "### foo ###     \n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<h3>foo</h3>")
  )
})

test_that("spec - Ex 74 (L1251-1253) - ATX headings", {
  expect_identical_html(
    md = c(
      "### foo ### b\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<h3>foo ### b</h3>"
    )
  )
})

test_that("spec - Ex 75 (L1260-1262) - ATX headings", {
  expect_identical_html(
    md = c(
      "# foo#\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<h1>foo#</h1>")
  )
})

test_that("spec - Ex 76 (L1270-1276) - ATX headings", {
  expect_identical_html(
    md = c(
      "### foo \\###",
      "## foo #\\##", "# foo \\#"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<h3>foo ###</h3>",
      "<h2>foo ###</h2>",
      "<h1>foo #</h1>"
    )
  )
})

test_that("spec - Ex 77 (L1284-1290) - ATX headings", {
  expect_identical_html(
    md = c(
      "****", "## foo", "****"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<hr />",
      "<h2>foo</h2>", "<hr />"
    )
  )
})

test_that("spec - Ex 78 (L1295-1301) - ATX headings", {
  expect_identical_html(
    md = c(
      "Foo bar", "# baz",
      "Bar foo"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>Foo bar</p>",
      "<h1>baz</h1>",
      "<p>Bar foo</p>"
    )
  )
})

test_that("spec - Ex 79 (L1308-1314) - ATX headings", {
  expect_identical_html(
    md = c(
      "## ", "#", "### ###"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<h2></h2>",
      "<h1></h1>", "<h3></h3>"
    )
  )
})

test_that("spec - Ex 80 (L1348-1355) - Setext headings", {
  expect_identical_html(
    md = c(
      "Foo *bar*", "=========",
      "", "Foo *bar*",
      "---------"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<h1>Foo <em>bar</em></h1>",
      "<h2>Foo <em>bar</em></h2>"
    )
  )
})

test_that("spec - Ex 81 (L1362-1367) - Setext headings", {
  expect_identical_html(
    md = c(
      "Foo *bar", "baz*", "===="
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<h1>Foo <em>bar",
      "baz</em></h1>"
    )
  )
})

test_that("spec - Ex 82 (L1376-1381) - Setext headings", {
  expect_identical_html(
    md = c(
      "  Foo *bar", "baz*\t",
      "===="
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<h1>Foo <em>bar",
      "baz</em></h1>"
    )
  )
})

test_that("spec - Ex 83 (L1388-1395) - Setext headings", {
  expect_identical_html(
    md = c(
      "Foo",
      "-------------------------",
      "", "Foo", "="
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<h2>Foo</h2>",
      "<h1>Foo</h1>"
    )
  )
})

test_that("spec - Ex 84 (L1403-1414) - Setext headings", {
  expect_identical_html(
    md = c(
      "   Foo", "---", "",
      "  Foo", "-----", "",
      "  Foo", "  ==="
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<h2>Foo</h2>",
      "<h2>Foo</h2>",
      "<h1>Foo</h1>"
    )
  )
})

test_that("spec - Ex 85 (L1421-1432) - Setext headings", {
  expect_identical_html(
    md = c(
      "    Foo", "    ---", "",
      "    Foo", "---"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>Foo",
      "---", "", "Foo",
      "</code></pre>", "<hr />"
    )
  )
})

test_that("spec - Ex 86 (L1440-1443) - Setext headings", {
  expect_identical_html(
    md = c(
      "Foo", "   ----      "
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<h2>Foo</h2>")
  )
})

test_that("spec - Ex 87 (L1450-1454) - Setext headings", {
  expect_identical_html(
    md = c(
      "Foo", "    ---"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>Foo",
      "---</p>"
    )
  )
})

test_that("spec - Ex 88 (L1461-1470) - Setext headings", {
  expect_identical_html(
    md = c(
      "Foo", "= =", "", "Foo",
      "--- -"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>Foo",
      "= =</p>", "<p>Foo</p>",
      "<hr />"
    )
  )
})

test_that("spec - Ex 89 (L1477-1480) - Setext headings", {
  expect_identical_html(
    md = c(
      "Foo  ", "-----"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<h2>Foo</h2>")
  )
})

test_that("spec - Ex 90 (L1487-1490) - Setext headings", {
  expect_identical_html(
    md = c(
      "Foo\\", "----"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<h2>Foo\\</h2>")
  )
})

test_that("spec - Ex 91 (L1498-1509) - Setext headings", {
  expect_identical_html(
    md = c(
      "`Foo", "----", "`", "",
      "<a title=\"a lot", "---",
      "of dashes\"/>"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<h2>`Foo</h2>",
      "<p>`</p>",
      "<h2>&lt;a title=&quot;a lot</h2>",
      "<p>of dashes&quot;/&gt;</p>"
    )
  )
})

test_that("spec - Ex 92 (L1517-1523) - Setext headings", {
  expect_identical_html(
    md = c(
      "> Foo", "---"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "<p>Foo</p>",
      "</blockquote>", "<hr />"
    )
  )
})

test_that("spec - Ex 93 (L1528-1536) - Setext headings", {
  expect_identical_html(
    md = c(
      "> foo", "bar", "==="
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "<p>foo", "bar", "===</p>",
      "</blockquote>"
    )
  )
})

test_that("spec - Ex 94 (L1541-1547) - Setext headings", {
  expect_identical_html(
    md = c(
      "- Foo", "---"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>",
      "<li>Foo</li>", "</ul>",
      "<hr />"
    )
  )
})

test_that("spec - Ex 95 (L1556-1561) - Setext headings", {
  expect_identical_html(
    md = c(
      "Foo", "Bar", "---"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<h2>Foo",
      "Bar</h2>"
    )
  )
})

test_that("spec - Ex 96 (L1569-1579) - Setext headings", {
  expect_identical_html(
    md = c(
      "---", "Foo", "---", "Bar",
      "---", "Baz"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<hr />",
      "<h2>Foo</h2>",
      "<h2>Bar</h2>",
      "<p>Baz</p>"
    )
  )
})

test_that("spec - Ex 97 (L1586-1589) - Setext headings", {
  expect_identical_html(
    md = c(
      "", "===="
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<p>====</p>")
  )
})

test_that("spec - Ex 98 (L1598-1602) - Setext headings", {
  expect_identical_html(
    md = c(
      "---", "---"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<hr />",
      "<hr />"
    )
  )
})

test_that("spec - Ex 99 (L1607-1613) - Setext headings", {
  expect_identical_html(
    md = c(
      "- foo", "-----"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>",
      "<li>foo</li>", "</ul>",
      "<hr />"
    )
  )
})

test_that("spec - Ex 100 (L1618-1623) - Setext headings", {
  expect_identical_html(
    md = c(
      "    foo", "---"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>foo",
      "</code></pre>", "<hr />"
    )
  )
})

test_that("spec - Ex 101 (L1628-1634) - Setext headings", {
  expect_identical_html(
    md = c(
      "> foo", "-----"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "<p>foo</p>",
      "</blockquote>", "<hr />"
    )
  )
})

test_that("spec - Ex 102 (L1642-1645) - Setext headings", {
  expect_identical_html(
    md = c(
      "\\> foo", "------"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<h2>&gt; foo</h2>"
    )
  )
})

test_that("spec - Ex 103 (L1673-1681) - Setext headings", {
  expect_identical_html(
    md = c(
      "Foo", "", "bar", "---",
      "baz"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>Foo</p>",
      "<h2>bar</h2>",
      "<p>baz</p>"
    )
  )
})

test_that("spec - Ex 104 (L1689-1699) - Setext headings", {
  expect_identical_html(
    md = c(
      "Foo", "bar", "", "---", "",
      "baz"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>Foo",
      "bar</p>", "<hr />",
      "<p>baz</p>"
    )
  )
})

test_that("spec - Ex 105 (L1707-1715) - Setext headings", {
  expect_identical_html(
    md = c(
      "Foo", "bar", "* * *",
      "baz"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>Foo",
      "bar</p>", "<hr />",
      "<p>baz</p>"
    )
  )
})

test_that("spec - Ex 106 (L1722-1730) - Setext headings", {
  expect_identical_html(
    md = c(
      "Foo", "bar", "\\---",
      "baz"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>Foo", "bar",
      "---", "baz</p>"
    )
  )
})

test_that("spec - Ex 107 (L1750-1755) - Indented code blocks", {
  expect_identical_html(
    md = c(
      "    a simple",
      "      indented code block"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>a simple",
      "  indented code block",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 108 (L1764-1773) - Indented code blocks", {
  expect_identical_html(
    md = c(
      "  - foo", "", "    bar"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>", "<li>",
      "<p>foo</p>", "<p>bar</p>",
      "</li>", "</ul>"
    )
  )
})

test_that("spec - Ex 109 (L1778-1789) - Indented code blocks", {
  expect_identical_html(
    md = c(
      "1.  foo", "", "    - bar"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ol>", "<li>",
      "<p>foo</p>", "<ul>",
      "<li>bar</li>", "</ul>",
      "</li>", "</ol>"
    )
  )
})

test_that("spec - Ex 110 (L1798-1807) - Indented code blocks", {
  expect_identical_html(
    md = c(
      "    <a/>", "    *hi*", "",
      "    - one"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>&lt;a/&gt;",
      "*hi*", "", "- one",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 111 (L1814-1829) - Indented code blocks", {
  expect_identical_html(
    md = c(
      "    chunk1", "",
      "    chunk2", "  ", " ",
      " ", "    chunk3"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>chunk1", "",
      "chunk2", "", "", "",
      "chunk3", "</code></pre>"
    )
  )
})

test_that("spec - Ex 112 (L1837-1844) - Indented code blocks", {
  expect_identical_html(
    md = c(
      "    chunk1", "      ",
      "      chunk2"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>chunk1", "  ",
      "  chunk2", "</code></pre>"
    )
  )
})

test_that("spec - Ex 113 (L1852-1857) - Indented code blocks", {
  expect_identical_html(
    md = c(
      "Foo", "    bar", ""
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>Foo",
      "bar</p>"
    )
  )
})

test_that("spec - Ex 114 (L1866-1871) - Indented code blocks", {
  expect_identical_html(
    md = c(
      "    foo", "bar"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>foo",
      "</code></pre>",
      "<p>bar</p>"
    )
  )
})

test_that("spec - Ex 115 (L1879-1892) - Indented code blocks", {
  expect_identical_html(
    md = c(
      "# Heading", "    foo",
      "Heading", "------",
      "    foo", "----"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<h1>Heading</h1>",
      "<pre><code>foo",
      "</code></pre>",
      "<h2>Heading</h2>",
      "<pre><code>foo",
      "</code></pre>", "<hr />"
    )
  )
})

test_that("spec - Ex 116 (L1899-1904) - Indented code blocks", {
  expect_identical_html(
    md = c(
      "        foo", "    bar"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>    foo", "bar",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 117 (L1912-1919) - Indented code blocks", {
  expect_identical_html(
    md = c(
      "", "    ", "    foo",
      "    ", ""
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>foo",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 118 (L1926-1929) - Indented code blocks", {
  expect_identical_html(
    md = c(
      "    foo  \n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>foo  ",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 119 (L1981-1988) - Fenced code blocks", {
  expect_identical_html(
    md = c(
      "```", "<", " >", "```"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>&lt;", " &gt;",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 120 (L1995-2002) - Fenced code blocks", {
  expect_identical_html(
    md = c(
      "~~~", "<", " >", "~~~"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>&lt;", " &gt;",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 121 (L2008-2012) - Fenced code blocks", {
  expect_identical_html(
    md = c(
      "``", "foo", "``"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><code>foo</code></p>"
    )
  )
})

test_that("spec - Ex 122 (L2019-2026) - Fenced code blocks", {
  expect_identical_html(
    md = c(
      "```", "aaa", "~~~", "```"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>aaa",
      "~~~", "</code></pre>"
    )
  )
})

test_that("spec - Ex 123 (L2031-2038) - Fenced code blocks", {
  expect_identical_html(
    md = c(
      "~~~", "aaa", "```", "~~~"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>aaa",
      "```", "</code></pre>"
    )
  )
})

test_that("spec - Ex 124 (L2045-2052) - Fenced code blocks", {
  expect_identical_html(
    md = c(
      "````", "aaa", "```",
      "``````"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>aaa",
      "```", "</code></pre>"
    )
  )
})

test_that("spec - Ex 125 (L2057-2064) - Fenced code blocks", {
  expect_identical_html(
    md = c(
      "~~~~", "aaa", "~~~",
      "~~~~"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>aaa",
      "~~~", "</code></pre>"
    )
  )
})

test_that("spec - Ex 126 (L2072-2074) - Fenced code blocks", {
  expect_identical_html(
    md = c(
      "```\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code></code></pre>"
    )
  )
})

test_that("spec - Ex 127 (L2079-2087) - Fenced code blocks", {
  expect_identical_html(
    md = c(
      "`````", "", "```", "aaa"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>",
      "```", "aaa",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 128 (L2092-2101) - Fenced code blocks", {
  expect_identical_html(
    md = c(
      "> ```", "> aaa", "", "bbb"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "<pre><code>aaa",
      "</code></pre>",
      "</blockquote>",
      "<p>bbb</p>"
    )
  )
})

test_that("spec - Ex 129 (L2108-2115) - Fenced code blocks", {
  expect_identical_html(
    md = c(
      "```", "", "  ", "```"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>",
      "  ", "</code></pre>"
    )
  )
})

test_that("spec - Ex 130 (L2122-2125) - Fenced code blocks", {
  expect_identical_html(
    md = c(
      "```", "```"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code></code></pre>"
    )
  )
})

test_that("spec - Ex 131 (L2134-2141) - Fenced code blocks", {
  expect_identical_html(
    md = c(
      " ```", " aaa", "aaa",
      "```"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>aaa",
      "aaa", "</code></pre>"
    )
  )
})

test_that("spec - Ex 132 (L2146-2155) - Fenced code blocks", {
  expect_identical_html(
    md = c(
      "  ```", "aaa", "  aaa",
      "aaa", "  ```"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>aaa",
      "aaa", "aaa",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 133 (L2160-2169) - Fenced code blocks", {
  expect_identical_html(
    md = c(
      "   ```", "   aaa",
      "    aaa", "  aaa",
      "   ```"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>aaa",
      " aaa", "aaa",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 134 (L2176-2183) - Fenced code blocks", {
  expect_identical_html(
    md = c(
      "    ```", "    aaa",
      "    ```"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>```",
      "aaa", "```",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 135 (L2191-2196) - Fenced code blocks", {
  expect_identical_html(
    md = c(
      "```", "aaa", "  ```"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>aaa",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 136 (L2201-2206) - Fenced code blocks", {
  expect_identical_html(
    md = c(
      "   ```", "aaa", "  ```"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>aaa",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 137 (L2213-2219) - Fenced code blocks", {
  expect_identical_html(
    md = c(
      "```", "aaa", "    ```"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>aaa",
      "    ```", "</code></pre>"
    )
  )
})

test_that("spec - Ex 138 (L2227-2231) - Fenced code blocks", {
  expect_identical_html(
    md = c(
      "``` ```", "aaa"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><code> </code>",
      "aaa</p>"
    )
  )
})

test_that("spec - Ex 139 (L2236-2242) - Fenced code blocks", {
  expect_identical_html(
    md = c(
      "~~~~~~", "aaa", "~~~ ~~"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>aaa",
      "~~~ ~~", "</code></pre>"
    )
  )
})

test_that("spec - Ex 140 (L2250-2259) - Fenced code blocks", {
  expect_identical_html(
    md = c(
      "foo", "```", "bar", "```",
      "baz"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo</p>",
      "<pre><code>bar",
      "</code></pre>",
      "<p>baz</p>"
    )
  )
})

test_that("spec - Ex 141 (L2267-2277) - Fenced code blocks", {
  expect_identical_html(
    md = c(
      "foo", "---", "~~~", "bar",
      "~~~", "# baz"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<h2>foo</h2>",
      "<pre><code>bar",
      "</code></pre>",
      "<h1>baz</h1>"
    )
  )
})

test_that("spec - Ex 142 (L2289-2298) - Fenced code blocks", {
  expect_identical_html(
    md = c(
      "```ruby", "def foo(x)",
      "  return 3", "end", "```"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code class=\"language-ruby\">def foo(x)",
      "  return 3", "end",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 143 (L2303-2312) - Fenced code blocks", {
  expect_identical_html(
    md = c(
      "~~~~    ruby startline=3 $%@#$",
      "def foo(x)", "  return 3",
      "end", "~~~~~~~"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code class=\"language-ruby\">def foo(x)",
      "  return 3", "end",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 144 (L2317-2320) - Fenced code blocks", {
  expect_identical_html(
    md = c(
      "````;", "````"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code class=\"language-;\"></code></pre>"
    )
  )
})

test_that("spec - Ex 145 (L2327-2331) - Fenced code blocks", {
  expect_identical_html(
    md = c(
      "``` aa ```", "foo"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><code>aa</code>",
      "foo</p>"
    )
  )
})

test_that("spec - Ex 146 (L2338-2343) - Fenced code blocks", {
  expect_identical_html(
    md = c(
      "~~~ aa ``` ~~~", "foo",
      "~~~"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code class=\"language-aa\">foo",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 147 (L2350-2355) - Fenced code blocks", {
  expect_identical_html(
    md = c(
      "```", "``` aaa", "```"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>``` aaa",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 148 (L2429-2442) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<table><tr><td>", "<pre>",
      "**Hello**,", "",
      "_world_.", "</pre>",
      "</td></tr></table>"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<table><tr><td>", "<pre>",
      "**Hello**,",
      "<p><em>world</em>.",
      "</pre></p>",
      "</td></tr></table>"
    )
  )
})

test_that("spec - Ex 149 (L2458-2475) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<table>", "  <tr>",
      "    <td>", "           hi",
      "    </td>", "  </tr>",
      "</table>", "", "okay."
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<table>",
      "  <tr>", "    <td>",
      "           hi",
      "    </td>", "  </tr>",
      "</table>", "<p>okay.</p>"
    )
  )
})

test_that("spec - Ex 150 (L2480-2486) - HTML blocks", {
  expect_identical_html(
    md = c(
      " <div>", "  *hello*",
      "         <foo><a>"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      " <div>",
      "  *hello*",
      "         <foo><a>"
    )
  )
})

test_that("spec - Ex 151 (L2493-2497) - HTML blocks", {
  expect_identical_html(
    md = c(
      "</div>", "*foo*"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "</div>",
      "*foo*"
    )
  )
})

test_that("spec - Ex 152 (L2504-2512) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<DIV CLASS=\"foo\">", "",
      "*Markdown*", "", "</DIV>"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<DIV CLASS=\"foo\">",
      "<p><em>Markdown</em></p>",
      "</DIV>"
    )
  )
})

test_that("spec - Ex 153 (L2520-2526) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<div id=\"foo\"",
      "  class=\"bar\">",
      "</div>"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<div id=\"foo\"",
      "  class=\"bar\">",
      "</div>"
    )
  )
})

test_that("spec - Ex 154 (L2531-2537) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<div id=\"foo\" class=\"bar",
      "  baz\">", "</div>"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<div id=\"foo\" class=\"bar",
      "  baz\">", "</div>"
    )
  )
})

test_that("spec - Ex 155 (L2543-2550) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<div>", "*foo*", "",
      "*bar*"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<div>", "*foo*",
      "<p><em>bar</em></p>"
    )
  )
})

test_that("spec - Ex 156 (L2559-2563) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<div id=\"foo\"", "*hi*"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<div id=\"foo\"", "*hi*"
    )
  )
})

test_that("spec - Ex 157 (L2568-2572) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<div class", "foo"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<div class",
      "foo"
    )
  )
})

test_that("spec - Ex 158 (L2580-2584) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<div *???-&&&-<---",
      "*foo*"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<div *???-&&&-<---",
      "*foo*"
    )
  )
})

test_that("spec - Ex 159 (L2592-2594) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<div><a href=\"bar\">*foo*</a></div>\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<div><a href=\"bar\">*foo*</a></div>"
    )
  )
})

test_that("spec - Ex 160 (L2599-2605) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<table><tr><td>", "foo",
      "</td></tr></table>"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<table><tr><td>", "foo",
      "</td></tr></table>"
    )
  )
})

test_that("spec - Ex 161 (L2616-2624) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<div></div>", "``` c",
      "int x = 33;", "```"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<div></div>",
      "``` c", "int x = 33;",
      "```"
    )
  )
})

test_that("spec - Ex 162 (L2633-2639) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<a href=\"foo\">", "*bar*",
      "</a>"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<a href=\"foo\">", "*bar*",
      "</a>"
    )
  )
})

test_that("spec - Ex 163 (L2646-2652) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<Warning>", "*bar*",
      "</Warning>"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<Warning>",
      "*bar*", "</Warning>"
    )
  )
})

test_that("spec - Ex 164 (L2657-2663) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<i class=\"foo\">",
      "*bar*", "</i>"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<i class=\"foo\">",
      "*bar*", "</i>"
    )
  )
})

test_that("spec - Ex 165 (L2668-2672) - HTML blocks", {
  expect_identical_html(
    md = c(
      "</ins>", "*bar*"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "</ins>",
      "*bar*"
    )
  )
})

test_that("spec - Ex 166 (L2683-2689) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<del>", "*foo*", "</del>"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<del>", "*foo*",
      "</del>"
    )
  )
})

test_that("spec - Ex 167 (L2698-2706) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<del>", "", "*foo*", "",
      "</del>"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<del>",
      "<p><em>foo</em></p>",
      "</del>"
    )
  )
})

test_that("spec - Ex 168 (L2716-2718) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<del>*foo*</del>\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><del><em>foo</em></del></p>"
    )
  )
})

test_that("spec - Ex 169 (L2732-2746) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<pre language=\"haskell\"><code>",
      "import Text.HTML.TagSoup",
      "", "main :: IO ()",
      "main = print $ parseTags tags",
      "</code></pre>", "okay"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre language=\"haskell\"><code>",
      "import Text.HTML.TagSoup",
      "", "main :: IO ()",
      "main = print $ parseTags tags",
      "</code></pre>",
      "<p>okay</p>"
    )
  )
})

test_that("spec - Ex 170 (L2753-2765) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<script type=\"text/javascript\">",
      "// JavaScript example", "",
      "document.getElementById(\"demo\").innerHTML = \"Hello JavaScript!\";",
      "</script>", "okay"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<script type=\"text/javascript\">",
      "// JavaScript example", "",
      "document.getElementById(\"demo\").innerHTML = \"Hello JavaScript!\";",
      "</script>", "<p>okay</p>"
    )
  )
})

test_that("spec - Ex 171 (L2772-2786) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<textarea>", "", "*foo*",
      "", "_bar_", "",
      "</textarea>"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<textarea>", "",
      "*foo*", "", "_bar_", "",
      "</textarea>"
    )
  )
})

test_that("spec - Ex 172 (L2792-2806) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<style",
      "  type=\"text/css\">",
      "h1 {color:red;}", "",
      "p {color:blue;}",
      "</style>", "okay"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<style",
      "  type=\"text/css\">",
      "h1 {color:red;}", "",
      "p {color:blue;}",
      "</style>", "<p>okay</p>"
    )
  )
})

test_that("spec - Ex 173 (L2815-2823) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<style",
      "  type=\"text/css\">", "",
      "foo"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<style",
      "  type=\"text/css\">", "",
      "foo"
    )
  )
})

test_that("spec - Ex 174 (L2828-2837) - HTML blocks", {
  expect_identical_html(
    md = c(
      "> <div>", "> foo", "",
      "bar"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "<div>", "foo",
      "</blockquote>",
      "<p>bar</p>"
    )
  )
})

test_that("spec - Ex 175 (L2842-2850) - HTML blocks", {
  expect_identical_html(
    md = c(
      "- <div>", "- foo"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>", "<li>",
      "<div>", "</li>",
      "<li>foo</li>", "</ul>"
    )
  )
})

test_that("spec - Ex 176 (L2857-2861) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<style>p{color:red;}</style>",
      "*foo*"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<style>p{color:red;}</style>",
      "<p><em>foo</em></p>"
    )
  )
})

test_that("spec - Ex 177 (L2866-2870) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<!-- foo -->*bar*",
      "*baz*"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<!-- foo -->*bar*",
      "<p><em>baz</em></p>"
    )
  )
})

test_that("spec - Ex 178 (L2878-2884) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<script>", "foo",
      "</script>1. *bar*"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<script>",
      "foo", "</script>1. *bar*"
    )
  )
})

test_that("spec - Ex 179 (L2891-2901) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<!-- Foo", "", "bar",
      "   baz -->", "okay"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<!-- Foo", "",
      "bar", "   baz -->",
      "<p>okay</p>"
    )
  )
})

test_that("spec - Ex 180 (L2909-2921) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<?php", "", "  echo '>';",
      "", "?>", "okay"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<?php", "",
      "  echo '>';", "", "?>",
      "<p>okay</p>"
    )
  )
})

test_that("spec - Ex 181 (L2928-2930) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<!DOCTYPE html>\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<!DOCTYPE html>"
    )
  )
})

test_that("spec - Ex 182 (L2937-2963) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<![CDATA[",
      "function matchwo(a,b)",
      "{",
      "  if (a < b && a < 0) then {",
      "    return 1;", "",
      "  } else {", "",
      "    return 0;", "  }", "}",
      "]]>", "okay"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<![CDATA[",
      "function matchwo(a,b)",
      "{",
      "  if (a < b && a < 0) then {",
      "    return 1;", "",
      "  } else {", "",
      "    return 0;", "  }", "}",
      "]]>", "<p>okay</p>"
    )
  )
})

test_that("spec - Ex 183 (L2971-2977) - HTML blocks", {
  expect_identical_html(
    md = c(
      "  <!-- foo -->", "",
      "    <!-- foo -->"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "  <!-- foo -->",
      "<pre><code>&lt;!-- foo --&gt;",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 184 (L2982-2988) - HTML blocks", {
  expect_identical_html(
    md = c(
      "  <div>", "", "    <div>"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "  <div>",
      "<pre><code>&lt;div&gt;",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 185 (L2996-3004) - HTML blocks", {
  expect_identical_html(
    md = c(
      "Foo", "<div>", "bar",
      "</div>"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>Foo</p>",
      "<div>", "bar", "</div>"
    )
  )
})

test_that("spec - Ex 186 (L3013-3021) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<div>", "bar", "</div>",
      "*foo*"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<div>", "bar",
      "</div>", "*foo*"
    )
  )
})

test_that("spec - Ex 187 (L3028-3034) - HTML blocks", {
  expect_identical_html(
    md = c(
      "Foo", "<a href=\"bar\">",
      "baz"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>Foo",
      "<a href=\"bar\">",
      "baz</p>"
    )
  )
})

test_that("spec - Ex 188 (L3069-3077) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<div>", "",
      "*Emphasized* text.", "",
      "</div>"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<div>",
      "<p><em>Emphasized</em> text.</p>",
      "</div>"
    )
  )
})

test_that("spec - Ex 189 (L3082-3088) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<div>",
      "*Emphasized* text.",
      "</div>"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<div>",
      "*Emphasized* text.",
      "</div>"
    )
  )
})

test_that("spec - Ex 190 (L3104-3122) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<table>", "", "<tr>", "",
      "<td>", "Hi", "</td>", "",
      "</tr>", "", "</table>"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<table>",
      "<tr>", "<td>", "Hi",
      "</td>", "</tr>",
      "</table>"
    )
  )
})

test_that("spec - Ex 191 (L3131-3150) - HTML blocks", {
  expect_identical_html(
    md = c(
      "<table>", "", "  <tr>", "",
      "    <td>", "      Hi",
      "    </td>", "", "  </tr>",
      "", "</table>"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<table>",
      "  <tr>",
      "<pre><code>&lt;td&gt;",
      "  Hi", "&lt;/td&gt;",
      "</code></pre>", "  </tr>",
      "</table>"
    )
  )
})

test_that("spec - Ex 192 (L3180-3184) - Link reference definitions", {
  expect_identical_html(
    md = c(
      "[foo]: /url \"title\"", "",
      "[foo]"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/url\" title=\"title\">foo</a></p>"
    )
  )
})

test_that("spec - Ex 193 (L3189-3195) - Link reference definitions", {
  expect_identical_html(
    md = c(
      "   [foo]: ",
      "      /url  ",
      "           'the title'  ",
      "", "[foo]"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/url\" title=\"the title\">foo</a></p>"
    )
  )
})

test_that("spec - Ex 194 (L3200-3204) - Link reference definitions", {
  expect_identical_html(
    md = c(
      "[Foo*bar\\]]:my_(url) 'title (with parens)'",
      "", "[Foo*bar\\]]"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"my_(url)\" title=\"title (with parens)\">Foo*bar]</a></p>"
    )
  )
})

test_that("spec - Ex 195 (L3209-3215) - Link reference definitions", {
  expect_identical_html(
    md = c(
      "[Foo bar]:", "<my url>",
      "'title'", "", "[Foo bar]"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"my%20url\" title=\"title\">Foo bar</a></p>"
    )
  )
})

test_that("spec - Ex 196 (L3222-3234) - Link reference definitions", {
  expect_identical_html(
    md = c(
      "[foo]: /url '", "title",
      "line1", "line2", "'", "",
      "[foo]"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/url\" title=\"",
      "title", "line1", "line2",
      "\">foo</a></p>"
    )
  )
})

test_that("spec - Ex 197 (L3241-3249) - Link reference definitions", {
  expect_identical_html(
    md = c(
      "[foo]: /url 'title", "",
      "with blank line'", "",
      "[foo]"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[foo]: /url 'title</p>",
      "<p>with blank line'</p>",
      "<p>[foo]</p>"
    )
  )
})

test_that("spec - Ex 198 (L3256-3261) - Link reference definitions", {
  expect_identical_html(
    md = c(
      "[foo]:", "/url", "",
      "[foo]"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/url\">foo</a></p>"
    )
  )
})

test_that("spec - Ex 199 (L3268-3273) - Link reference definitions", {
  expect_identical_html(
    md = c(
      "[foo]:", "", "[foo]"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[foo]:</p>",
      "<p>[foo]</p>"
    )
  )
})

test_that("spec - Ex 200 (L3280-3284) - Link reference definitions", {
  expect_identical_html(
    md = c(
      "[foo]: <>", "", "[foo]"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"\">foo</a></p>"
    )
  )
})

test_that("spec - Ex 201 (L3291-3296) - Link reference definitions", {
  expect_identical_html(
    md = c(
      "[foo]: <bar>(baz)", "",
      "[foo]"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[foo]: <bar>(baz)</p>",
      "<p>[foo]</p>"
    )
  )
})

test_that("spec - Ex 202 (L3304-3308) - Link reference definitions", {
  expect_identical_html(
    md = c(
      "[foo]: /url\\bar\\*baz \"foo\\\"bar\\baz\"",
      "", "[foo]"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/url%5Cbar*baz\" title=\"foo&quot;bar\\baz\">foo</a></p>"
    )
  )
})

test_that("spec - Ex 203 (L3315-3319) - Link reference definitions", {
  expect_identical_html(
    md = c(
      "[foo]", "", "[foo]: url"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"url\">foo</a></p>"
    )
  )
})

test_that("spec - Ex 204 (L3327-3332) - Link reference definitions", {
  expect_identical_html(
    md = c(
      "[foo]", "", "[foo]: first",
      "[foo]: second"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"first\">foo</a></p>"
    )
  )
})

test_that("spec - Ex 205 (L3340-3344) - Link reference definitions", {
  expect_identical_html(
    md = c(
      "[FOO]: /url", "", "[Foo]"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/url\">Foo</a></p>"
    )
  )
})

test_that("spec - Ex 206 (L3349-3353) - Link reference definitions", {
  expect_identical_html(
    md = c(
      "[ŒëŒìŒ©]: /œÜŒøœÖ", "", "[Œ±Œ≥œâ]"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/%CF%86%CE%BF%CF%85\">Œ±Œ≥œâ</a></p>"
    )
  )
})

test_that("spec - Ex 207 (L3364-3365) - Link reference definitions", {
  expect_identical_html(
    md = c(
      "[foo]: /url\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c()
  )
})

test_that("spec - Ex 208 (L3372-3377) - Link reference definitions", {
  expect_identical_html(
    md = c(
      "[", "foo", "]: /url",
      "bar"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<p>bar</p>")
  )
})

test_that("spec - Ex 209 (L3385-3387) - Link reference definitions", {
  expect_identical_html(
    md = c(
      "[foo]: /url \"title\" ok\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[foo]: /url &quot;title&quot; ok</p>"
    )
  )
})

test_that("spec - Ex 210 (L3394-3397) - Link reference definitions", {
  expect_identical_html(
    md = c(
      "[foo]: /url",
      "\"title\" ok"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>&quot;title&quot; ok</p>"
    )
  )
})

test_that("spec - Ex 211 (L3405-3411) - Link reference definitions", {
  expect_identical_html(
    md = c(
      "    [foo]: /url \"title\"",
      "", "[foo]"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>[foo]: /url &quot;title&quot;",
      "</code></pre>",
      "<p>[foo]</p>"
    )
  )
})

test_that("spec - Ex 212 (L3419-3427) - Link reference definitions", {
  expect_identical_html(
    md = c(
      "```", "[foo]: /url", "```",
      "", "[foo]"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>[foo]: /url",
      "</code></pre>",
      "<p>[foo]</p>"
    )
  )
})

test_that("spec - Ex 213 (L3434-3441) - Link reference definitions", {
  expect_identical_html(
    md = c(
      "Foo", "[bar]: /baz", "",
      "[bar]"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>Foo",
      "[bar]: /baz</p>",
      "<p>[bar]</p>"
    )
  )
})

test_that("spec - Ex 214 (L3449-3456) - Link reference definitions", {
  expect_identical_html(
    md = c(
      "# [Foo]", "[foo]: /url",
      "> bar"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<h1><a href=\"/url\">Foo</a></h1>",
      "<blockquote>",
      "<p>bar</p>",
      "</blockquote>"
    )
  )
})

test_that("spec - Ex 215 (L3460-3466) - Link reference definitions", {
  expect_identical_html(
    md = c(
      "[foo]: /url", "bar", "===",
      "[foo]"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<h1>bar</h1>",
      "<p><a href=\"/url\">foo</a></p>"
    )
  )
})

test_that("spec - Ex 216 (L3470-3475) - Link reference definitions", {
  expect_identical_html(
    md = c(
      "[foo]: /url", "===",
      "[foo]"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>===",
      "<a href=\"/url\">foo</a></p>"
    )
  )
})

test_that("spec - Ex 217 (L3483-3494) - Link reference definitions", {
  expect_identical_html(
    md = c(
      "[foo]: /foo-url \"foo\"",
      "[bar]: /bar-url",
      "  \"bar\"",
      "[baz]: /baz-url", "",
      "[foo],", "[bar],", "[baz]"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/foo-url\" title=\"foo\">foo</a>,",
      "<a href=\"/bar-url\" title=\"bar\">bar</a>,",
      "<a href=\"/baz-url\">baz</a></p>"
    )
  )
})

test_that("spec - Ex 218 (L3504-3510) - Link reference definitions", {
  expect_identical_html(
    md = c(
      "[foo]", "",
      "> [foo]: /url"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/url\">foo</a></p>",
      "<blockquote>",
      "</blockquote>"
    )
  )
})

test_that("spec - Ex 219 (L3526-3531) - Paragraphs", {
  expect_identical_html(
    md = c(
      "aaa", "", "bbb"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>aaa</p>",
      "<p>bbb</p>"
    )
  )
})

test_that("spec - Ex 220 (L3538-3547) - Paragraphs", {
  expect_identical_html(
    md = c(
      "aaa", "bbb", "", "ccc",
      "ddd"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>aaa",
      "bbb</p>", "<p>ccc",
      "ddd</p>"
    )
  )
})

test_that("spec - Ex 221 (L3554-3560) - Paragraphs", {
  expect_identical_html(
    md = c(
      "aaa", "", "", "bbb"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>aaa</p>",
      "<p>bbb</p>"
    )
  )
})

test_that("spec - Ex 222 (L3567-3571) - Paragraphs", {
  expect_identical_html(
    md = c(
      "  aaa", " bbb"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>aaa",
      "bbb</p>"
    )
  )
})

test_that("spec - Ex 223 (L3579-3585) - Paragraphs", {
  expect_identical_html(
    md = c(
      "aaa", "             bbb",
      "                                       ccc"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>aaa", "bbb",
      "ccc</p>"
    )
  )
})

test_that("spec - Ex 224 (L3593-3597) - Paragraphs", {
  expect_identical_html(
    md = c(
      "   aaa", "bbb"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>aaa",
      "bbb</p>"
    )
  )
})

test_that("spec - Ex 225 (L3602-3607) - Paragraphs", {
  expect_identical_html(
    md = c(
      "    aaa", "bbb"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>aaa",
      "</code></pre>",
      "<p>bbb</p>"
    )
  )
})

test_that("spec - Ex 226 (L3616-3620) - Paragraphs", {
  expect_identical_html(
    md = c(
      "aaa     ", "bbb     "
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>aaa<br />",
      "bbb</p>"
    )
  )
})

test_that("spec - Ex 227 (L3633-3643) - Blank lines", {
  expect_identical_html(
    md = c(
      "  ", "", "aaa", "  ", "",
      "# aaa", "", "  "
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>aaa</p>",
      "<h1>aaa</h1>"
    )
  )
})

test_that("spec - Ex 228 (L3701-3709) - Block quotes", {
  expect_identical_html(
    md = c(
      "> # Foo", "> bar", "> baz"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "<h1>Foo</h1>", "<p>bar",
      "baz</p>", "</blockquote>"
    )
  )
})

test_that("spec - Ex 229 (L3716-3724) - Block quotes", {
  expect_identical_html(
    md = c(
      "># Foo", ">bar", "> baz"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "<h1>Foo</h1>", "<p>bar",
      "baz</p>", "</blockquote>"
    )
  )
})

test_that("spec - Ex 230 (L3731-3739) - Block quotes", {
  expect_identical_html(
    md = c(
      "   > # Foo", "   > bar",
      " > baz"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "<h1>Foo</h1>", "<p>bar",
      "baz</p>", "</blockquote>"
    )
  )
})

test_that("spec - Ex 231 (L3746-3753) - Block quotes", {
  expect_identical_html(
    md = c(
      "    > # Foo", "    > bar",
      "    > baz"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>&gt; # Foo",
      "&gt; bar", "&gt; baz",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 232 (L3761-3769) - Block quotes", {
  expect_identical_html(
    md = c(
      "> # Foo", "> bar", "baz"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "<h1>Foo</h1>", "<p>bar",
      "baz</p>", "</blockquote>"
    )
  )
})

test_that("spec - Ex 233 (L3777-3785) - Block quotes", {
  expect_identical_html(
    md = c(
      "> bar", "baz", "> foo"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "<p>bar", "baz", "foo</p>",
      "</blockquote>"
    )
  )
})

test_that("spec - Ex 234 (L3801-3807) - Block quotes", {
  expect_identical_html(
    md = c(
      "> foo", "---"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "<p>foo</p>",
      "</blockquote>", "<hr />"
    )
  )
})

test_that("spec - Ex 235 (L3821-3831) - Block quotes", {
  expect_identical_html(
    md = c(
      "> - foo", "- bar"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "<ul>", "<li>foo</li>",
      "</ul>", "</blockquote>",
      "<ul>", "<li>bar</li>",
      "</ul>"
    )
  )
})

test_that("spec - Ex 236 (L3839-3847) - Block quotes", {
  expect_identical_html(
    md = c(
      ">     foo", "    bar"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "<pre><code>foo",
      "</code></pre>",
      "</blockquote>",
      "<pre><code>bar",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 237 (L3852-3860) - Block quotes", {
  expect_identical_html(
    md = c(
      "> ```", "foo", "```"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "<pre><code></code></pre>",
      "</blockquote>",
      "<p>foo</p>",
      "<pre><code></code></pre>"
    )
  )
})

test_that("spec - Ex 238 (L3868-3874) - Block quotes", {
  expect_identical_html(
    md = c(
      "> foo", "    - bar"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "<p>foo", "- bar</p>",
      "</blockquote>"
    )
  )
})

test_that("spec - Ex 239 (L3892-3895) - Block quotes", {
  expect_identical_html(
    md = c(
      ">\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "</blockquote>"
    )
  )
})

test_that("spec - Ex 240 (L3900-3905) - Block quotes", {
  expect_identical_html(
    md = c(
      ">", ">  ", "> "
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "</blockquote>"
    )
  )
})

test_that("spec - Ex 241 (L3912-3918) - Block quotes", {
  expect_identical_html(
    md = c(
      ">", "> foo", ">  "
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "<p>foo</p>",
      "</blockquote>"
    )
  )
})

test_that("spec - Ex 242 (L3925-3934) - Block quotes", {
  expect_identical_html(
    md = c(
      "> foo", "", "> bar"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "<p>foo</p>",
      "</blockquote>",
      "<blockquote>",
      "<p>bar</p>",
      "</blockquote>"
    )
  )
})

test_that("spec - Ex 243 (L3947-3953) - Block quotes", {
  expect_identical_html(
    md = c(
      "> foo", "> bar"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "<p>foo", "bar</p>",
      "</blockquote>"
    )
  )
})

test_that("spec - Ex 244 (L3960-3967) - Block quotes", {
  expect_identical_html(
    md = c(
      "> foo", ">", "> bar"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "<p>foo</p>", "<p>bar</p>",
      "</blockquote>"
    )
  )
})

test_that("spec - Ex 245 (L3974-3980) - Block quotes", {
  expect_identical_html(
    md = c(
      "foo", "> bar"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo</p>",
      "<blockquote>",
      "<p>bar</p>",
      "</blockquote>"
    )
  )
})

test_that("spec - Ex 246 (L3988-3998) - Block quotes", {
  expect_identical_html(
    md = c(
      "> aaa", "***", "> bbb"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "<p>aaa</p>",
      "</blockquote>", "<hr />",
      "<blockquote>",
      "<p>bbb</p>",
      "</blockquote>"
    )
  )
})

test_that("spec - Ex 247 (L4006-4012) - Block quotes", {
  expect_identical_html(
    md = c(
      "> bar", "baz"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "<p>bar", "baz</p>",
      "</blockquote>"
    )
  )
})

test_that("spec - Ex 248 (L4017-4024) - Block quotes", {
  expect_identical_html(
    md = c(
      "> bar", "", "baz"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "<p>bar</p>",
      "</blockquote>",
      "<p>baz</p>"
    )
  )
})

test_that("spec - Ex 249 (L4029-4036) - Block quotes", {
  expect_identical_html(
    md = c(
      "> bar", ">", "baz"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "<p>bar</p>",
      "</blockquote>",
      "<p>baz</p>"
    )
  )
})

test_that("spec - Ex 250 (L4045-4055) - Block quotes", {
  expect_identical_html(
    md = c(
      "> > > foo", "bar"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "<blockquote>",
      "<blockquote>", "<p>foo",
      "bar</p>", "</blockquote>",
      "</blockquote>",
      "</blockquote>"
    )
  )
})

test_that("spec - Ex 251 (L4060-4072) - Block quotes", {
  expect_identical_html(
    md = c(
      ">>> foo", "> bar", ">>baz"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "<blockquote>",
      "<blockquote>", "<p>foo",
      "bar", "baz</p>",
      "</blockquote>",
      "</blockquote>",
      "</blockquote>"
    )
  )
})

test_that("spec - Ex 252 (L4082-4092) - Block quotes", {
  expect_identical_html(
    md = c(
      ">     code", "",
      ">    not code"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "<pre><code>code",
      "</code></pre>",
      "</blockquote>",
      "<blockquote>",
      "<p>not code</p>",
      "</blockquote>"
    )
  )
})

test_that("spec - Ex 253 (L4136-4149) - List items", {
  expect_identical_html(
    md = c(
      "A paragraph",
      "with two lines.", "",
      "    indented code", "",
      "> A block quote."
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>A paragraph",
      "with two lines.</p>",
      "<pre><code>indented code",
      "</code></pre>",
      "<blockquote>",
      "<p>A block quote.</p>",
      "</blockquote>"
    )
  )
})

test_that("spec - Ex 254 (L4158-4175) - List items", {
  expect_identical_html(
    md = c(
      "1.  A paragraph",
      "    with two lines.", "",
      "        indented code", "",
      "    > A block quote."
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ol>", "<li>",
      "<p>A paragraph",
      "with two lines.</p>",
      "<pre><code>indented code",
      "</code></pre>",
      "<blockquote>",
      "<p>A block quote.</p>",
      "</blockquote>", "</li>",
      "</ol>"
    )
  )
})

test_that("spec - Ex 255 (L4191-4198) - List items", {
  expect_identical_html(
    md = c(
      "- one", "", " two"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>",
      "<li>one</li>", "</ul>",
      "<p>two</p>"
    )
  )
})

test_that("spec - Ex 256 (L4203-4212) - List items", {
  expect_identical_html(
    md = c(
      "- one", "", "  two"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>", "<li>",
      "<p>one</p>", "<p>two</p>",
      "</li>", "</ul>"
    )
  )
})

test_that("spec - Ex 257 (L4217-4225) - List items", {
  expect_identical_html(
    md = c(
      " -    one", "", "     two"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>",
      "<li>one</li>", "</ul>",
      "<pre><code> two",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 258 (L4230-4239) - List items", {
  expect_identical_html(
    md = c(
      " -    one", "",
      "      two"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>", "<li>",
      "<p>one</p>", "<p>two</p>",
      "</li>", "</ul>"
    )
  )
})

test_that("spec - Ex 259 (L4252-4265) - List items", {
  expect_identical_html(
    md = c(
      "   > > 1.  one", ">>",
      ">>     two"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "<blockquote>", "<ol>",
      "<li>", "<p>one</p>",
      "<p>two</p>", "</li>",
      "</ol>", "</blockquote>",
      "</blockquote>"
    )
  )
})

test_that("spec - Ex 260 (L4279-4290) - List items", {
  expect_identical_html(
    md = c(
      ">>- one", ">>",
      "  >  > two"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "<blockquote>", "<ul>",
      "<li>one</li>", "</ul>",
      "<p>two</p>",
      "</blockquote>",
      "</blockquote>"
    )
  )
})

test_that("spec - Ex 261 (L4298-4303) - List items", {
  expect_identical_html(
    md = c(
      "-one", "", "2.two"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>-one</p>",
      "<p>2.two</p>"
    )
  )
})

test_that("spec - Ex 262 (L4311-4321) - List items", {
  expect_identical_html(
    md = c(
      "- foo", "", "", "  bar"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>", "<li>",
      "<p>foo</p>", "<p>bar</p>",
      "</li>", "</ul>"
    )
  )
})

test_that("spec - Ex 263 (L4328-4348) - List items", {
  expect_identical_html(
    md = c(
      "1.  foo", "", "    ```",
      "    bar", "    ```", "",
      "    baz", "", "    > bam"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ol>", "<li>",
      "<p>foo</p>",
      "<pre><code>bar",
      "</code></pre>",
      "<p>baz</p>",
      "<blockquote>",
      "<p>bam</p>",
      "</blockquote>", "</li>",
      "</ol>"
    )
  )
})

test_that("spec - Ex 264 (L4356-4372) - List items", {
  expect_identical_html(
    md = c(
      "- Foo", "", "      bar",
      "", "", "      baz"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>", "<li>",
      "<p>Foo</p>",
      "<pre><code>bar", "", "",
      "baz", "</code></pre>",
      "</li>", "</ul>"
    )
  )
})

test_that("spec - Ex 265 (L4378-4382) - List items", {
  expect_identical_html(
    md = c(
      "123456789. ok\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ol start=\"123456789\">",
      "<li>ok</li>", "</ol>"
    )
  )
})

test_that("spec - Ex 266 (L4387-4389) - List items", {
  expect_identical_html(
    md = c(
      "1234567890. not ok\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>1234567890. not ok</p>"
    )
  )
})

test_that("spec - Ex 267 (L4396-4400) - List items", {
  expect_identical_html(
    md = c(
      "0. ok\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ol start=\"0\">",
      "<li>ok</li>", "</ol>"
    )
  )
})

test_that("spec - Ex 268 (L4405-4409) - List items", {
  expect_identical_html(
    md = c(
      "003. ok\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ol start=\"3\">",
      "<li>ok</li>", "</ol>"
    )
  )
})

test_that("spec - Ex 269 (L4416-4418) - List items", {
  expect_identical_html(
    md = c(
      "-1. not ok\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>-1. not ok</p>"
    )
  )
})

test_that("spec - Ex 270 (L4439-4449) - List items", {
  expect_identical_html(
    md = c(
      "- foo", "", "      bar"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>", "<li>",
      "<p>foo</p>",
      "<pre><code>bar",
      "</code></pre>", "</li>",
      "</ul>"
    )
  )
})

test_that("spec - Ex 271 (L4456-4466) - List items", {
  expect_identical_html(
    md = c(
      "  10.  foo", "",
      "           bar"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ol start=\"10\">", "<li>",
      "<p>foo</p>",
      "<pre><code>bar",
      "</code></pre>", "</li>",
      "</ol>"
    )
  )
})

test_that("spec - Ex 272 (L4475-4485) - List items", {
  expect_identical_html(
    md = c(
      "    indented code", "",
      "paragraph", "",
      "    more code"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>indented code",
      "</code></pre>",
      "<p>paragraph</p>",
      "<pre><code>more code",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 273 (L4490-4504) - List items", {
  expect_identical_html(
    md = c(
      "1.     indented code", "",
      "   paragraph", "",
      "       more code"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ol>", "<li>",
      "<pre><code>indented code",
      "</code></pre>",
      "<p>paragraph</p>",
      "<pre><code>more code",
      "</code></pre>", "</li>",
      "</ol>"
    )
  )
})

test_that("spec - Ex 274 (L4512-4526) - List items", {
  expect_identical_html(
    md = c(
      "1.      indented code", "",
      "   paragraph", "",
      "       more code"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ol>", "<li>",
      "<pre><code> indented code",
      "</code></pre>",
      "<p>paragraph</p>",
      "<pre><code>more code",
      "</code></pre>", "</li>",
      "</ol>"
    )
  )
})

test_that("spec - Ex 275 (L4539-4544) - List items", {
  expect_identical_html(
    md = c(
      "   foo", "", "bar"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo</p>",
      "<p>bar</p>"
    )
  )
})

test_that("spec - Ex 276 (L4549-4556) - List items", {
  expect_identical_html(
    md = c(
      "-    foo", "", "  bar"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>",
      "<li>foo</li>", "</ul>",
      "<p>bar</p>"
    )
  )
})

test_that("spec - Ex 277 (L4566-4575) - List items", {
  expect_identical_html(
    md = c(
      "-  foo", "", "   bar"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>", "<li>",
      "<p>foo</p>", "<p>bar</p>",
      "</li>", "</ul>"
    )
  )
})

test_that("spec - Ex 278 (L4593-4612) - List items", {
  expect_identical_html(
    md = c(
      "-", "  foo", "-", "  ```",
      "  bar", "  ```", "-",
      "      baz"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>",
      "<li>foo</li>", "<li>",
      "<pre><code>bar",
      "</code></pre>", "</li>",
      "<li>", "<pre><code>baz",
      "</code></pre>", "</li>",
      "</ul>"
    )
  )
})

test_that("spec - Ex 279 (L4619-4624) - List items", {
  expect_identical_html(
    md = c(
      "-   ", "  foo"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>",
      "<li>foo</li>", "</ul>"
    )
  )
})

test_that("spec - Ex 280 (L4633-4640) - List items", {
  expect_identical_html(
    md = c(
      "-", "", "  foo"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>",
      "<li></li>", "</ul>",
      "<p>foo</p>"
    )
  )
})

test_that("spec - Ex 281 (L4647-4655) - List items", {
  expect_identical_html(
    md = c(
      "- foo", "-", "- bar"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>",
      "<li>foo</li>", "<li></li>",
      "<li>bar</li>", "</ul>"
    )
  )
})

test_that("spec - Ex 282 (L4662-4670) - List items", {
  expect_identical_html(
    md = c(
      "- foo", "-   ", "- bar"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>",
      "<li>foo</li>", "<li></li>",
      "<li>bar</li>", "</ul>"
    )
  )
})

test_that("spec - Ex 283 (L4677-4685) - List items", {
  expect_identical_html(
    md = c(
      "1. foo", "2.", "3. bar"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ol>",
      "<li>foo</li>", "<li></li>",
      "<li>bar</li>", "</ol>"
    )
  )
})

test_that("spec - Ex 284 (L4692-4696) - List items", {
  expect_identical_html(
    md = c(
      "*\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>",
      "<li></li>", "</ul>"
    )
  )
})

test_that("spec - Ex 285 (L4702-4711) - List items", {
  expect_identical_html(
    md = c(
      "foo", "*", "", "foo", "1."
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo",
      "*</p>", "<p>foo", "1.</p>"
    )
  )
})

test_that("spec - Ex 286 (L4724-4741) - List items", {
  expect_identical_html(
    md = c(
      " 1.  A paragraph",
      "     with two lines.", "",
      "         indented code",
      "", "     > A block quote."
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ol>", "<li>",
      "<p>A paragraph",
      "with two lines.</p>",
      "<pre><code>indented code",
      "</code></pre>",
      "<blockquote>",
      "<p>A block quote.</p>",
      "</blockquote>", "</li>",
      "</ol>"
    )
  )
})

test_that("spec - Ex 287 (L4748-4765) - List items", {
  expect_identical_html(
    md = c(
      "  1.  A paragraph",
      "      with two lines.", "",
      "          indented code",
      "",
      "      > A block quote."
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ol>", "<li>",
      "<p>A paragraph",
      "with two lines.</p>",
      "<pre><code>indented code",
      "</code></pre>",
      "<blockquote>",
      "<p>A block quote.</p>",
      "</blockquote>", "</li>",
      "</ol>"
    )
  )
})

test_that("spec - Ex 288 (L4772-4789) - List items", {
  expect_identical_html(
    md = c(
      "   1.  A paragraph",
      "       with two lines.",
      "",
      "           indented code",
      "",
      "       > A block quote."
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ol>", "<li>",
      "<p>A paragraph",
      "with two lines.</p>",
      "<pre><code>indented code",
      "</code></pre>",
      "<blockquote>",
      "<p>A block quote.</p>",
      "</blockquote>", "</li>",
      "</ol>"
    )
  )
})

test_that("spec - Ex 289 (L4796-4809) - List items", {
  expect_identical_html(
    md = c(
      "    1.  A paragraph",
      "        with two lines.",
      "",
      "            indented code",
      "",
      "        > A block quote."
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<pre><code>1.  A paragraph",
      "    with two lines.", "",
      "        indented code", "",
      "    &gt; A block quote.",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 290 (L4826-4843) - List items", {
  expect_identical_html(
    md = c(
      "  1.  A paragraph",
      "with two lines.", "",
      "          indented code",
      "",
      "      > A block quote."
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ol>", "<li>",
      "<p>A paragraph",
      "with two lines.</p>",
      "<pre><code>indented code",
      "</code></pre>",
      "<blockquote>",
      "<p>A block quote.</p>",
      "</blockquote>", "</li>",
      "</ol>"
    )
  )
})

test_that("spec - Ex 291 (L4850-4856) - List items", {
  expect_identical_html(
    md = c(
      "  1.  A paragraph",
      "    with two lines."
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ol>",
      "<li>A paragraph",
      "with two lines.</li>",
      "</ol>"
    )
  )
})

test_that("spec - Ex 292 (L4863-4875) - List items", {
  expect_identical_html(
    md = c(
      "> 1. > Blockquote",
      "continued here."
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "<ol>", "<li>",
      "<blockquote>",
      "<p>Blockquote",
      "continued here.</p>",
      "</blockquote>", "</li>",
      "</ol>", "</blockquote>"
    )
  )
})

test_that("spec - Ex 293 (L4880-4892) - List items", {
  expect_identical_html(
    md = c(
      "> 1. > Blockquote",
      "> continued here."
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<blockquote>",
      "<ol>", "<li>",
      "<blockquote>",
      "<p>Blockquote",
      "continued here.</p>",
      "</blockquote>", "</li>",
      "</ol>", "</blockquote>"
    )
  )
})

test_that("spec - Ex 294 (L4908-4927) - List items", {
  expect_identical_html(
    md = c(
      "- foo", "  - bar",
      "    - baz", "      - boo"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>",
      "<li>foo", "<ul>",
      "<li>bar", "<ul>",
      "<li>baz", "<ul>",
      "<li>boo</li>", "</ul>",
      "</li>", "</ul>", "</li>",
      "</ul>", "</li>", "</ul>"
    )
  )
})

test_that("spec - Ex 295 (L4934-4944) - List items", {
  expect_identical_html(
    md = c(
      "- foo", " - bar",
      "  - baz", "   - boo"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>",
      "<li>foo</li>",
      "<li>bar</li>",
      "<li>baz</li>",
      "<li>boo</li>", "</ul>"
    )
  )
})

test_that("spec - Ex 296 (L4951-4960) - List items", {
  expect_identical_html(
    md = c(
      "10) foo", "    - bar"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ol start=\"10\">",
      "<li>foo", "<ul>",
      "<li>bar</li>", "</ul>",
      "</li>", "</ol>"
    )
  )
})

test_that("spec - Ex 297 (L4967-4975) - List items", {
  expect_identical_html(
    md = c(
      "10) foo", "   - bar"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ol start=\"10\">",
      "<li>foo</li>", "</ol>",
      "<ul>", "<li>bar</li>",
      "</ul>"
    )
  )
})

test_that("spec - Ex 298 (L4982-4990) - List items", {
  expect_identical_html(
    md = c(
      "- - foo\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>", "<li>",
      "<ul>", "<li>foo</li>",
      "</ul>", "</li>", "</ul>"
    )
  )
})

test_that("spec - Ex 299 (L4995-5007) - List items", {
  expect_identical_html(
    md = c(
      "1. - 2. foo\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ol>", "<li>",
      "<ul>", "<li>",
      "<ol start=\"2\">",
      "<li>foo</li>", "</ol>",
      "</li>", "</ul>", "</li>",
      "</ol>"
    )
  )
})

test_that("spec - Ex 300 (L5014-5026) - List items", {
  expect_identical_html(
    md = c(
      "- # Foo", "- Bar", "  ---",
      "  baz"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>", "<li>",
      "<h1>Foo</h1>", "</li>",
      "<li>", "<h2>Bar</h2>",
      "baz</li>", "</ul>"
    )
  )
})

test_that("spec - Ex 301 (L5250-5260) - Lists", {
  expect_identical_html(
    md = c(
      "- foo", "- bar", "+ baz"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>",
      "<li>foo</li>",
      "<li>bar</li>", "</ul>",
      "<ul>", "<li>baz</li>",
      "</ul>"
    )
  )
})

test_that("spec - Ex 302 (L5265-5275) - Lists", {
  expect_identical_html(
    md = c(
      "1. foo", "2. bar",
      "3) baz"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ol>",
      "<li>foo</li>",
      "<li>bar</li>", "</ol>",
      "<ol start=\"3\">",
      "<li>baz</li>", "</ol>"
    )
  )
})

test_that("spec - Ex 303 (L5284-5292) - Lists", {
  expect_identical_html(
    md = c(
      "Foo", "- bar", "- baz"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>Foo</p>",
      "<ul>", "<li>bar</li>",
      "<li>baz</li>", "</ul>"
    )
  )
})

test_that("spec - Ex 304 (L5361-5365) - Lists", {
  expect_identical_html(
    md = c(
      "The number of windows in my house is",
      "14.  The number of doors is 6."
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>The number of windows in my house is",
      "14.  The number of doors is 6.</p>"
    )
  )
})

test_that("spec - Ex 305 (L5371-5377) - Lists", {
  expect_identical_html(
    md = c(
      "The number of windows in my house is",
      "1.  The number of doors is 6."
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>The number of windows in my house is</p>",
      "<ol>",
      "<li>The number of doors is 6.</li>",
      "</ol>"
    )
  )
})

test_that("spec - Ex 306 (L5385-5402) - Lists", {
  expect_identical_html(
    md = c(
      "- foo", "", "- bar", "",
      "", "- baz"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>", "<li>",
      "<p>foo</p>", "</li>",
      "<li>", "<p>bar</p>",
      "</li>", "<li>",
      "<p>baz</p>", "</li>",
      "</ul>"
    )
  )
})

test_that("spec - Ex 307 (L5406-5426) - Lists", {
  expect_identical_html(
    md = c(
      "- foo", "  - bar",
      "    - baz", "", "",
      "      bim"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>",
      "<li>foo", "<ul>",
      "<li>bar", "<ul>", "<li>",
      "<p>baz</p>", "<p>bim</p>",
      "</li>", "</ul>", "</li>",
      "</ul>", "</li>", "</ul>"
    )
  )
})

test_that("spec - Ex 308 (L5436-5452) - Lists", {
  expect_identical_html(
    md = c(
      "- foo", "- bar", "",
      "<!-- -->", "", "- baz",
      "- bim"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>",
      "<li>foo</li>",
      "<li>bar</li>", "</ul>",
      "<!-- -->", "<ul>",
      "<li>baz</li>",
      "<li>bim</li>", "</ul>"
    )
  )
})

test_that("spec - Ex 309 (L5457-5478) - Lists", {
  expect_identical_html(
    md = c(
      "-   foo", "",
      "    notcode", "",
      "-   foo", "", "<!-- -->",
      "", "    code"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>", "<li>",
      "<p>foo</p>",
      "<p>notcode</p>", "</li>",
      "<li>", "<p>foo</p>",
      "</li>", "</ul>",
      "<!-- -->",
      "<pre><code>code",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 310 (L5488-5504) - Lists", {
  expect_identical_html(
    md = c(
      "- a", " - b", "  - c",
      "   - d", "  - e", " - f",
      "- g"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>",
      "<li>a</li>", "<li>b</li>",
      "<li>c</li>", "<li>d</li>",
      "<li>e</li>", "<li>f</li>",
      "<li>g</li>", "</ul>"
    )
  )
})

test_that("spec - Ex 311 (L5509-5525) - Lists", {
  expect_identical_html(
    md = c(
      "1. a", "", "  2. b", "",
      "   3. c"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ol>", "<li>",
      "<p>a</p>", "</li>", "<li>",
      "<p>b</p>", "</li>", "<li>",
      "<p>c</p>", "</li>",
      "</ol>"
    )
  )
})

test_that("spec - Ex 312 (L5533-5545) - Lists", {
  expect_identical_html(
    md = c(
      "- a", " - b", "  - c",
      "   - d", "    - e"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>",
      "<li>a</li>", "<li>b</li>",
      "<li>c</li>", "<li>d",
      "- e</li>", "</ul>"
    )
  )
})

test_that("spec - Ex 313 (L5553-5568) - Lists", {
  expect_identical_html(
    md = c(
      "1. a", "", "  2. b", "",
      "    3. c"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ol>", "<li>",
      "<p>a</p>", "</li>", "<li>",
      "<p>b</p>", "</li>",
      "</ol>", "<pre><code>3. c",
      "</code></pre>"
    )
  )
})

test_that("spec - Ex 314 (L5576-5591) - Lists", {
  expect_identical_html(
    md = c(
      "- a", "- b", "", "- c"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>", "<li>",
      "<p>a</p>", "</li>", "<li>",
      "<p>b</p>", "</li>", "<li>",
      "<p>c</p>", "</li>",
      "</ul>"
    )
  )
})

test_that("spec - Ex 315 (L5598-5611) - Lists", {
  expect_identical_html(
    md = c(
      "* a", "*", "", "* c"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>", "<li>",
      "<p>a</p>", "</li>",
      "<li></li>", "<li>",
      "<p>c</p>", "</li>",
      "</ul>"
    )
  )
})

test_that("spec - Ex 316 (L5620-5637) - Lists", {
  expect_identical_html(
    md = c(
      "- a", "- b", "", "  c",
      "- d"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>", "<li>",
      "<p>a</p>", "</li>", "<li>",
      "<p>b</p>", "<p>c</p>",
      "</li>", "<li>", "<p>d</p>",
      "</li>", "</ul>"
    )
  )
})

test_that("spec - Ex 317 (L5642-5658) - Lists", {
  expect_identical_html(
    md = c(
      "- a", "- b", "",
      "  [ref]: /url", "- d"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>", "<li>",
      "<p>a</p>", "</li>", "<li>",
      "<p>b</p>", "</li>", "<li>",
      "<p>d</p>", "</li>",
      "</ul>"
    )
  )
})

test_that("spec - Ex 318 (L5665-5682) - Lists", {
  expect_identical_html(
    md = c(
      "- a", "- ```", "  b", "",
      "", "  ```", "- c"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>",
      "<li>a</li>", "<li>",
      "<pre><code>b", "", "",
      "</code></pre>", "</li>",
      "<li>c</li>", "</ul>"
    )
  )
})

test_that("spec - Ex 319 (L5691-5707) - Lists", {
  expect_identical_html(
    md = c(
      "- a", "  - b", "", "    c",
      "- d"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>", "<li>a",
      "<ul>", "<li>", "<p>b</p>",
      "<p>c</p>", "</li>",
      "</ul>", "</li>",
      "<li>d</li>", "</ul>"
    )
  )
})

test_that("spec - Ex 320 (L5715-5727) - Lists", {
  expect_identical_html(
    md = c(
      "* a", "  > b", "  >",
      "* c"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>", "<li>a",
      "<blockquote>", "<p>b</p>",
      "</blockquote>", "</li>",
      "<li>c</li>", "</ul>"
    )
  )
})

test_that("spec - Ex 321 (L5735-5751) - Lists", {
  expect_identical_html(
    md = c(
      "- a", "  > b", "  ```",
      "  c", "  ```", "- d"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>", "<li>a",
      "<blockquote>", "<p>b</p>",
      "</blockquote>",
      "<pre><code>c",
      "</code></pre>", "</li>",
      "<li>d</li>", "</ul>"
    )
  )
})

test_that("spec - Ex 322 (L5758-5762) - Lists", {
  expect_identical_html(
    md = c(
      "- a\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>",
      "<li>a</li>", "</ul>"
    )
  )
})

test_that("spec - Ex 323 (L5767-5776) - Lists", {
  expect_identical_html(
    md = c(
      "- a", "  - b"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>", "<li>a",
      "<ul>", "<li>b</li>",
      "</ul>", "</li>", "</ul>"
    )
  )
})

test_that("spec - Ex 324 (L5784-5796) - Lists", {
  expect_identical_html(
    md = c(
      "1. ```", "   foo",
      "   ```", "", "   bar"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ol>", "<li>",
      "<pre><code>foo",
      "</code></pre>",
      "<p>bar</p>", "</li>",
      "</ol>"
    )
  )
})

test_that("spec - Ex 325 (L5803-5816) - Lists", {
  expect_identical_html(
    md = c(
      "* foo", "  * bar", "",
      "  baz"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>", "<li>",
      "<p>foo</p>", "<ul>",
      "<li>bar</li>", "</ul>",
      "<p>baz</p>", "</li>",
      "</ul>"
    )
  )
})

test_that("spec - Ex 326 (L5821-5844) - Lists", {
  expect_identical_html(
    md = c(
      "- a", "  - b", "  - c", "",
      "- d", "  - e", "  - f"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<ul>", "<li>",
      "<p>a</p>", "<ul>",
      "<li>b</li>", "<li>c</li>",
      "</ul>", "</li>", "<li>",
      "<p>d</p>", "<ul>",
      "<li>e</li>", "<li>f</li>",
      "</ul>", "</li>", "</ul>"
    )
  )
})

test_that("spec - Ex 327 (L5855-5857) - Inlines", {
  expect_identical_html(
    md = c(
      "`hi`lo`\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><code>hi</code>lo`</p>"
    )
  )
})

test_that("spec - Ex 328 (L5887-5889) - Code spans", {
  expect_identical_html(
    md = c(
      "`foo`\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><code>foo</code></p>"
    )
  )
})

test_that("spec - Ex 329 (L5898-5900) - Code spans", {
  expect_identical_html(
    md = c(
      "`` foo ` bar ``\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><code>foo ` bar</code></p>"
    )
  )
})

test_that("spec - Ex 330 (L5908-5910) - Code spans", {
  expect_identical_html(
    md = c(
      "` `` `\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><code>``</code></p>"
    )
  )
})

test_that("spec - Ex 331 (L5916-5918) - Code spans", {
  expect_identical_html(
    md = c(
      "`  ``  `\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><code> `` </code></p>"
    )
  )
})

test_that("spec - Ex 332 (L5925-5927) - Code spans", {
  expect_identical_html(
    md = c(
      "` a`\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><code> a</code></p>"
    )
  )
})

test_that("spec - Ex 333 (L5934-5936) - Code spans", {
  expect_identical_html(
    md = c(
      "`¬†b¬†`\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><code>¬†b¬†</code></p>"
    )
  )
})

test_that("spec - Ex 334 (L5942-5946) - Code spans", {
  expect_identical_html(
    md = c(
      "`¬†`", "`  `"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><code>¬†</code>",
      "<code>  </code></p>"
    )
  )
})

test_that("spec - Ex 335 (L5953-5959) - Code spans", {
  testthat::skip("spec #335 - Slight spacing discrepancy in the span output")
  expect_identical_html(
    md = c(
      "``", "foo", "bar  ", "baz",
      "``"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><code>foo bar   baz</code></p>"
    )
  )
})

test_that("spec - Ex 336 (L5963-5967) - Code spans", {
  expect_identical_html(
    md = c(
      "``", "foo ", "``"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><code>foo </code></p>"
    )
  )
})

test_that("spec - Ex 337 (L5974-5977) - Code spans", {
  testthat::skip("spec #337 - Slight spacing discrepancy in the span output")
  expect_identical_html(
    md = c(
      "`foo   bar ", "baz`"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><code>foo   bar  baz</code></p>"
    )
  )
})

test_that("spec - Ex 338 (L5991-5993) - Code spans", {
  expect_identical_html(
    md = c(
      "`foo\\`bar`\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><code>foo\\</code>bar`</p>"
    )
  )
})

test_that("spec - Ex 339 (L6002-6004) - Code spans", {
  expect_identical_html(
    md = c(
      "``foo`bar``\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><code>foo`bar</code></p>"
    )
  )
})

test_that("spec - Ex 340 (L6008-6010) - Code spans", {
  expect_identical_html(
    md = c(
      "` foo `` bar `\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><code>foo `` bar</code></p>"
    )
  )
})

test_that("spec - Ex 341 (L6020-6022) - Code spans", {
  expect_identical_html(
    md = c(
      "*foo`*`\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>*foo<code>*</code></p>"
    )
  )
})

test_that("spec - Ex 342 (L6029-6031) - Code spans", {
  expect_identical_html(
    md = c(
      "[not a `link](/foo`)\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[not a <code>link](/foo</code>)</p>"
    )
  )
})

test_that("spec - Ex 343 (L6039-6041) - Code spans", {
  expect_identical_html(
    md = c(
      "`<a href=\"`\">`\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><code>&lt;a href=&quot;</code>&quot;&gt;`</p>"
    )
  )
})

test_that("spec - Ex 344 (L6048-6050) - Code spans", {
  expect_identical_html(
    md = c(
      "<a href=\"`\">`\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"`\">`</p>"
    )
  )
})

test_that("spec - Ex 345 (L6057-6059) - Code spans", {
  expect_identical_html(
    md = c(
      "`<https://foo.bar.`baz>`\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><code>&lt;https://foo.bar.</code>baz&gt;`</p>"
    )
  )
})

test_that("spec - Ex 346 (L6066-6068) - Code spans", {
  expect_identical_html(
    md = c(
      "<https://foo.bar.`baz>`\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"https://foo.bar.%60baz\">https://foo.bar.`baz</a>`</p>"
    )
  )
})

test_that("spec - Ex 347 (L6076-6078) - Code spans", {
  expect_identical_html(
    md = c(
      "```foo``\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>```foo``</p>"
    )
  )
})

test_that("spec - Ex 348 (L6083-6085) - Code spans", {
  expect_identical_html(
    md = c(
      "`foo\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<p>`foo</p>")
  )
})

test_that("spec - Ex 349 (L6092-6094) - Code spans", {
  expect_identical_html(
    md = c(
      "`foo``bar``\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>`foo<code>bar</code></p>"
    )
  )
})

test_that("spec - Ex 350 (L6309-6311) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "*foo bar*\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>foo bar</em></p>"
    )
  )
})

test_that("spec - Ex 351 (L6319-6321) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "a * foo bar*\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>a * foo bar*</p>"
    )
  )
})

test_that("spec - Ex 352 (L6330-6332) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "a*\"foo\"*\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>a*&quot;foo&quot;*</p>"
    )
  )
})

test_that("spec - Ex 353 (L6339-6341) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "*¬†a¬†*\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<p>*¬†a¬†*</p>")
  )
})

test_that("spec - Ex 354 (L6348-6356) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "*$*alpha.", "",
      "*¬£*bravo.", "",
      "*‚Ç¨*charlie."
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>*$*alpha.</p>",
      "<p>*¬£*bravo.</p>",
      "<p>*‚Ç¨*charlie.</p>"
    )
  )
})

test_that("spec - Ex 355 (L6363-6365) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "foo*bar*\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo<em>bar</em></p>"
    )
  )
})

test_that("spec - Ex 356 (L6370-6372) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "5*6*78\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>5<em>6</em>78</p>"
    )
  )
})

test_that("spec - Ex 357 (L6379-6381) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "_foo bar_\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>foo bar</em></p>"
    )
  )
})

test_that("spec - Ex 358 (L6389-6391) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "_ foo bar_\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>_ foo bar_</p>"
    )
  )
})

test_that("spec - Ex 359 (L6399-6401) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "a_\"foo\"_\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>a_&quot;foo&quot;_</p>"
    )
  )
})

test_that("spec - Ex 360 (L6408-6410) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "foo_bar_\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo_bar_</p>"
    )
  )
})

test_that("spec - Ex 361 (L6415-6417) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "5_6_78\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<p>5_6_78</p>")
  )
})

test_that("spec - Ex 362 (L6422-6424) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "–ø—Ä–∏—Å—Ç–∞–Ω—è–º_—Å—Ç—Ä–µ–º—è—Ç—Å—è_\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>–ø—Ä–∏—Å—Ç–∞–Ω—è–º_—Å—Ç—Ä–µ–º—è—Ç—Å—è_</p>"
    )
  )
})

test_that("spec - Ex 363 (L6432-6434) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "aa_\"bb\"_cc\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>aa_&quot;bb&quot;_cc</p>"
    )
  )
})

test_that("spec - Ex 364 (L6443-6445) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "foo-_(bar)_\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo-<em>(bar)</em></p>"
    )
  )
})

test_that("spec - Ex 365 (L6455-6457) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "_foo*\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<p>_foo*</p>")
  )
})

test_that("spec - Ex 366 (L6465-6467) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "*foo bar *\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>*foo bar *</p>"
    )
  )
})

test_that("spec - Ex 367 (L6474-6478) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "*foo bar", "*"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>*foo bar",
      "*</p>"
    )
  )
})

test_that("spec - Ex 368 (L6487-6489) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "*(*foo)\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<p>*(*foo)</p>")
  )
})

test_that("spec - Ex 369 (L6497-6499) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "*(*foo*)*\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>(<em>foo</em>)</em></p>"
    )
  )
})

test_that("spec - Ex 370 (L6506-6508) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "*foo*bar\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>foo</em>bar</p>"
    )
  )
})

test_that("spec - Ex 371 (L6519-6521) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "_foo bar _\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>_foo bar _</p>"
    )
  )
})

test_that("spec - Ex 372 (L6529-6531) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "_(_foo)\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<p>_(_foo)</p>")
  )
})

test_that("spec - Ex 373 (L6538-6540) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "_(_foo_)_\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>(<em>foo</em>)</em></p>"
    )
  )
})

test_that("spec - Ex 374 (L6547-6549) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "_foo_bar\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>_foo_bar</p>"
    )
  )
})

test_that("spec - Ex 375 (L6554-6556) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "_–ø—Ä–∏—Å—Ç–∞–Ω—è–º_—Å—Ç—Ä–µ–º—è—Ç—Å—è\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>_–ø—Ä–∏—Å—Ç–∞–Ω—è–º_—Å—Ç—Ä–µ–º—è—Ç—Å—è</p>"
    )
  )
})

test_that("spec - Ex 376 (L6561-6563) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "_foo_bar_baz_\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>foo_bar_baz</em></p>"
    )
  )
})

test_that("spec - Ex 377 (L6572-6574) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "_(bar)_.\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>(bar)</em>.</p>"
    )
  )
})

test_that("spec - Ex 378 (L6581-6583) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "**foo bar**\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><strong>foo bar</strong></p>"
    )
  )
})

test_that("spec - Ex 379 (L6591-6593) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "** foo bar**\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>** foo bar**</p>"
    )
  )
})

test_that("spec - Ex 380 (L6602-6604) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "a**\"foo\"**\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>a**&quot;foo&quot;**</p>"
    )
  )
})

test_that("spec - Ex 381 (L6611-6613) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "foo**bar**\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo<strong>bar</strong></p>"
    )
  )
})

test_that("spec - Ex 382 (L6620-6622) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "__foo bar__\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><strong>foo bar</strong></p>"
    )
  )
})

test_that("spec - Ex 383 (L6630-6632) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "__ foo bar__\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>__ foo bar__</p>"
    )
  )
})

test_that("spec - Ex 384 (L6638-6642) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "__", "foo bar__"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>__",
      "foo bar__</p>"
    )
  )
})

test_that("spec - Ex 385 (L6650-6652) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "a__\"foo\"__\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>a__&quot;foo&quot;__</p>"
    )
  )
})

test_that("spec - Ex 386 (L6659-6661) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "foo__bar__\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo__bar__</p>"
    )
  )
})

test_that("spec - Ex 387 (L6666-6668) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "5__6__78\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>5__6__78</p>"
    )
  )
})

test_that("spec - Ex 388 (L6673-6675) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "–ø—Ä–∏—Å—Ç–∞–Ω—è–º__—Å—Ç—Ä–µ–º—è—Ç—Å—è__\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>–ø—Ä–∏—Å—Ç–∞–Ω—è–º__—Å—Ç—Ä–µ–º—è—Ç—Å—è__</p>"
    )
  )
})

test_that("spec - Ex 389 (L6680-6682) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "__foo, __bar__, baz__\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><strong>foo, <strong>bar</strong>, baz</strong></p>"
    )
  )
})

test_that("spec - Ex 390 (L6691-6693) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "foo-__(bar)__\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo-<strong>(bar)</strong></p>"
    )
  )
})

test_that("spec - Ex 391 (L6704-6706) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "**foo bar **\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>**foo bar **</p>"
    )
  )
})

test_that("spec - Ex 392 (L6717-6719) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "**(**foo)\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>**(**foo)</p>"
    )
  )
})

test_that("spec - Ex 393 (L6727-6729) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "*(**foo**)*\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>(<strong>foo</strong>)</em></p>"
    )
  )
})

test_that("spec - Ex 394 (L6734-6738) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "**Gomphocarpus (*Gomphocarpus physocarpus*, syn.",
      "*Asclepias physocarpa*)**"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><strong>Gomphocarpus (<em>Gomphocarpus physocarpus</em>, syn.",
      "<em>Asclepias physocarpa</em>)</strong></p>"
    )
  )
})

test_that("spec - Ex 395 (L6743-6745) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "**foo \"*bar*\" foo**\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><strong>foo &quot;<em>bar</em>&quot; foo</strong></p>"
    )
  )
})

test_that("spec - Ex 396 (L6752-6754) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "**foo**bar\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><strong>foo</strong>bar</p>"
    )
  )
})

test_that("spec - Ex 397 (L6764-6766) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "__foo bar __\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>__foo bar __</p>"
    )
  )
})

test_that("spec - Ex 398 (L6774-6776) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "__(__foo)\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>__(__foo)</p>"
    )
  )
})

test_that("spec - Ex 399 (L6784-6786) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "_(__foo__)_\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>(<strong>foo</strong>)</em></p>"
    )
  )
})

test_that("spec - Ex 400 (L6793-6795) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "__foo__bar\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>__foo__bar</p>"
    )
  )
})

test_that("spec - Ex 401 (L6800-6802) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "__–ø—Ä–∏—Å—Ç–∞–Ω—è–º__—Å—Ç—Ä–µ–º—è—Ç—Å—è\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>__–ø—Ä–∏—Å—Ç–∞–Ω—è–º__—Å—Ç—Ä–µ–º—è—Ç—Å—è</p>"
    )
  )
})

test_that("spec - Ex 402 (L6807-6809) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "__foo__bar__baz__\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><strong>foo__bar__baz</strong></p>"
    )
  )
})

test_that("spec - Ex 403 (L6818-6820) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "__(bar)__.\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><strong>(bar)</strong>.</p>"
    )
  )
})

test_that("spec - Ex 404 (L6830-6832) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "*foo [bar](/url)*\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>foo <a href=\"/url\">bar</a></em></p>"
    )
  )
})

test_that("spec - Ex 405 (L6837-6841) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "*foo", "bar*"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>foo",
      "bar</em></p>"
    )
  )
})

test_that("spec - Ex 406 (L6849-6851) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "_foo __bar__ baz_\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>foo <strong>bar</strong> baz</em></p>"
    )
  )
})

test_that("spec - Ex 407 (L6856-6858) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "_foo _bar_ baz_\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>foo <em>bar</em> baz</em></p>"
    )
  )
})

test_that("spec - Ex 408 (L6863-6865) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "__foo_ bar_\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em><em>foo</em> bar</em></p>"
    )
  )
})

test_that("spec - Ex 409 (L6870-6872) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "*foo *bar**\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>foo <em>bar</em></em></p>"
    )
  )
})

test_that("spec - Ex 410 (L6877-6879) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "*foo **bar** baz*\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>foo <strong>bar</strong> baz</em></p>"
    )
  )
})

test_that("spec - Ex 411 (L6883-6885) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "*foo**bar**baz*\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>foo<strong>bar</strong>baz</em></p>"
    )
  )
})

test_that("spec - Ex 412 (L6907-6909) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "*foo**bar*\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>foo**bar</em></p>"
    )
  )
})

test_that("spec - Ex 413 (L6920-6922) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "***foo** bar*\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em><strong>foo</strong> bar</em></p>"
    )
  )
})

test_that("spec - Ex 414 (L6927-6929) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "*foo **bar***\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>foo <strong>bar</strong></em></p>"
    )
  )
})

test_that("spec - Ex 415 (L6934-6936) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "*foo**bar***\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>foo<strong>bar</strong></em></p>"
    )
  )
})

test_that("spec - Ex 416 (L6945-6947) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "foo***bar***baz\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo<em><strong>bar</strong></em>baz</p>"
    )
  )
})

test_that("spec - Ex 417 (L6951-6953) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "foo******bar*********baz\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo<strong><strong><strong>bar</strong></strong></strong>***baz</p>"
    )
  )
})

test_that("spec - Ex 418 (L6960-6962) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "*foo **bar *baz* bim** bop*\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>foo <strong>bar <em>baz</em> bim</strong> bop</em></p>"
    )
  )
})

test_that("spec - Ex 419 (L6967-6969) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "*foo [*bar*](/url)*\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>foo <a href=\"/url\"><em>bar</em></a></em></p>"
    )
  )
})

test_that("spec - Ex 420 (L6976-6978) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "** is not an empty emphasis\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>** is not an empty emphasis</p>"
    )
  )
})

test_that("spec - Ex 421 (L6983-6985) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "**** is not an empty strong emphasis\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>**** is not an empty strong emphasis</p>"
    )
  )
})

test_that("spec - Ex 422 (L6996-6998) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "**foo [bar](/url)**\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><strong>foo <a href=\"/url\">bar</a></strong></p>"
    )
  )
})

test_that("spec - Ex 423 (L7003-7007) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "**foo", "bar**"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><strong>foo",
      "bar</strong></p>"
    )
  )
})

test_that("spec - Ex 424 (L7015-7017) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "__foo _bar_ baz__\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><strong>foo <em>bar</em> baz</strong></p>"
    )
  )
})

test_that("spec - Ex 425 (L7022-7024) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "__foo __bar__ baz__\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><strong>foo <strong>bar</strong> baz</strong></p>"
    )
  )
})

test_that("spec - Ex 426 (L7029-7031) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "____foo__ bar__\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><strong><strong>foo</strong> bar</strong></p>"
    )
  )
})

test_that("spec - Ex 427 (L7036-7038) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "**foo **bar****\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><strong>foo <strong>bar</strong></strong></p>"
    )
  )
})

test_that("spec - Ex 428 (L7043-7045) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "**foo *bar* baz**\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><strong>foo <em>bar</em> baz</strong></p>"
    )
  )
})

test_that("spec - Ex 429 (L7050-7052) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "**foo*bar*baz**\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><strong>foo<em>bar</em>baz</strong></p>"
    )
  )
})

test_that("spec - Ex 430 (L7057-7059) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "***foo* bar**\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><strong><em>foo</em> bar</strong></p>"
    )
  )
})

test_that("spec - Ex 431 (L7064-7066) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "**foo *bar***\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><strong>foo <em>bar</em></strong></p>"
    )
  )
})

test_that("spec - Ex 432 (L7073-7077) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "**foo *bar **baz**",
      "bim* bop**"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><strong>foo <em>bar <strong>baz</strong>",
      "bim</em> bop</strong></p>"
    )
  )
})

test_that("spec - Ex 433 (L7082-7084) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "**foo [*bar*](/url)**\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><strong>foo <a href=\"/url\"><em>bar</em></a></strong></p>"
    )
  )
})

test_that("spec - Ex 434 (L7091-7093) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "__ is not an empty emphasis\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>__ is not an empty emphasis</p>"
    )
  )
})

test_that("spec - Ex 435 (L7098-7100) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "____ is not an empty strong emphasis\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>____ is not an empty strong emphasis</p>"
    )
  )
})

test_that("spec - Ex 436 (L7108-7110) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "foo ***\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<p>foo ***</p>")
  )
})

test_that("spec - Ex 437 (L7115-7117) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "foo *\\**\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo <em>*</em></p>"
    )
  )
})

test_that("spec - Ex 438 (L7122-7124) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "foo *_*\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo <em>_</em></p>"
    )
  )
})

test_that("spec - Ex 439 (L7129-7131) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "foo *****\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo *****</p>"
    )
  )
})

test_that("spec - Ex 440 (L7136-7138) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "foo **\\***\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo <strong>*</strong></p>"
    )
  )
})

test_that("spec - Ex 441 (L7143-7145) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "foo **_**\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo <strong>_</strong></p>"
    )
  )
})

test_that("spec - Ex 442 (L7154-7156) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "**foo*\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>*<em>foo</em></p>"
    )
  )
})

test_that("spec - Ex 443 (L7161-7163) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "*foo**\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>foo</em>*</p>"
    )
  )
})

test_that("spec - Ex 444 (L7168-7170) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "***foo**\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>*<strong>foo</strong></p>"
    )
  )
})

test_that("spec - Ex 445 (L7175-7177) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "****foo*\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>***<em>foo</em></p>"
    )
  )
})

test_that("spec - Ex 446 (L7182-7184) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "**foo***\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><strong>foo</strong>*</p>"
    )
  )
})

test_that("spec - Ex 447 (L7189-7191) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "*foo****\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>foo</em>***</p>"
    )
  )
})

test_that("spec - Ex 448 (L7199-7201) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "foo ___\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<p>foo ___</p>")
  )
})

test_that("spec - Ex 449 (L7206-7208) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "foo _\\__\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo <em>_</em></p>"
    )
  )
})

test_that("spec - Ex 450 (L7213-7215) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "foo _*_\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo <em>*</em></p>"
    )
  )
})

test_that("spec - Ex 451 (L7220-7222) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "foo _____\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo _____</p>"
    )
  )
})

test_that("spec - Ex 452 (L7227-7229) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "foo __\\___\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo <strong>_</strong></p>"
    )
  )
})

test_that("spec - Ex 453 (L7234-7236) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "foo __*__\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo <strong>*</strong></p>"
    )
  )
})

test_that("spec - Ex 454 (L7241-7243) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "__foo_\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>_<em>foo</em></p>"
    )
  )
})

test_that("spec - Ex 455 (L7252-7254) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "_foo__\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>foo</em>_</p>"
    )
  )
})

test_that("spec - Ex 456 (L7259-7261) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "___foo__\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>_<strong>foo</strong></p>"
    )
  )
})

test_that("spec - Ex 457 (L7266-7268) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "____foo_\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>___<em>foo</em></p>"
    )
  )
})

test_that("spec - Ex 458 (L7273-7275) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "__foo___\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><strong>foo</strong>_</p>"
    )
  )
})

test_that("spec - Ex 459 (L7280-7282) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "_foo____\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>foo</em>___</p>"
    )
  )
})

test_that("spec - Ex 460 (L7290-7292) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "**foo**\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><strong>foo</strong></p>"
    )
  )
})

test_that("spec - Ex 461 (L7297-7299) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "*_foo_*\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em><em>foo</em></em></p>"
    )
  )
})

test_that("spec - Ex 462 (L7304-7306) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "__foo__\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><strong>foo</strong></p>"
    )
  )
})

test_that("spec - Ex 463 (L7311-7313) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "_*foo*_\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em><em>foo</em></em></p>"
    )
  )
})

test_that("spec - Ex 464 (L7321-7323) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "****foo****\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><strong><strong>foo</strong></strong></p>"
    )
  )
})

test_that("spec - Ex 465 (L7328-7330) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "____foo____\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><strong><strong>foo</strong></strong></p>"
    )
  )
})

test_that("spec - Ex 466 (L7339-7341) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "******foo******\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><strong><strong><strong>foo</strong></strong></strong></p>"
    )
  )
})

test_that("spec - Ex 467 (L7348-7350) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "***foo***\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em><strong>foo</strong></em></p>"
    )
  )
})

test_that("spec - Ex 468 (L7355-7357) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "_____foo_____\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em><strong><strong>foo</strong></strong></em></p>"
    )
  )
})

test_that("spec - Ex 469 (L7364-7366) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "*foo _bar* baz_\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>foo _bar</em> baz_</p>"
    )
  )
})

test_that("spec - Ex 470 (L7371-7373) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "*foo __bar *baz bim__ bam*\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>foo <strong>bar *baz bim</strong> bam</em></p>"
    )
  )
})

test_that("spec - Ex 471 (L7380-7382) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "**foo **bar baz**\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>**foo <strong>bar baz</strong></p>"
    )
  )
})

test_that("spec - Ex 472 (L7387-7389) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "*foo *bar baz*\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>*foo <em>bar baz</em></p>"
    )
  )
})

test_that("spec - Ex 473 (L7396-7398) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "*[bar*](/url)\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>*<a href=\"/url\">bar*</a></p>"
    )
  )
})

test_that("spec - Ex 474 (L7403-7405) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "_foo [bar_](/url)\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>_foo <a href=\"/url\">bar_</a></p>"
    )
  )
})

test_that("spec - Ex 475 (L7410-7412) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "*<img src=\"foo\" title=\"*\"/>\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>*<img src=\"foo\" title=\"*\"/></p>"
    )
  )
})

test_that("spec - Ex 476 (L7417-7419) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "**<a href=\"**\">\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>**<a href=\"**\"></p>"
    )
  )
})

test_that("spec - Ex 477 (L7424-7426) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "__<a href=\"__\">\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>__<a href=\"__\"></p>"
    )
  )
})

test_that("spec - Ex 478 (L7431-7433) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "*a `*`*\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>a <code>*</code></em></p>"
    )
  )
})

test_that("spec - Ex 479 (L7438-7440) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "_a `_`_\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>a <code>_</code></em></p>"
    )
  )
})

test_that("spec - Ex 480 (L7445-7447) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "**a<https://foo.bar/?q=**>\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>**a<a href=\"https://foo.bar/?q=**\">https://foo.bar/?q=**</a></p>"
    )
  )
})

test_that("spec - Ex 481 (L7452-7454) - Emphasis and strong emphasis", {
  expect_identical_html(
    md = c(
      "__a<https://foo.bar/?q=__>\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>__a<a href=\"https://foo.bar/?q=__\">https://foo.bar/?q=__</a></p>"
    )
  )
})

test_that("spec - Ex 482 (L7540-7542) - Links", {
  expect_identical_html(
    md = c(
      "[link](/uri \"title\")\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/uri\" title=\"title\">link</a></p>"
    )
  )
})

test_that("spec - Ex 483 (L7550-7552) - Links", {
  expect_identical_html(
    md = c(
      "[link](/uri)\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/uri\">link</a></p>"
    )
  )
})

test_that("spec - Ex 484 (L7556-7558) - Links", {
  expect_identical_html(
    md = c(
      "[](./target.md)\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"./target.md\"></a></p>"
    )
  )
})

test_that("spec - Ex 485 (L7563-7565) - Links", {
  expect_identical_html(
    md = c(
      "[link]()\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"\">link</a></p>"
    )
  )
})

test_that("spec - Ex 486 (L7570-7572) - Links", {
  expect_identical_html(
    md = c(
      "[link](<>)\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"\">link</a></p>"
    )
  )
})

test_that("spec - Ex 487 (L7577-7579) - Links", {
  expect_identical_html(
    md = c(
      "[]()\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"\"></a></p>"
    )
  )
})

test_that("spec - Ex 488 (L7586-7588) - Links", {
  expect_identical_html(
    md = c(
      "[link](/my uri)\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[link](/my uri)</p>"
    )
  )
})

test_that("spec - Ex 489 (L7592-7594) - Links", {
  expect_identical_html(
    md = c(
      "[link](</my uri>)\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/my%20uri\">link</a></p>"
    )
  )
})

test_that("spec - Ex 490 (L7601-7605) - Links", {
  expect_identical_html(
    md = c(
      "[link](foo", "bar)"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[link](foo",
      "bar)</p>"
    )
  )
})

test_that("spec - Ex 491 (L7609-7613) - Links", {
  expect_identical_html(
    md = c(
      "[link](<foo", "bar>)"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[link](<foo",
      "bar>)</p>"
    )
  )
})

test_that("spec - Ex 492 (L7620-7622) - Links", {
  expect_identical_html(
    md = c(
      "[a](<b)c>)\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"b)c\">a</a></p>"
    )
  )
})

test_that("spec - Ex 493 (L7628-7630) - Links", {
  expect_identical_html(
    md = c(
      "[link](<foo\\>)\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[link](&lt;foo&gt;)</p>"
    )
  )
})

test_that("spec - Ex 494 (L7637-7643) - Links", {
  expect_identical_html(
    md = c(
      "[a](<b)c", "[a](<b)c>",
      "[a](<b>c)"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[a](&lt;b)c",
      "[a](&lt;b)c&gt;",
      "[a](<b>c)</p>"
    )
  )
})

test_that("spec - Ex 495 (L7649-7651) - Links", {
  expect_identical_html(
    md = c(
      "[link](\\(foo\\))\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"(foo)\">link</a></p>"
    )
  )
})

test_that("spec - Ex 496 (L7658-7660) - Links", {
  expect_identical_html(
    md = c(
      "[link](foo(and(bar)))\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"foo(and(bar))\">link</a></p>"
    )
  )
})

test_that("spec - Ex 497 (L7667-7669) - Links", {
  expect_identical_html(
    md = c(
      "[link](foo(and(bar))\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[link](foo(and(bar))</p>"
    )
  )
})

test_that("spec - Ex 498 (L7674-7676) - Links", {
  expect_identical_html(
    md = c(
      "[link](foo\\(and\\(bar\\))\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"foo(and(bar)\">link</a></p>"
    )
  )
})

test_that("spec - Ex 499 (L7681-7683) - Links", {
  expect_identical_html(
    md = c(
      "[link](<foo(and(bar)>)\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"foo(and(bar)\">link</a></p>"
    )
  )
})

test_that("spec - Ex 500 (L7691-7693) - Links", {
  expect_identical_html(
    md = c(
      "[link](foo\\)\\:)\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"foo):\">link</a></p>"
    )
  )
})

test_that("spec - Ex 501 (L7700-7708) - Links", {
  expect_identical_html(
    md = c(
      "[link](#fragment)", "",
      "[link](https://example.com#fragment)",
      "",
      "[link](https://example.com?foo=3#frag)"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"#fragment\">link</a></p>",
      "<p><a href=\"https://example.com#fragment\">link</a></p>",
      "<p><a href=\"https://example.com?foo=3#frag\">link</a></p>"
    )
  )
})

test_that("spec - Ex 502 (L7716-7718) - Links", {
  expect_identical_html(
    md = c(
      "[link](foo\\bar)\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"foo%5Cbar\">link</a></p>"
    )
  )
})

test_that("spec - Ex 503 (L7732-7734) - Links", {
  expect_identical_html(
    md = c(
      "[link](foo%20b&auml;)\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"foo%20b%C3%A4\">link</a></p>"
    )
  )
})

test_that("spec - Ex 504 (L7743-7745) - Links", {
  expect_identical_html(
    md = c(
      "[link](\"title\")\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"%22title%22\">link</a></p>"
    )
  )
})

test_that("spec - Ex 505 (L7752-7758) - Links", {
  expect_identical_html(
    md = c(
      "[link](/url \"title\")",
      "[link](/url 'title')",
      "[link](/url (title))"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/url\" title=\"title\">link</a>",
      "<a href=\"/url\" title=\"title\">link</a>",
      "<a href=\"/url\" title=\"title\">link</a></p>"
    )
  )
})

test_that("spec - Ex 506 (L7766-7768) - Links", {
  expect_identical_html(
    md = c(
      "[link](/url \"title \\\"&quot;\")\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/url\" title=\"title &quot;&quot;\">link</a></p>"
    )
  )
})

test_that("spec - Ex 507 (L7777-7779) - Links", {
  expect_identical_html(
    md = c(
      "[link](/url¬†\"title\")\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/url%C2%A0%22title%22\">link</a></p>"
    )
  )
})

test_that("spec - Ex 508 (L7786-7788) - Links", {
  expect_identical_html(
    md = c(
      "[link](/url \"title \"and\" title\")\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[link](/url &quot;title &quot;and&quot; title&quot;)</p>"
    )
  )
})

test_that("spec - Ex 509 (L7795-7797) - Links", {
  expect_identical_html(
    md = c(
      "[link](/url 'title \"and\" title')\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/url\" title=\"title &quot;and&quot; title\">link</a></p>"
    )
  )
})

test_that("spec - Ex 510 (L7820-7823) - Links", {
  expect_identical_html(
    md = c(
      "[link](   /uri",
      "  \"title\"  )"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/uri\" title=\"title\">link</a></p>"
    )
  )
})

test_that("spec - Ex 511 (L7831-7833) - Links", {
  expect_identical_html(
    md = c(
      "[link] (/uri)\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[link] (/uri)</p>"
    )
  )
})

test_that("spec - Ex 512 (L7841-7843) - Links", {
  expect_identical_html(
    md = c(
      "[link [foo [bar]]](/uri)\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/uri\">link [foo [bar]]</a></p>"
    )
  )
})

test_that("spec - Ex 513 (L7848-7850) - Links", {
  expect_identical_html(
    md = c(
      "[link] bar](/uri)\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[link] bar](/uri)</p>"
    )
  )
})

test_that("spec - Ex 514 (L7855-7857) - Links", {
  expect_identical_html(
    md = c(
      "[link [bar](/uri)\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[link <a href=\"/uri\">bar</a></p>"
    )
  )
})

test_that("spec - Ex 515 (L7862-7864) - Links", {
  expect_identical_html(
    md = c(
      "[link \\[bar](/uri)\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/uri\">link [bar</a></p>"
    )
  )
})

test_that("spec - Ex 516 (L7871-7873) - Links", {
  expect_identical_html(
    md = c(
      "[link *foo **bar** `#`*](/uri)\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/uri\">link <em>foo <strong>bar</strong> <code>#</code></em></a></p>"
    )
  )
})

test_that("spec - Ex 517 (L7878-7880) - Links", {
  expect_identical_html(
    md = c(
      "[![moon](moon.jpg)](/uri)\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/uri\"><img src=\"moon.jpg\" alt=\"moon\" /></a></p>"
    )
  )
})

test_that("spec - Ex 518 (L7887-7889) - Links", {
  expect_identical_html(
    md = c(
      "[foo [bar](/uri)](/uri)\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[foo <a href=\"/uri\">bar</a>](/uri)</p>"
    )
  )
})

test_that("spec - Ex 519 (L7894-7896) - Links", {
  expect_identical_html(
    md = c(
      "[foo *[bar [baz](/uri)](/uri)*](/uri)\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[foo <em>[bar <a href=\"/uri\">baz</a>](/uri)</em>](/uri)</p>"
    )
  )
})

test_that("spec - Ex 520 (L7901-7903) - Links", {
  expect_identical_html(
    md = c(
      "![[[foo](uri1)](uri2)](uri3)\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><img src=\"uri3\" alt=\"[foo](uri2)\" /></p>"
    )
  )
})

test_that("spec - Ex 521 (L7911-7913) - Links", {
  expect_identical_html(
    md = c(
      "*[foo*](/uri)\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>*<a href=\"/uri\">foo*</a></p>"
    )
  )
})

test_that("spec - Ex 522 (L7918-7920) - Links", {
  expect_identical_html(
    md = c(
      "[foo *bar](baz*)\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"baz*\">foo *bar</a></p>"
    )
  )
})

test_that("spec - Ex 523 (L7928-7930) - Links", {
  expect_identical_html(
    md = c(
      "*foo [bar* baz]\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>foo [bar</em> baz]</p>"
    )
  )
})

test_that("spec - Ex 524 (L7938-7940) - Links", {
  expect_identical_html(
    md = c(
      "[foo <bar attr=\"](baz)\">\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[foo <bar attr=\"](baz)\"></p>"
    )
  )
})

test_that("spec - Ex 525 (L7945-7947) - Links", {
  expect_identical_html(
    md = c(
      "[foo`](/uri)`\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[foo<code>](/uri)</code></p>"
    )
  )
})

test_that("spec - Ex 526 (L7952-7954) - Links", {
  expect_identical_html(
    md = c(
      "[foo<https://example.com/?search=](uri)>\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[foo<a href=\"https://example.com/?search=%5D(uri)\">https://example.com/?search=](uri)</a></p>"
    )
  )
})

test_that("spec - Ex 527 (L7990-7994) - Links", {
  expect_identical_html(
    md = c(
      "[foo][bar]", "",
      "[bar]: /url \"title\""
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/url\" title=\"title\">foo</a></p>"
    )
  )
})

test_that("spec - Ex 528 (L8005-8009) - Links", {
  expect_identical_html(
    md = c(
      "[link [foo [bar]]][ref]",
      "", "[ref]: /uri"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/uri\">link [foo [bar]]</a></p>"
    )
  )
})

test_that("spec - Ex 529 (L8014-8018) - Links", {
  expect_identical_html(
    md = c(
      "[link \\[bar][ref]", "",
      "[ref]: /uri"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/uri\">link [bar</a></p>"
    )
  )
})

test_that("spec - Ex 530 (L8025-8029) - Links", {
  expect_identical_html(
    md = c(
      "[link *foo **bar** `#`*][ref]",
      "", "[ref]: /uri"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/uri\">link <em>foo <strong>bar</strong> <code>#</code></em></a></p>"
    )
  )
})

test_that("spec - Ex 531 (L8034-8038) - Links", {
  expect_identical_html(
    md = c(
      "[![moon](moon.jpg)][ref]",
      "", "[ref]: /uri"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/uri\"><img src=\"moon.jpg\" alt=\"moon\" /></a></p>"
    )
  )
})

test_that("spec - Ex 532 (L8045-8049) - Links", {
  expect_identical_html(
    md = c(
      "[foo [bar](/uri)][ref]",
      "", "[ref]: /uri"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[foo <a href=\"/uri\">bar</a>]<a href=\"/uri\">ref</a></p>"
    )
  )
})

test_that("spec - Ex 533 (L8054-8058) - Links", {
  expect_identical_html(
    md = c(
      "[foo *bar [baz][ref]*][ref]",
      "", "[ref]: /uri"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[foo <em>bar <a href=\"/uri\">baz</a></em>]<a href=\"/uri\">ref</a></p>"
    )
  )
})

test_that("spec - Ex 534 (L8069-8073) - Links", {
  expect_identical_html(
    md = c(
      "*[foo*][ref]", "",
      "[ref]: /uri"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>*<a href=\"/uri\">foo*</a></p>"
    )
  )
})

test_that("spec - Ex 535 (L8078-8082) - Links", {
  expect_identical_html(
    md = c(
      "[foo *bar][ref]*", "",
      "[ref]: /uri"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/uri\">foo *bar</a>*</p>"
    )
  )
})

test_that("spec - Ex 536 (L8090-8094) - Links", {
  expect_identical_html(
    md = c(
      "[foo <bar attr=\"][ref]\">",
      "", "[ref]: /uri"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[foo <bar attr=\"][ref]\"></p>"
    )
  )
})

test_that("spec - Ex 537 (L8099-8103) - Links", {
  expect_identical_html(
    md = c(
      "[foo`][ref]`", "",
      "[ref]: /uri"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[foo<code>][ref]</code></p>"
    )
  )
})

test_that("spec - Ex 538 (L8108-8112) - Links", {
  expect_identical_html(
    md = c(
      "[foo<https://example.com/?search=][ref]>",
      "", "[ref]: /uri"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[foo<a href=\"https://example.com/?search=%5D%5Bref%5D\">https://example.com/?search=][ref]</a></p>"
    )
  )
})

test_that("spec - Ex 539 (L8119-8123) - Links", {
  expect_identical_html(
    md = c(
      "[foo][BaR]", "",
      "[bar]: /url \"title\""
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/url\" title=\"title\">foo</a></p>"
    )
  )
})

test_that("spec - Ex 540 (L8130-8134) - Links", {
  expect_identical_html(
    md = c(
      "[·∫û]", "", "[SS]: /url"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/url\">·∫û</a></p>"
    )
  )
})

test_that("spec - Ex 541 (L8142-8147) - Links", {
  expect_identical_html(
    md = c(
      "[Foo", "  bar]: /url", "",
      "[Baz][Foo bar]"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/url\">Baz</a></p>"
    )
  )
})

test_that("spec - Ex 542 (L8155-8159) - Links", {
  expect_identical_html(
    md = c(
      "[foo] [bar]", "",
      "[bar]: /url \"title\""
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[foo] <a href=\"/url\" title=\"title\">bar</a></p>"
    )
  )
})

test_that("spec - Ex 543 (L8164-8170) - Links", {
  expect_identical_html(
    md = c(
      "[foo]", "[bar]", "",
      "[bar]: /url \"title\""
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[foo]",
      "<a href=\"/url\" title=\"title\">bar</a></p>"
    )
  )
})

test_that("spec - Ex 544 (L8205-8211) - Links", {
  expect_identical_html(
    md = c(
      "[foo]: /url1", "",
      "[foo]: /url2", "",
      "[bar][foo]"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/url1\">bar</a></p>"
    )
  )
})

test_that("spec - Ex 545 (L8220-8224) - Links", {
  expect_identical_html(
    md = c(
      "[bar][foo\\!]", "",
      "[foo!]: /url"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[bar][foo!]</p>"
    )
  )
})

test_that("spec - Ex 546 (L8232-8237) - Links", {
  expect_identical_html(
    md = c(
      "[foo][ref[]", "",
      "[ref[]: /uri"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[foo][ref[]</p>",
      "<p>[ref[]: /uri</p>"
    )
  )
})

test_that("spec - Ex 547 (L8242-8247) - Links", {
  expect_identical_html(
    md = c(
      "[foo][ref[bar]]", "",
      "[ref[bar]]: /uri"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[foo][ref[bar]]</p>",
      "<p>[ref[bar]]: /uri</p>"
    )
  )
})

test_that("spec - Ex 548 (L8252-8257) - Links", {
  expect_identical_html(
    md = c(
      "[[[foo]]]", "",
      "[[[foo]]]: /url"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[[[foo]]]</p>",
      "<p>[[[foo]]]: /url</p>"
    )
  )
})

test_that("spec - Ex 549 (L8262-8266) - Links", {
  expect_identical_html(
    md = c(
      "[foo][ref\\[]", "",
      "[ref\\[]: /uri"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/uri\">foo</a></p>"
    )
  )
})

test_that("spec - Ex 550 (L8273-8277) - Links", {
  expect_identical_html(
    md = c(
      "[bar\\\\]: /uri", "",
      "[bar\\\\]"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/uri\">bar\\</a></p>"
    )
  )
})

test_that("spec - Ex 551 (L8285-8290) - Links", {
  expect_identical_html(
    md = c(
      "[]", "", "[]: /uri"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[]</p>",
      "<p>[]: /uri</p>"
    )
  )
})

test_that("spec - Ex 552 (L8295-8304) - Links", {
  expect_identical_html(
    md = c(
      "[", " ]", "", "[",
      " ]: /uri"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[", "]</p>",
      "<p>[", "]: /uri</p>"
    )
  )
})

test_that("spec - Ex 553 (L8318-8322) - Links", {
  expect_identical_html(
    md = c(
      "[foo][]", "",
      "[foo]: /url \"title\""
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/url\" title=\"title\">foo</a></p>"
    )
  )
})

test_that("spec - Ex 554 (L8327-8331) - Links", {
  expect_identical_html(
    md = c(
      "[*foo* bar][]", "",
      "[*foo* bar]: /url \"title\""
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/url\" title=\"title\"><em>foo</em> bar</a></p>"
    )
  )
})

test_that("spec - Ex 555 (L8338-8342) - Links", {
  expect_identical_html(
    md = c(
      "[Foo][]", "",
      "[foo]: /url \"title\""
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/url\" title=\"title\">Foo</a></p>"
    )
  )
})

test_that("spec - Ex 556 (L8351-8357) - Links", {
  expect_identical_html(
    md = c(
      "[foo] ", "[]", "",
      "[foo]: /url \"title\""
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/url\" title=\"title\">foo</a>",
      "[]</p>"
    )
  )
})

test_that("spec - Ex 557 (L8371-8375) - Links", {
  expect_identical_html(
    md = c(
      "[foo]", "",
      "[foo]: /url \"title\""
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/url\" title=\"title\">foo</a></p>"
    )
  )
})

test_that("spec - Ex 558 (L8380-8384) - Links", {
  expect_identical_html(
    md = c(
      "[*foo* bar]", "",
      "[*foo* bar]: /url \"title\""
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/url\" title=\"title\"><em>foo</em> bar</a></p>"
    )
  )
})

test_that("spec - Ex 559 (L8389-8393) - Links", {
  expect_identical_html(
    md = c(
      "[[*foo* bar]]", "",
      "[*foo* bar]: /url \"title\""
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[<a href=\"/url\" title=\"title\"><em>foo</em> bar</a>]</p>"
    )
  )
})

test_that("spec - Ex 560 (L8398-8402) - Links", {
  expect_identical_html(
    md = c(
      "[[bar [foo]", "",
      "[foo]: /url"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[[bar <a href=\"/url\">foo</a></p>"
    )
  )
})

test_that("spec - Ex 561 (L8409-8413) - Links", {
  expect_identical_html(
    md = c(
      "[Foo]", "",
      "[foo]: /url \"title\""
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/url\" title=\"title\">Foo</a></p>"
    )
  )
})

test_that("spec - Ex 562 (L8420-8424) - Links", {
  expect_identical_html(
    md = c(
      "[foo] bar", "",
      "[foo]: /url"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/url\">foo</a> bar</p>"
    )
  )
})

test_that("spec - Ex 563 (L8432-8436) - Links", {
  expect_identical_html(
    md = c(
      "\\[foo]", "",
      "[foo]: /url \"title\""
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<p>[foo]</p>")
  )
})

test_that("spec - Ex 564 (L8444-8448) - Links", {
  expect_identical_html(
    md = c(
      "[foo*]: /url", "",
      "*[foo*]"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>*<a href=\"/url\">foo*</a></p>"
    )
  )
})

test_that("spec - Ex 565 (L8456-8461) - Links", {
  expect_identical_html(
    md = c(
      "[foo][bar]", "",
      "[foo]: /url1",
      "[bar]: /url2"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/url2\">foo</a></p>"
    )
  )
})

test_that("spec - Ex 566 (L8465-8469) - Links", {
  expect_identical_html(
    md = c(
      "[foo][]", "",
      "[foo]: /url1"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/url1\">foo</a></p>"
    )
  )
})

test_that("spec - Ex 567 (L8475-8479) - Links", {
  expect_identical_html(
    md = c(
      "[foo]()", "",
      "[foo]: /url1"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"\">foo</a></p>"
    )
  )
})

test_that("spec - Ex 568 (L8483-8487) - Links", {
  expect_identical_html(
    md = c(
      "[foo](not a link)", "",
      "[foo]: /url1"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/url1\">foo</a>(not a link)</p>"
    )
  )
})

test_that("spec - Ex 569 (L8494-8498) - Links", {
  expect_identical_html(
    md = c(
      "[foo][bar][baz]", "",
      "[baz]: /url"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[foo]<a href=\"/url\">bar</a></p>"
    )
  )
})

test_that("spec - Ex 570 (L8506-8511) - Links", {
  expect_identical_html(
    md = c(
      "[foo][bar][baz]", "",
      "[baz]: /url1",
      "[bar]: /url2"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"/url2\">foo</a><a href=\"/url1\">baz</a></p>"
    )
  )
})

test_that("spec - Ex 571 (L8519-8524) - Links", {
  expect_identical_html(
    md = c(
      "[foo][bar][baz]", "",
      "[baz]: /url1",
      "[foo]: /url2"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>[foo]<a href=\"/url1\">bar</a></p>"
    )
  )
})

test_that("spec - Ex 572 (L8542-8544) - Images", {
  expect_identical_html(
    md = c(
      "![foo](/url \"title\")\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><img src=\"/url\" alt=\"foo\" title=\"title\" /></p>"
    )
  )
})

test_that("spec - Ex 573 (L8549-8553) - Images", {
  expect_identical_html(
    md = c(
      "![foo *bar*]", "",
      "[foo *bar*]: train.jpg \"train & tracks\""
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><img src=\"train.jpg\" alt=\"foo bar\" title=\"train &amp; tracks\" /></p>"
    )
  )
})

test_that("spec - Ex 574 (L8558-8560) - Images", {
  expect_identical_html(
    md = c(
      "![foo ![bar](/url)](/url2)\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><img src=\"/url2\" alt=\"foo bar\" /></p>"
    )
  )
})

test_that("spec - Ex 575 (L8565-8567) - Images", {
  expect_identical_html(
    md = c(
      "![foo [bar](/url)](/url2)\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><img src=\"/url2\" alt=\"foo bar\" /></p>"
    )
  )
})

test_that("spec - Ex 576 (L8579-8583) - Images", {
  expect_identical_html(
    md = c(
      "![foo *bar*][]", "",
      "[foo *bar*]: train.jpg \"train & tracks\""
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><img src=\"train.jpg\" alt=\"foo bar\" title=\"train &amp; tracks\" /></p>"
    )
  )
})

test_that("spec - Ex 577 (L8588-8592) - Images", {
  expect_identical_html(
    md = c(
      "![foo *bar*][foobar]", "",
      "[FOOBAR]: train.jpg \"train & tracks\""
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><img src=\"train.jpg\" alt=\"foo bar\" title=\"train &amp; tracks\" /></p>"
    )
  )
})

test_that("spec - Ex 578 (L8597-8599) - Images", {
  expect_identical_html(
    md = c(
      "![foo](train.jpg)\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><img src=\"train.jpg\" alt=\"foo\" /></p>"
    )
  )
})

test_that("spec - Ex 579 (L8604-8606) - Images", {
  expect_identical_html(
    md = c(
      "My ![foo bar](/path/to/train.jpg  \"title\"   )\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>My <img src=\"/path/to/train.jpg\" alt=\"foo bar\" title=\"title\" /></p>"
    )
  )
})

test_that("spec - Ex 580 (L8611-8613) - Images", {
  expect_identical_html(
    md = c(
      "![foo](<url>)\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><img src=\"url\" alt=\"foo\" /></p>"
    )
  )
})

test_that("spec - Ex 581 (L8618-8620) - Images", {
  expect_identical_html(
    md = c(
      "![](/url)\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><img src=\"/url\" alt=\"\" /></p>"
    )
  )
})

test_that("spec - Ex 582 (L8627-8631) - Images", {
  expect_identical_html(
    md = c(
      "![foo][bar]", "",
      "[bar]: /url"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><img src=\"/url\" alt=\"foo\" /></p>"
    )
  )
})

test_that("spec - Ex 583 (L8636-8640) - Images", {
  expect_identical_html(
    md = c(
      "![foo][bar]", "",
      "[BAR]: /url"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><img src=\"/url\" alt=\"foo\" /></p>"
    )
  )
})

test_that("spec - Ex 584 (L8647-8651) - Images", {
  expect_identical_html(
    md = c(
      "![foo][]", "",
      "[foo]: /url \"title\""
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><img src=\"/url\" alt=\"foo\" title=\"title\" /></p>"
    )
  )
})

test_that("spec - Ex 585 (L8656-8660) - Images", {
  expect_identical_html(
    md = c(
      "![*foo* bar][]", "",
      "[*foo* bar]: /url \"title\""
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><img src=\"/url\" alt=\"foo bar\" title=\"title\" /></p>"
    )
  )
})

test_that("spec - Ex 586 (L8667-8671) - Images", {
  expect_identical_html(
    md = c(
      "![Foo][]", "",
      "[foo]: /url \"title\""
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><img src=\"/url\" alt=\"Foo\" title=\"title\" /></p>"
    )
  )
})

test_that("spec - Ex 587 (L8679-8685) - Images", {
  expect_identical_html(
    md = c(
      "![foo] ", "[]", "",
      "[foo]: /url \"title\""
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><img src=\"/url\" alt=\"foo\" title=\"title\" />",
      "[]</p>"
    )
  )
})

test_that("spec - Ex 588 (L8692-8696) - Images", {
  expect_identical_html(
    md = c(
      "![foo]", "",
      "[foo]: /url \"title\""
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><img src=\"/url\" alt=\"foo\" title=\"title\" /></p>"
    )
  )
})

test_that("spec - Ex 589 (L8701-8705) - Images", {
  expect_identical_html(
    md = c(
      "![*foo* bar]", "",
      "[*foo* bar]: /url \"title\""
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><img src=\"/url\" alt=\"foo bar\" title=\"title\" /></p>"
    )
  )
})

test_that("spec - Ex 590 (L8712-8717) - Images", {
  expect_identical_html(
    md = c(
      "![[foo]]", "",
      "[[foo]]: /url \"title\""
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>![[foo]]</p>",
      "<p>[[foo]]: /url &quot;title&quot;</p>"
    )
  )
})

test_that("spec - Ex 591 (L8724-8728) - Images", {
  expect_identical_html(
    md = c(
      "![Foo]", "",
      "[foo]: /url \"title\""
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><img src=\"/url\" alt=\"Foo\" title=\"title\" /></p>"
    )
  )
})

test_that("spec - Ex 592 (L8736-8740) - Images", {
  expect_identical_html(
    md = c(
      "!\\[foo]", "",
      "[foo]: /url \"title\""
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<p>![foo]</p>")
  )
})

test_that("spec - Ex 593 (L8748-8752) - Images", {
  expect_identical_html(
    md = c(
      "\\![foo]", "",
      "[foo]: /url \"title\""
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>!<a href=\"/url\" title=\"title\">foo</a></p>"
    )
  )
})

test_that("spec - Ex 594 (L8781-8783) - Autolinks", {
  expect_identical_html(
    md = c(
      "<http://foo.bar.baz>\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"http://foo.bar.baz\">http://foo.bar.baz</a></p>"
    )
  )
})

test_that("spec - Ex 595 (L8788-8790) - Autolinks", {
  expect_identical_html(
    md = c(
      "<https://foo.bar.baz/test?q=hello&id=22&boolean>\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"https://foo.bar.baz/test?q=hello&amp;id=22&amp;boolean\">https://foo.bar.baz/test?q=hello&amp;id=22&amp;boolean</a></p>"
    )
  )
})

test_that("spec - Ex 596 (L8795-8797) - Autolinks", {
  expect_identical_html(
    md = c(
      "<irc://foo.bar:2233/baz>\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"irc://foo.bar:2233/baz\">irc://foo.bar:2233/baz</a></p>"
    )
  )
})

test_that("spec - Ex 597 (L8804-8806) - Autolinks", {
  expect_identical_html(
    md = c(
      "<MAILTO:FOO@BAR.BAZ>\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"MAILTO:FOO@BAR.BAZ\">MAILTO:FOO@BAR.BAZ</a></p>"
    )
  )
})

test_that("spec - Ex 598 (L8816-8818) - Autolinks", {
  expect_identical_html(
    md = c(
      "<a+b+c:d>\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"a+b+c:d\">a+b+c:d</a></p>"
    )
  )
})

test_that("spec - Ex 599 (L8823-8825) - Autolinks", {
  expect_identical_html(
    md = c(
      "<made-up-scheme://foo,bar>\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"made-up-scheme://foo,bar\">made-up-scheme://foo,bar</a></p>"
    )
  )
})

test_that("spec - Ex 600 (L8830-8832) - Autolinks", {
  expect_identical_html(
    md = c(
      "<https://../>\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"https://../\">https://../</a></p>"
    )
  )
})

test_that("spec - Ex 601 (L8837-8839) - Autolinks", {
  expect_identical_html(
    md = c(
      "<localhost:5001/foo>\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"localhost:5001/foo\">localhost:5001/foo</a></p>"
    )
  )
})

test_that("spec - Ex 602 (L8846-8848) - Autolinks", {
  expect_identical_html(
    md = c(
      "<https://foo.bar/baz bim>\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>&lt;https://foo.bar/baz bim&gt;</p>"
    )
  )
})

test_that("spec - Ex 603 (L8855-8857) - Autolinks", {
  expect_identical_html(
    md = c(
      "<https://example.com/\\[\\>\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"https://example.com/%5C%5B%5C\">https://example.com/\\[\\</a></p>"
    )
  )
})

test_that("spec - Ex 604 (L8877-8879) - Autolinks", {
  expect_identical_html(
    md = c(
      "<foo@bar.example.com>\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"mailto:foo@bar.example.com\">foo@bar.example.com</a></p>"
    )
  )
})

test_that("spec - Ex 605 (L8884-8886) - Autolinks", {
  expect_identical_html(
    md = c(
      "<foo+special@Bar.baz-bar0.com>\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"mailto:foo+special@Bar.baz-bar0.com\">foo+special@Bar.baz-bar0.com</a></p>"
    )
  )
})

test_that("spec - Ex 606 (L8893-8895) - Autolinks", {
  expect_identical_html(
    md = c(
      "<foo\\+@bar.example.com>\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>&lt;foo+@bar.example.com&gt;</p>"
    )
  )
})

test_that("spec - Ex 607 (L8902-8904) - Autolinks", {
  expect_identical_html(
    md = c(
      "<>\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>&lt;&gt;</p>"
    )
  )
})

test_that("spec - Ex 608 (L8909-8911) - Autolinks", {
  expect_identical_html(
    md = c(
      "< https://foo.bar >\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>&lt; https://foo.bar &gt;</p>"
    )
  )
})

test_that("spec - Ex 609 (L8916-8918) - Autolinks", {
  expect_identical_html(
    md = c(
      "<m:abc>\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>&lt;m:abc&gt;</p>"
    )
  )
})

test_that("spec - Ex 610 (L8923-8925) - Autolinks", {
  expect_identical_html(
    md = c(
      "<foo.bar.baz>\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>&lt;foo.bar.baz&gt;</p>"
    )
  )
})

test_that("spec - Ex 611 (L8930-8932) - Autolinks", {
  expect_identical_html(
    md = c(
      "https://example.com\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>https://example.com</p>"
    )
  )
})

test_that("spec - Ex 612 (L8937-8939) - Autolinks", {
  expect_identical_html(
    md = c(
      "foo@bar.example.com\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo@bar.example.com</p>"
    )
  )
})

test_that("spec - Ex 613 (L9017-9019) - Raw HTML", {
  expect_identical_html(
    md = c(
      "<a><bab><c2c>\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a><bab><c2c></p>"
    )
  )
})

test_that("spec - Ex 614 (L9026-9028) - Raw HTML", {
  expect_identical_html(
    md = c(
      "<a/><b2/>\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a/><b2/></p>"
    )
  )
})

test_that("spec - Ex 615 (L9035-9039) - Raw HTML", {
  expect_identical_html(
    md = c(
      "<a  /><b2",
      "data=\"foo\" >"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a  /><b2",
      "data=\"foo\" ></p>"
    )
  )
})

test_that("spec - Ex 616 (L9046-9050) - Raw HTML", {
  expect_identical_html(
    md = c(
      "<a foo=\"bar\" bam = 'baz <em>\"</em>'",
      "_boolean zoop:33=zoop:33 />"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a foo=\"bar\" bam = 'baz <em>\"</em>'",
      "_boolean zoop:33=zoop:33 /></p>"
    )
  )
})

test_that("spec - Ex 617 (L9057-9059) - Raw HTML", {
  expect_identical_html(
    md = c(
      "Foo <responsive-image src=\"foo.jpg\" />\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>Foo <responsive-image src=\"foo.jpg\" /></p>"
    )
  )
})

test_that("spec - Ex 618 (L9066-9068) - Raw HTML", {
  expect_identical_html(
    md = c(
      "<33> <__>\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>&lt;33&gt; &lt;__&gt;</p>"
    )
  )
})

test_that("spec - Ex 619 (L9075-9077) - Raw HTML", {
  expect_identical_html(
    md = c(
      "<a h*#ref=\"hi\">\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>&lt;a h*#ref=&quot;hi&quot;&gt;</p>"
    )
  )
})

test_that("spec - Ex 620 (L9084-9086) - Raw HTML", {
  expect_identical_html(
    md = c(
      "<a href=\"hi'> <a href=hi'>\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>&lt;a href=&quot;hi'&gt; &lt;a href=hi'&gt;</p>"
    )
  )
})

test_that("spec - Ex 621 (L9093-9101) - Raw HTML", {
  expect_identical_html(
    md = c(
      "< a><", "foo><bar/ >",
      "<foo bar=baz",
      "bim!bop />"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>&lt; a&gt;&lt;",
      "foo&gt;&lt;bar/ &gt;",
      "&lt;foo bar=baz",
      "bim!bop /&gt;</p>"
    )
  )
})

test_that("spec - Ex 622 (L9108-9110) - Raw HTML", {
  expect_identical_html(
    md = c(
      "<a href='bar'title=title>\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>&lt;a href='bar'title=title&gt;</p>"
    )
  )
})

test_that("spec - Ex 623 (L9117-9119) - Raw HTML", {
  expect_identical_html(
    md = c(
      "</a></foo >\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p></a></foo ></p>"
    )
  )
})

test_that("spec - Ex 624 (L9126-9128) - Raw HTML", {
  expect_identical_html(
    md = c(
      "</a href=\"foo\">\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>&lt;/a href=&quot;foo&quot;&gt;</p>"
    )
  )
})

test_that("spec - Ex 625 (L9135-9139) - Raw HTML", {
  expect_identical_html(
    md = c(
      "foo <!-- this is a --",
      "comment - with hyphens -->"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo <!-- this is a --",
      "comment - with hyphens --></p>"
    )
  )
})

test_that("spec - Ex 626 (L9143-9148) - Raw HTML", {
  expect_identical_html(
    md = c(
      "foo <!--> foo -->", "",
      "foo <!---> foo -->"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo <!--> foo --&gt;</p>",
      "<p>foo <!---> foo --&gt;</p>"
    )
  )
})

test_that("spec - Ex 627 (L9155-9157) - Raw HTML", {
  expect_identical_html(
    md = c(
      "foo <?php echo $a; ?>\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo <?php echo $a; ?></p>"
    )
  )
})

test_that("spec - Ex 628 (L9164-9166) - Raw HTML", {
  expect_identical_html(
    md = c(
      "foo <!ELEMENT br EMPTY>\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo <!ELEMENT br EMPTY></p>"
    )
  )
})

test_that("spec - Ex 629 (L9173-9175) - Raw HTML", {
  expect_identical_html(
    md = c(
      "foo <![CDATA[>&<]]>\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo <![CDATA[>&<]]></p>"
    )
  )
})

test_that("spec - Ex 630 (L9183-9185) - Raw HTML", {
  expect_identical_html(
    md = c(
      "foo <a href=\"&ouml;\">\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo <a href=\"&ouml;\"></p>"
    )
  )
})

test_that("spec - Ex 631 (L9192-9194) - Raw HTML", {
  expect_identical_html(
    md = c(
      "foo <a href=\"\\*\">\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo <a href=\"\\*\"></p>"
    )
  )
})

test_that("spec - Ex 632 (L9199-9201) - Raw HTML", {
  expect_identical_html(
    md = c(
      "<a href=\"\\\"\">\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>&lt;a href=&quot;&quot;&quot;&gt;</p>"
    )
  )
})

test_that("spec - Ex 633 (L9213-9217) - Hard line breaks", {
  expect_identical_html(
    md = c(
      "foo  ", "baz"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo<br />",
      "baz</p>"
    )
  )
})

test_that("spec - Ex 634 (L9225-9229) - Hard line breaks", {
  expect_identical_html(
    md = c(
      "foo\\", "baz"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo<br />",
      "baz</p>"
    )
  )
})

test_that("spec - Ex 635 (L9236-9240) - Hard line breaks", {
  expect_identical_html(
    md = c(
      "foo       ", "baz"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo<br />",
      "baz</p>"
    )
  )
})

test_that("spec - Ex 636 (L9247-9251) - Hard line breaks", {
  expect_identical_html(
    md = c(
      "foo  ", "     bar"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo<br />",
      "bar</p>"
    )
  )
})

test_that("spec - Ex 637 (L9256-9260) - Hard line breaks", {
  expect_identical_html(
    md = c(
      "foo\\", "     bar"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo<br />",
      "bar</p>"
    )
  )
})

test_that("spec - Ex 638 (L9268-9272) - Hard line breaks", {
  expect_identical_html(
    md = c(
      "*foo  ", "bar*"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>foo<br />",
      "bar</em></p>"
    )
  )
})

test_that("spec - Ex 639 (L9277-9281) - Hard line breaks", {
  expect_identical_html(
    md = c(
      "*foo\\", "bar*"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><em>foo<br />",
      "bar</em></p>"
    )
  )
})

test_that("spec - Ex 640 (L9288-9291) - Hard line breaks", {
  testthat::skip("spec #640 - Slight spacing discrepancy in the span output")
  expect_identical_html(
    md = c(
      "`code  ", "span`"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><code>code   span</code></p>"
    )
  )
})

test_that("spec - Ex 641 (L9296-9299) - Hard line breaks", {
  expect_identical_html(
    md = c(
      "`code\\", "span`"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><code>code\\ span</code></p>"
    )
  )
})

test_that("spec - Ex 642 (L9306-9310) - Hard line breaks", {
  expect_identical_html(
    md = c(
      "<a href=\"foo  ", "bar\">"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"foo  ",
      "bar\"></p>"
    )
  )
})

test_that("spec - Ex 643 (L9315-9319) - Hard line breaks", {
  expect_identical_html(
    md = c(
      "<a href=\"foo\\", "bar\">"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p><a href=\"foo\\",
      "bar\"></p>"
    )
  )
})

test_that("spec - Ex 644 (L9328-9330) - Hard line breaks", {
  expect_identical_html(
    md = c(
      "foo\\\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<p>foo\\</p>")
  )
})

test_that("spec - Ex 645 (L9335-9337) - Hard line breaks", {
  expect_identical_html(
    md = c(
      "foo  \n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<p>foo</p>")
  )
})

test_that("spec - Ex 646 (L9342-9344) - Hard line breaks", {
  expect_identical_html(
    md = c(
      "### foo\\\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<h3>foo\\</h3>")
  )
})

test_that("spec - Ex 647 (L9349-9351) - Hard line breaks", {
  expect_identical_html(
    md = c(
      "### foo  \n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c("<h3>foo</h3>")
  )
})

test_that("spec - Ex 648 (L9364-9368) - Soft line breaks", {
  expect_identical_html(
    md = c(
      "foo", "baz"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo",
      "baz</p>"
    )
  )
})

test_that("spec - Ex 649 (L9376-9380) - Soft line breaks", {
  expect_identical_html(
    md = c(
      "foo ", " baz"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>foo",
      "baz</p>"
    )
  )
})

test_that("spec - Ex 650 (L9396-9398) - Textual content", {
  expect_identical_html(
    md = c(
      "hello $.;'there\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>hello $.;'there</p>"
    )
  )
})

test_that("spec - Ex 651 (L9403-9405) - Textual content", {
  expect_identical_html(
    md = c(
      "Foo œáœÅ·øÜŒΩ\n"
    ), flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>Foo œáœÅ·øÜŒΩ</p>"
    )
  )
})

test_that("spec - Ex 652 (L9412-9414) - Textual content", {
  expect_identical_html(
    md = c(
      "Multiple     spaces\n"
    ),
    flags = c(
      "MD_DIALECT_COMMONMARK"
    ),
    expected = c(
      "<p>Multiple     spaces</p>"
    )
  )
})
